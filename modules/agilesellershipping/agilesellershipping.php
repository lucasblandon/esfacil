<?php /*
///-build_id: 2014101516.3953
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/store/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2012 Addons-Modules.com
///
*/
${"G\x4c\x4f\x42\x41\x4cS"}["thj\x65\x66\x77s"]="er\x72\x6fr";${"\x47L\x4f\x42AL\x53"}["\x77\x74\x6c\x78\x72\x7a\x65\x75\x68g\x77"]="\x63\x61\x72ri\x65\x72s";${"\x47\x4c\x4fB\x41\x4c\x53"}["y\x6c\x78\x73he\x70\x65\x79\x78"]="\x63\x61\x72r\x69\x65\x72st\x6f\x6b\x65n";${"\x47\x4c\x4fB\x41\x4cS"}["\x6b\x7a\x77\x71dbv\x74f\x6c"]="\x63arri\x65\x72s\x74\x61\x62\x69\x64";${"\x47L\x4fBA\x4c\x53"}["\x65\x69vl\x6co\x64\x64\x75l\x77"]="\x63a\x72\x72\x69\x65\x72";${"\x47\x4cO\x42A\x4c\x53"}["u\x62tw\x65\x68"]="\x63\x61\x72\x72\x69\x65\x72\x5fi\x64";${"G\x4cOB\x41LS"}["\x76\x71\x6f\x76b\x6da\x64"]="_ne\x77\x66\x69les";${"\x47LOBA\x4c\x53"}["efq\x73\x71\x79f\x73"]="he\x61\x6c\x74h\x5f\x63\x68\x65ck";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x79m\x78\x73\x6f\x65\x63h\x76\x68w"]="\x61\x64\x6d\x69\x6e\x66\x6f\x6c\x64\x65\x72";require_once(_PS_ROOT_DIR_."/\x6do\x64u\x6ces/a\x67ile\x73\x65\x6c\x6c\x65rs\x68\x69\x70\x70\x69\x6eg/\x61gil\x65\x73el\x6ce\x72s\x68i\x70\x70i\x6eg\x62a\x73\x65.p\x68p");class AgileSellerShipping extends AgileSellerShippingBase{function __construct(){$this->bootstrap=true;parent::__construct();$this->displayName=$this->l('Agile Seller Shipping module');$this->description=$this->l('Provides shipping configuration functions to sellers');}public function getContent(){global$cookie;$this->_html="\x3ch2>".$this->displayName."</h\x32>";${${"G\x4c\x4f\x42\x41\x4cS"}["y\x6d\x78s\x6f\x65\x63hv\x68w"]}=AgileInstaller::detect_admin_folder($_SERVER["\x53C\x52IP\x54\x5f\x46ILEN\x41M\x45"]);${${"\x47\x4c\x4f\x42\x41L\x53"}["ef\x71\x73qyf\x73"]}=AgileInstaller::install_health_check(self::${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x76\x71\x6f\x76\x62\x6dad"]},$this->name,${${"\x47\x4cO\x42A\x4c\x53"}["\x79\x6dx\x73\x6f\x65\x63h\x76\x68\x77"]});if(!empty(${${"\x47\x4cOB\x41LS"}["\x65\x66\x71s\x71\x79f\x73"]}))$this->_html.=${${"GL\x4f\x42\x41L\x53"}["e\x66\x71\x73\x71y\x66\x73"]};$this->_html.=AgileInstaller::show_agile_links();if(Tools::isSubmit("\x73\x75bm\x69\x74\x53\x65t\x74ing")){${${"\x47LOB\x41\x4cS"}["\x75\x62\x74\x77e\x68"]}=intval(Tools::getValue("\x63arrier\x5fid"));if(!${${"G\x4c\x4f\x42\x41L\x53"}["\x75\x62t\x77e\x68"]})$this->_postErrors[]="<d\x69\x76 c\x6c\x61s\x73\x3d\"\x61ler\x74\x20e\x72\x72\x6fr\x22\x3e".$this->l('You should select the "Linked Carrier " field')."\x3c/\x64\x69v>";if(!sizeof($this->_postErrors)){$cxitpukrxcm="\x63\x61\x72\x72\x69\x65\x72\x5fi\x64";$pjzfmpioriq="\x63\x61\x72\x72i\x65r\x5f\x69d";Configuration::updateValue("\x41G\x49LE\x5fS\x53_\x43\x41\x52\x52IER_\x49\x44",intval(${$cxitpukrxcm}));Configuration::updateValue("\x41GI\x4c\x45\x5f\x53S_AS\x5fD\x45\x46AUL\x54\x5f\x43\x41\x52RI\x45R",intval(Tools::getValue("a\x73\x5f\x64e\x66\x61u\x6c\x74_\x63a\x72rie\x72")));Db::getInstance()->Execute("U\x50\x44\x41\x54E\x20 \x60"._DB_PREFIX_."c\x61rri\x65\x72\x60 \x53ET\x20i\x73_m\x6fdu\x6ce=\x31\x20\x57\x48ER\x45 \x69\x64_c\x61\x72\x72\x69\x65\x72\x3d".${$pjzfmpioriq});$this->displayConf();}else$this->displayErrors();}$this->displayForm();return$this->_html;}public function displayConf(){$this->_html.=$this->displayConfirmation($this->l('Settings updated'));}public function displayForm(){${"\x47\x4cOBA\x4c\x53"}["\x65\x69b\x79\x78\x61a\x66\x66"]="\x63\x61\x72r\x69\x65\x72\x73ta\x62i\x64";global$cookie;${"G\x4cOBALS"}["\x6b\x69g\x69ywou\x79sy"]="\x66ie\x6cd\x73\x5f\x66\x6fr\x6d";${${"\x47\x4c\x4f\x42\x41LS"}["\x75\x62t\x77e\x68"]}=intval(Configuration::get("AG\x49LE_SS_C\x41\x52\x52IE\x52\x5f\x49\x44"));${"\x47L\x4f\x42ALS"}["h\x69y\x62ah\x76\x6d\x77h\x78\x69"]="\x63\x61r\x72\x69\x65\x72s";${${"\x47L\x4f\x42\x41L\x53"}["\x65\x69v\x6c\x6c\x6fd\x64\x75l\x77"]}=new Carrier(intval(Configuration::get("AG\x49LE_SS_CA\x52\x52\x49ER_\x49\x44")));${${"G\x4c\x4f\x42\x41\x4c\x53"}["kz\x77q\x64\x62\x76\x74\x66\x6c"]}=Tab::getIdFromClassName("Admi\x6eC\x61\x72\x72\x69\x65\x72s");$ksnjhnvws="c\x61\x72r\x69e\x72\x73\x74oken";$zfiwwsvhf="he\x6cp\x65\x72";${"\x47\x4cOBA\x4c\x53"}["se\x76di\x72\x70\x6dc\x69"]="\x6c\x61n\x67";if(intval(${${"G\x4c\x4f\x42A\x4cS"}["\x65\x69\x62\x79\x78a\x61\x66\x66"]})>0){${${"\x47\x4c\x4f\x42\x41LS"}["\x79\x6c\x78sh\x65\x70ey\x78"]}=Tools::getAdminToken("\x41dm\x69n\x43\x61rri\x65rs".intval(${${"\x47\x4cO\x42\x41\x4cS"}["\x6b\x7a\x77\x71db\x76\x74\x66\x6c"]}).intval($cookie->id_employee));}else{${${"\x47L\x4fBA\x4c\x53"}["\x6b\x7a\x77\x71d\x62\x76\x74\x66\x6c"]}=Tab::getIdFromClassName("A\x67\x69\x6ce\x43a\x72\x72\x69e\x72\x73");${${"\x47L\x4f\x42\x41\x4c\x53"}["\x79l\x78s\x68\x65\x70e\x79\x78"]}=Tools::getAdminToken("\x41\x67ileCa\x72r\x69e\x72\x73".intval(${${"G\x4c\x4f\x42\x41\x4cS"}["k\x7aw\x71\x64b\x76t\x66\x6c"]}).intval($cookie->id_employee));}${${"G\x4cO\x42AL\x53"}["\x68\x69yba\x68v\x6d\x77\x68\x78\x69"]}=array(array("i\x64"=>AgileSellerShipping::USE_DEFAULT_CARRIER_NO,"name"=>$this->l('No - never user this for sellers')),array("id"=>AgileSellerShipping::USE_DEFAULT_CARRIER_WHEN_NO_CARRIERS,"\x6e\x61me"=>$this->l('Yes, only when no other carriers available for the seller')),array("\x69\x64"=>AgileSellerShipping::USE_DEFAULT_CARRIER_ALWAYS,"n\x61me"=>$this->l('Yes, always use this carrier for all sellers')),);${${"G\x4c\x4fB\x41\x4cS"}["\x6b\x69\x67\x69y\x77ouy\x73\x79"]}=array("f\x6f\x72m"=>array("l\x65ge\x6ed"=>array("tit\x6c\x65"=>$this->l('Settings'),"\x69\x6d\x61ge"=>$this->_path."l\x6fgo.\x67\x69f",),"\x64\x65\x73cr\x69\x70\x74ion"=>"<\x73pan\x20\x73t\x79\x6c\x65=\x22colo\x72:r\x65d\">".$this->l('Please read instruction first.')." </\x73\x70a\x6e>\x3cbr\x3e".$this->l('A new carrier named "agilesellershipping" has been created and Linked to this module.'),"in\x70\x75t"=>array(array("t\x79\x70\x65"=>"\x68\x69\x64de\x6e","\x6c\x61bel"=>$this->l('Linked Carrier ID'),"n\x61m\x65"=>"\x63arri\x65r\x5fid",),array("type"=>"\x74e\x78t","\x73\x69z\x65"=>80,"r\x65\x61\x64\x6fn\x6c\x79"=>1,"l\x61b\x65\x6c"=>$this->l('Linked Carrier'),"\x6e\x61\x6d\x65"=>"\x63\x61rri\x65r\x6ea\x6d\x65",),array("typ\x65"=>"com\x6d\x65nt","\x6cabe\x6c"=>$this->l('Maintenance Notes'),"na\x6d\x65"=>"\x6dai\x6ete\x6eanc\x65","de\x73\x63"=>array($this->l('1. Please change settings for this carrier as you would any other Carrier in the back office Admin tab: "Shipping"->"Carriers"')."&nbsp;\x3ca href\x3d\x22./\x69nde\x78.php?tab=A\x64\x6d\x69n\x43\x61\x72\x72i\x65\x72\x73\x26id\x5f\x63\x61\x72r\x69\x65r=".$carrier->id."\x26updat\x65\x63a\x72ri\x65\x72&t\x6f\x6b\x65\x6e=".${$ksnjhnvws}."\x22\x20s\x74yle\x3d\x22\x63o\x6co\x72:\x42\x6c\x75e;t\x65xt-\x64eco\x72\x61\x74\x69\x6f\x6e:\x75\x6ed\x65r\x6c\x69\x6ee;\x22\x3e".$this->l('Click here')."</\x61>","<\x73\x70\x61\x6e s\x74y\x6ce=\"c\x6f\x6cor:r\x65d\x22>".$this->l('2. Please DO NOT DELETE this carrier')."\x3c/\x73p\x61\x6e\x3e",$this->l('3. Please create price range or weight range and set the shipping fees for this carrier as you would any other carrier.'))),array("ty\x70\x65"=>"\x73\x65l\x65c\x74","l\x61\x62\x65l"=>$this->l('Use Default Carrier'),"\x6e\x61\x6d\x65"=>"a\x73\x5fdef\x61ult\x5f\x63\x61r\x72\x69\x65\x72","\x6f\x70\x74i\x6fn\x73"=>array("\x71u\x65\x72\x79"=>${${"\x47\x4c\x4fBA\x4cS"}["\x77t\x6c\x78r\x7a\x65u\x68\x67\x77"]},"i\x64"=>"id","\x6e\x61m\x65"=>"nam\x65"),"de\x73c"=>$this->l('Default carrier is the carrier created by this module and linked to this moduule'))),"\x73\x75\x62m\x69t"=>array("\x74i\x74\x6c\x65"=>$this->l('Save'),)));${$zfiwwsvhf}=new HelperForm();$helper->show_toolbar=false;${"G\x4c\x4fBA\x4c\x53"}["\x74\x6e\x77i\x70\x62\x65j\x6bp\x72"]="\x66\x69\x65\x6c\x64\x73_f\x6f\x72\x6d";$helper->table=$this->name;${${"GLOB\x41LS"}["s\x65\x76\x64i\x72\x70mc\x69"]}=new Language((int)Configuration::get("P\x53_\x4cAN\x47_\x44\x45\x46\x41\x55LT"));$helper->default_form_language=$lang->id;$helper->module=$this;$helper->allow_employee_form_lang=Configuration::get("\x50\x53\x5f\x42O\x5f\x41\x4c\x4cOW_E\x4d\x50\x4c\x4fYE\x45\x5fF\x4fRM\x5fL\x41N\x47")?Configuration::get("PS\x5fBO\x5f\x41LL\x4fW_\x45\x4dP\x4c\x4fYEE_FORM\x5f\x4cA\x4eG"):0;$helper->identifier=$this->identifier;$helper->submit_action="\x73u\x62\x6d\x69tS\x65t\x74\x69n\x67";$helper->currentIndex=$this->context->link->getAdminLink("Ad\x6d\x69n\x4d\x6fd\x75le\x73",false)."&\x63on\x66igu\x72e=".$this->name."\x26ta\x62_mo\x64u\x6ce\x3d".$this->tab."&\x6dodu\x6c\x65\x5f\x6eame\x3d".$this->name;$helper->token=Tools::getAdminTokenLite("A\x64minMo\x64ule\x73");$helper->tpl_vars=array("f\x69\x65lds\x5fvalue"=>$this->getConfigFieldsValues(${${"\x47\x4c\x4f\x42\x41LS"}["\x65\x69vllod\x64\x75l\x77"]}),"\x6c\x61\x6egua\x67e\x73"=>$this->context->controller->getLanguages(),"\x69d\x5f\x6c\x61ngua\x67e"=>$this->context->language->id);$this->_html.=$helper->generateForm(array(${${"\x47\x4cOBA\x4c\x53"}["\x74\x6e\x77\x69pbe\x6akp\x72"]}));}public function getConfigFieldsValues($carrier){return array("\x61\x73\x5fde\x66\x61\x75lt_carri\x65\x72"=>Tools::getValue("a\x73_\x64ef\x61\x75\x6c\x74\x5fca\x72\x72\x69e\x72",intval(Configuration::get("A\x47I\x4cE_SS_AS\x5fDEFAU\x4cT_\x43ARRI\x45\x52"))),"ca\x72ri\x65r\x6ea\x6de"=>$carrier->name,"c\x61\x72\x72ie\x72\x5f\x69d"=>$carrier->id);}public function displayErrors(){$mslcmfkiuy="\x6e\x62E\x72\x72o\x72\x73";$ccfhguau="n\x62E\x72r\x6frs";$ddbuausha="\x6ebEr\x72or\x73";$nlikiki="n\x62\x45r\x72\x6f\x72\x73";${$mslcmfkiuy}=sizeof($this->_postErrors);$this->_html.="\n\t\t\x3cd\x69\x76 c\x6ca\x73\x73=\"\x61l\x65r\x74\x20err\x6f\x72\x22>\n\t\t\t<h\x33>".(${$ddbuausha}>1?$this->l('There are'):$this->l('There is'))."\x20".${$nlikiki}." ".(${$ccfhguau}>1?$this->l('errors'):$this->l('error'))."\x3c/\x68\x33>\n\t\t\t<ol\x3e";foreach($this->_postErrors AS${${"G\x4cOBA\x4cS"}["\x74h\x6a\x65\x66ws"]})$this->_html.="<li\x3e".${${"G\x4cOBA\x4cS"}["\x74\x68j\x65\x66\x77s"]}."</\x6c\x69>";$this->_html.="\n\t\t\t\x3c/\x6fl>\n\t\t\x3c/div>";}}
?>