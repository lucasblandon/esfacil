<?php /*
///-build_id: 2014101516.3953
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/store/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2012 Addons-Modules.com
///
*/
${"G\x4cO\x42A\x4cS"}["\x66j\x6cpbtx\x77\x65\x76"]="fi\x6ce\x6e\x61\x6d\x65";${"\x47L\x4f\x42\x41L\x53"}["dqrd\x64juf\x70\x6d"]="c\x61\x72\x72ier\x5f\x69d";${"\x47\x4cO\x42AL\x53"}["\x6c\x69ni\x66mx\x6e\x65"]="\x7a\x6f\x6ee";${"\x47L\x4fB\x41\x4cS"}["\x66v\x74\x6c\x78\x72\x70"]="\x63\x61\x72\x72ier";${"\x47\x4c\x4fB\x41\x4c\x53"}["c\x68q\x73\x75lj\x69"]="g\x72\x6fu\x70";${"G\x4cO\x42\x41LS"}["\x64k\x6bd\x6b\x6d\x65"]="i\x64\x5fcar\x72\x69\x65\x72";${"\x47\x4c\x4f\x42\x41\x4cS"}["muv\x6djn\x6b"]="n\x65\x77\x5f\x63a\x72\x72\x69e\x72";${"\x47\x4c\x4f\x42\x41LS"}["\x65\x77\x64t\x75\x66\x71vp\x71"]="\x63u\x72r\x65\x6et\x5f\x63a\x72\x72i\x65\x72";${"\x47\x4c\x4fB\x41\x4c\x53"}["\x62\x6f\x72\x73\x68\x76\x70"]="\x7a\x6f\x6e\x65Se\x6ce\x63t\x65\x64";${"\x47\x4cO\x42AL\x53"}["\x68\x7aw\x6e\x66\x76\x79\x74\x74\x74j"]="\x7a\x6f\x6e\x65s";${"\x47L\x4f\x42\x41\x4c\x53"}["\x72\x63\x66\x77u\x78\x68\x63\x65\x61kc"]="\x72\x61n\x67\x65_\x62e\x68a\x76\x69or\x73";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x75hb\x72\x6b\x78\x66"]="c\x61\x72\x72\x69\x65\x72\x5f\x67rou\x70s\x5f\x69d\x73";${"\x47\x4c\x4f\x42A\x4cS"}["\x70l\x64rm\x7ash\x69pv"]="c\x61\x72\x72ie\x72_\x67r\x6f\x75ps";${"GL\x4fB\x41LS"}["\x67x\x65\x68ud\x67\x79\x63l"]="g\x72o\x75\x70\x73";${"\x47LO\x42\x41\x4c\x53"}["i\x65e\x69\x62bl\x6ec\x65"]="\x63\x61\x72\x72\x69er_z\x6f\x6e\x65_\x69\x64s";${"G\x4c\x4fBA\x4c\x53"}["\x62\x71\x74ii\x65\x6du"]="\x63\x61\x72\x72ier_\x7ao\x6ee";${"GL\x4f\x42\x41\x4c\x53"}["\x79\x68\x6di\x6a\x62o"]="c\x61\x72\x72\x69\x65\x72_z\x6f\x6ees";${"\x47\x4cO\x42\x41\x4c\x53"}["k\x79j\x6f\x72\x66\x79ndi\x6dc"]="\x74\x61\x78\x65s";${"G\x4c\x4fB\x41\x4c\x53"}["\x6d\x69yv\x68u"]="\x69sSh\x61\x72e\x64\x43\x61\x72r\x69\x65\x72";${"\x47\x4cOB\x41\x4cS"}["\x6b\x68\x6d\x75jz\x78pi"]="h\x61s\x4f\x77n\x65\x72Sh\x69\x70";include_once(_PS_ROOT_DIR_."/mo\x64\x75\x6c\x65s/ag\x69\x6c\x65s\x65l\x6c\x65r\x73hi\x70p\x69\x6e\x67/\x61\x67i\x6c\x65s\x65l\x6c\x65r\x73\x68\x69pp\x69\x6e\x67.p\x68p");class AgileSellerShippingSellerCarrierDetailModuleFrontController extends AgileModuleFrontController{public function __construct(){parent::__construct();$this->table="c\x61\x72r\x69e\x72";$this->identifier="i\x64\x5fc\x61\x72rier";$this->className="\x43\x61r\x72ie\x72";}public function init(){${"GL\x4f\x42\x41\x4cS"}["\x68\x78\x69\x6c\x72\x6f\x77v\x6f\x76"]="i\x73\x53ha\x72\x65d\x43arr\x69e\x72";global$smarty,$link;${"\x47\x4c\x4fB\x41\x4cS"}["\x64x\x76\x67\x73\x65"]="\x68\x61s\x4fw\x6e\x65\x72\x53\x68i\x70";${"\x47L\x4fB\x41LS"}["d\x78f\x63\x78f\x76"]="\x69\x64\x5fo\x77n\x65\x72";$lbrddfm="\x69\x64\x5fo\x77ner";parent::init();header("\x43a\x63\x68\x65-C\x6f\x6e\x74r\x6fl: n\x6f-c\x61c\x68e,\x20m\x75st-r\x65v\x61lida\x74e");$razqoxicsrgp="\x68\x61sO\x77\x6ee\x72\x53h\x69\x70";header("Exp\x69r\x65\x73:\x20\x53\x61t, \x326\x20J\x75l\x201997\x2005:00:0\x30\x20GMT");$kviycmj="\x69\x64\x5f\x6fw\x6ee\x72";$this->max_image_size=(int)Configuration::get("\x50\x53_PROD\x55CT\x5f\x50IC\x54\x55RE_\x4d\x41X_\x53IZE")/1000;$this->languages=Language::getLanguages(false);$wotkvygqc="\x69\x64\x5f\x6f\x77\x6eer";$this->id_object=Carrier::getActiveIDByID((int)Tools::getValue("i\x64_c\x61\x72r\x69er"));if($this->id_object!=(int)Tools::getValue("i\x64\x5f\x63arr\x69\x65\x72")){Tools::redirect($link->getModuleLink("a\x67il\x65s\x65\x6cl\x65\x72\x73hipp\x69\x6e\x67","s\x65\x6clercarri\x65r\x64e\x74ai\x6c",array("i\x64_c\x61rr\x69\x65\x72"=>$this->id_object),true));}$this->object=new Carrier($this->id_object);${$lbrddfm}=AgileSellerManager::getObjectOwnerID("\x63\x61rri\x65\x72",Tools::getValue("\x69\x64\x5fcarr\x69\x65r"));${$razqoxicsrgp}=($this->id_object==0 OR(${$kviycmj}>0&&${$wotkvygqc}==$this->sellerinfo->id_seller));${${"G\x4cO\x42\x41L\x53"}["\x68\x78i\x6c\x72o\x77\x76o\x76"]}=(${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x64\x78\x66cx\x66\x76"]}==0);if(!${${"\x47\x4cOB\x41LS"}["khm\x75j\x7ax\x70\x69"]} AND!${${"\x47\x4c\x4fB\x41LS"}["\x6d\x69\x79\x76h\x75"]}){$this->errors[]=Tools::displayError("Yo\x75 do n\x6f\x74 ha\x76e \x70\x65\x72\x6d\x69ssio\x6e t\x6f a\x63\x63\x65ss\x20ca\x72r\x69e\x72\x2e ");}$smarty->assign(array("ha\x73OwnerS\x68i\x70"=>${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["d\x78\x76gs\x65"]},"\x69\x73Sh\x61redCar\x72i\x65\x72"=>${${"\x47\x4cOB\x41L\x53"}["m\x69\x79v\x68\x75"]},"\x69\x73\x43\x61r\x72ierI\x6eit\x69\x61l"=>(empty($_POST)?1:0)));}public function setMedia(){parent::setMedia();$this->addJS(array(_PS_JS_DIR_."\x61d\x6di\x6e.\x6as"));$this->addCSS(_PS_ROOT_DIR_."/\x6dodule\x73/\x61\x67i\x6ce\x73ell\x65r\x73\x68\x69\x70\x70i\x6eg/\x63\x73s/agil\x65\x73e\x6cle\x72sshippi\x6eg\x2e\x63\x73s","\x61ll");}public function getMessage($key){$odymotkgb="\x6de\x73\x73\x61g\x65\x73";${"\x47L\x4f\x42\x41\x4c\x53"}["f\x6d\x6c\x66\x63h\x79\x76\x65g\x75"]="\x6dess\x61\x67e\x73";${${"\x47\x4cO\x42A\x4c\x53"}["\x66\x6d\x6c\x66\x63hyv\x65gu"]}=array("\x50r\x69\x63\x65\x20r\x75\x6c\x65 \x73\x75\x63cess\x66ull\x79\x20\x75\x70d\x61t\x65\x64"=>$this->l('Price rule successfully updated'),"If y\x6f\x75 wi\x73\x68\x20t\x6f use \x74\x68e a\x64\x76\x61n\x63e\x64 \x73\x74o\x63\x6b\x20m\x61\x6e\x61\x67\x65\x6d\x65n\x74, you\x20h\x61ve\x20\x74\x6f:"=>$this->l('If you wish to use the advanced stock management, you have to:'),"a\x73s\x6f\x63\x69at\x65 y\x6f\x75r\x20\x63ar\x72\x69er\x73 \x77it\x68\x20\x77ar\x65h\x6f\x75ses"=>$this->l('associate your carriers with warehouses'),"\x61s\x73oci\x61te\x20your\x20war\x65\x68\x6f\x75s\x65s\x20wit\x68 c\x61rr\x69\x65rs"=>$this->l('associate your warehouses with carriers'),"\x61sso\x63\x69ate y\x6fu\x72\x20ware\x68ou\x73es w\x69t\x68\x20the \x61ppr\x6fpr\x69\x61te s\x68\x6fp\x73"=>$this->l('associate your warehouses with the appropriate shops'),"\x59\x6fu\x20\x6du\x73\x74\x20\x68a\x76\x65\x20\x61 \x63\x6f\x6d\x6d\x6f\x6e \x77a\x72e\x68o\x75\x73e \x62\x65twe\x65n\x20\x74hi\x73\x20\x70\x61c\x6b a\x6e\x64\x20i\x74s \x63a\x72\x72ier."=>$this->l('You must have a common warehouse between this pack and its carrier.'),"Y\x6fu \x6d\x75\x73t\x20s\x61v\x65\x20\x74\x68\x69s \x63\x61r\x72\x69\x65\x72 befo\x72e mana\x67\x69ng q\x75\x61\x6eti\x74\x69\x65\x73\x2e"=>$this->l('You must save this carrier before managing quantities.'),"Yo\x75 mu\x73\x74\x20s\x61ve\x20\x74\x68i\x73 \x63\x61rri\x65r\x20\x62ef\x6f\x72\x65\x20\x61\x64\x64\x69\x6eg \x73\x70\x65ci\x66\x69c\x20p\x72\x69\x63es"=>$this->l('You must save this carrier before adding specific prices'),"Th\x69\x73 \x66e\x61t\x75\x72\x65 h\x61\x73 \x62\x65e\x6e \x64\x69\x73ab\x6ced, yo\x75\x20\x63\x61n\x20\x61\x63\x74\x69v\x61t\x65\x20t\x68\x69\x73 fea\x74\x75\x72\x65 at \x74\x68is\x20\x70a\x67e:"=>$this->l('This feature has been disabled, you can activate this feature at this page:'),"l\x69\x6e\x6b\x20t\x6f P\x65r\x66\x6f\x72\x6d\x61\x6e\x63e\x73"=>$this->l('link to Performances'),"A vir\x74\x75a\x6c\x20\x63arr\x69\x65r c\x61nnot\x20\x68\x61v\x65 \x63\x6fmbina\x74ion\x73."=>$this->l('A virtual carrier cannot have combinations.'),"You\x20\x6d\x75\x73\x74\x20save\x20t\x68\x69\x73 \x63\x61r\x72\x69\x65\x72 \x62\x65f\x6f\x72e\x20add\x69\x6eg com\x62\x69\x6ea\x74\x69o\x6es."=>$this->l('You must save this carrier before adding combinations.'));$pxwbwxfdq="\x6b\x65\x79";return${$odymotkgb}[${$pxwbwxfdq}];}public function displayAjax(){$this->display();}public function initContent(){parent::initContent();$this->initContentCommon();$this->setTemplate("\x73e\x6cler\x63ar\x72\x69\x65rd\x65\x74ai\x6c\x2e\x74p\x6c");}private function initContentCommon(){global$cookie;${${"\x47LOBA\x4c\x53"}["k\x79\x6a\x6f\x72\x66\x79\x6e\x64\x69\x6d\x63"]}=array_merge(array(array("\x69d\x5f\x74ax_rule\x73\x5f\x67ro\x75p"=>0,"na\x6de"=>$this->l('No Tax'))),TaxRulesGroup::getTaxRulesGroups(true));$owipukls="\x7a\x6f\x6e\x65\x73";$kfvqrycsfp="\x63\x61\x72\x72\x69e\x72\x5f\x7a\x6f\x6e\x65\x5f\x69\x64\x73";${"\x47\x4c\x4f\x42\x41L\x53"}["f\x6b\x6f\x6df\x62xc\x73"]="\x67r\x6f\x75p\x73";$djmqrq="l\x61ngu\x61\x67\x65\x73";${$djmqrq}=Language::getLanguages(false);$zluyvyy="l\x6f\x67\x6f\x5f\x73\x65\x74";${$owipukls}=Zone::getZones(false);${${"GLO\x42A\x4c\x53"}["\x79h\x6di\x6abo"]}=$this->object->getZones();${$kfvqrycsfp}=array();if(is_array(${${"\x47L\x4fB\x41\x4cS"}["y\x68\x6d\x69j\x62\x6f"]})){$zctoniufz="\x63\x61rr\x69\x65\x72\x5fz\x6f\x6ee";foreach(${${"\x47L\x4f\x42\x41\x4cS"}["\x79\x68m\x69\x6ab\x6f"]} as${${"\x47\x4cO\x42\x41\x4c\x53"}["\x62\x71t\x69\x69\x65\x6du"]})${${"\x47\x4c\x4f\x42A\x4cS"}["i\x65\x65\x69\x62\x62l\x6ece"]}[]=${$zctoniufz}["id_\x7a\x6fn\x65"];}${${"\x47\x4c\x4f\x42\x41L\x53"}["g\x78\x65h\x75\x64\x67\x79c\x6c"]}=Group::getGroups($this->context->language->id);$rtdixamkvjq="\x62\x69\x6c\x6c\x69\x6e\x67s";${"G\x4cO\x42\x41\x4c\x53"}["e\x66km\x70v\x77"]="lo\x67\x6f\x5f\x73e\x74";${${"\x47\x4c\x4fBA\x4c\x53"}["\x70\x6c\x64\x72mz\x73hi\x70\x76"]}=$this->object->getGroups();$dsjpqhumqdv="\x62\x69\x6c\x6c\x69\x6eg\x73";$tkiprnharu="\x6c\x61\x6e\x67\x75a\x67es";${${"\x47\x4cO\x42ALS"}["\x75\x68\x62\x72\x6b\x78\x66"]}=array();if(is_array(${${"G\x4c\x4f\x42\x41L\x53"}["p\x6c\x64\x72\x6d\x7a\x73hipv"]})){${"\x47\x4cO\x42\x41L\x53"}["b\x76\x61\x67v\x6fi\x6e"]="\x63\x61\x72\x72\x69\x65\x72\x5f\x67roup";${"GL\x4f\x42A\x4c\x53"}["\x64sgvhts\x67\x6c"]="\x63a\x72\x72\x69\x65r\x5f\x67\x72o\x75\x70";$iezhwrxzdu="c\x61r\x72\x69\x65\x72\x5f\x67ro\x75ps\x5f\x69\x64\x73";foreach(${${"G\x4c\x4f\x42\x41LS"}["\x70\x6c\x64r\x6d\x7ashipv"]} as${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x64\x73\x67vh\x74\x73\x67\x6c"]})${$iezhwrxzdu}[]=${${"GLO\x42A\x4cS"}["\x62\x76\x61g\x76\x6fi\x6e"]}["id\x5f\x67\x72oup"];}${$rtdixamkvjq}=array(array("\x69\x64"=>"bil\x6c\x69\x6eg\x5f\x64\x65\x66\x61u\x6ct","\x76\x61lue"=>Carrier::SHIPPING_METHOD_DEFAULT,"\x6c\x61\x62\x65\x6c"=>$this->l('Default behavior')),array("i\x64"=>"bi\x6clin\x67\x5fp\x72i\x63e","v\x61\x6c\x75e"=>Carrier::SHIPPING_METHOD_PRICE,"labe\x6c"=>$this->l('According to total price')),array("i\x64"=>"bil\x6c\x69ng\x5fwei\x67\x68\x74","\x76alue"=>Carrier::SHIPPING_METHOD_WEIGHT,"\x6c\x61\x62e\x6c"=>$this->l('According to total weight')));${${"G\x4cO\x42\x41\x4c\x53"}["rcf\x77\x75\x78\x68c\x65\x61\x6b\x63"]}=array(array("i\x64"=>0,"n\x61m\x65"=>$this->l('Apply the cost of the highest defined range')),array("\x69\x64"=>1,"na\x6d\x65"=>$this->l('Disable carrier')));${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x65\x66\x6b\x6dp\x76w"]}=file_exists(_PS_SHIP_IMG_DIR_.$this->id_object."\x2ejpg");self::$smarty->assign(array("seller_ta\x62_\x69\x64"=>6,"\x69\x64\x5fca\x72r\x69e\x72"=>$this->id_object,"\x63a\x72\x72\x69e\x72"=>$this->object,"t\x61\x78\x65s"=>${${"G\x4c\x4fB\x41\x4cS"}["\x6by\x6a\x6f\x72\x66y\x6e\x64\x69\x6d\x63"]},"\x7a\x6f\x6e\x65\x73"=>${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x68z\x77\x6ef\x76ytt\x74\x6a"]},"\x7a\x6fne_\x69ds"=>${${"\x47\x4cO\x42\x41\x4c\x53"}["\x69e\x65\x69b\x62\x6cn\x63\x65"]},"\x67roup\x73"=>${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["f\x6bom\x66\x62\x78c\x73"]},"\x63\x61rri\x65r\x5fg\x72\x6fu\x70s_\x69d\x73"=>${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x75\x68\x62rk\x78\x66"]},"bi\x6c\x6cin\x67s"=>${$dsjpqhumqdv},"\x72\x61\x6e\x67\x65_beh\x61viors"=>${${"G\x4c\x4fBA\x4c\x53"}["\x72cfwux\x68\x63\x65\x61k\x63"]},"la\x6e\x67\x75\x61ge\x73"=>${$tkiprnharu},"\x64\x65faul\x74_lan\x67u\x61\x67\x65"=>self::$cookie->id_lang,"\x73t\x65p"=>0,"l\x6fg\x6f\x5fset"=>${$zluyvyy}));}public function postProcess(){$_POST["\x69\x64_\x73ell\x65\x72"]=AgileSellerManager::getLinkedSellerID($this->context->customer->id);$this->object->indexed=0;if(Tools::getValue("su\x62\x6di\x74Add")or Tools::getValue("s\x75b\x6ditN\x65xt")){${"G\x4c\x4f\x42\x41\x4cS"}["\x6erv\x68wp\x6bjid"]="\x7a\x6f\x6e\x65\x53\x65l\x65\x63\x74\x65\x64";${"\x47L\x4f\x42\x41\x4c\x53"}["\x6a\x68\x62e\x71n\x64rd\x76"]="\x7a\x6f\x6ee";$this->validateRules();${"G\x4c\x4fB\x41L\x53"}["k\x64\x72km\x6c\x63mu\x76\x71"]="z\x6f\x6ee\x73";if(count($this->errors)){$this->copyFromPost($this->object,$this->table);return;}$this->copyFromPost($this->object,$this->table);${${"G\x4c\x4fB\x41LS"}["\x68zw\x6ef\x76y\x74t\x74j"]}=Zone::getZones(false);${${"\x47LOBAL\x53"}["\x6e\x72\x76\x68\x77\x70\x6b\x6a\x69\x64"]}=false;foreach(${${"\x47L\x4f\x42\x41\x4c\x53"}["k\x64\x72k\x6d\x6c\x63m\x75vq"]} as${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6a\x68b\x65q\x6e\x64\x72d\x76"]}){$unzlmmwlt="zo\x6ee";if(isset($_POST["\x7a\x6f\x6ee_".${$unzlmmwlt}["i\x64_z\x6fn\x65"]])){${${"\x47\x4c\x4fB\x41\x4cS"}["\x62o\x72\x73\x68\x76\x70"]}=true;break;}}if(!${${"\x47\x4cOB\x41\x4c\x53"}["\x62\x6fr\x73\x68\x76\x70"]}){$this->errors[]=Tools::displayError("\x41\x74\x20l\x65ast on\x65 zo\x6e\x65 is \x72\x65quired.");return;}if($this->id_object>0){try{$uemoimgfw="\x63\x75\x72\x72\x65nt_car\x72\x69\x65r";${"\x47L\x4f\x42\x41L\x53"}["\x65\x6e\x6e\x68\x6elq"]="\x6e\x65\x77\x5f\x63a\x72\x72i\x65\x72";${${"G\x4c\x4f\x42\x41LS"}["\x65\x77\x64\x74\x75\x66\x71\x76\x70q"]}=new Carrier($this->id_object);if(!Validate::isLoadedObject(${$uemoimgfw}))throw new PrestaShopException("\x43an\x6eot l\x6f\x61\x64\x20Ca\x72\x72\x69\x65r\x20o\x62je\x63t");${"G\x4cOB\x41LS"}["\x6cnudi\x76d\x74\x64\x74"]="n\x65\x77\x5fc\x61r\x72\x69\x65\x72";${${"\x47\x4cO\x42\x41\x4c\x53"}["\x65\x6e\x6eh\x6e\x6cq"]}=$current_carrier->duplicateObject();if(Validate::isLoadedObject(${${"\x47\x4c\x4f\x42\x41L\x53"}["\x6cn\x75d\x69\x76d\x74\x64\x74"]})){$current_carrier->deleted=true;$current_carrier->update();$this->copyFromPost(${${"\x47LOBA\x4c\x53"}["m\x75\x76mjn\x6b"]},$this->table);$new_carrier->position=$current_carrier->position;$new_carrier->update();$this->updateAssoShop($new_carrier->id);$new_carrier->copyCarrierData((int)$current_carrier->id);$new_carrier->setTaxRulesGroup((int)Tools::getValue("\x69d\x5ftax_\x72u\x6ce\x73\x5fgro\x75\x70"),true);$this->changeGroups($new_carrier->id);Hook::exec("a\x63\x74\x69\x6f\x6eCar\x72\x69\x65rUp\x64\x61t\x65",array("id_\x63a\x72\x72ier"=>(int)$current_carrier->id,"\x63a\x72rie\x72"=>${${"\x47L\x4f\x42\x41LS"}["mu\x76\x6d\x6an\x6b"]}));$this->changeZones($new_carrier->id);$this->processLogoUpload($new_carrier->id);if(Tools::getValue("\x73\x75bm\x69\x74\x4ee\x78t")){Tools::redirect("\x69nd\x65x.\x70\x68p?pr\x6fce\x73\x73=\x63\x61rr\x69\x65\x72\x26f\x63\x3dmodul\x65\x26\x6d\x6f\x64ul\x65\x3da\x67i\x6c\x65se\x6cle\x72\x73\x68ip\x70i\x6eg&c\x6fnt\x72ol\x6c\x65\x72\x3d\x73el\x6c\x65\x72c\x61\x72\x72\x69er\x72\x61\x6eg\x65s\x26i\x64\x5fcar\x72ie\x72=".$new_carrier->id);}else{Tools::redirect("i\x6e\x64\x65x.\x70\x68\x70?\x70\x72o\x63\x65\x73\x73\x3dca\x72\x72\x69er\x73\x26fc=modu\x6c\x65\x26\x6d\x6f\x64ule=\x61g\x69les\x65l\x6c\x65rshipp\x69\x6e\x67\x26c\x6f\x6e\x74r\x6fll\x65r\x3dsel\x6ce\x72\x63arriers");}}else{$this->errors[]=Tools::displayError("An\x20e\x72\x72\x6fr\x20\x6fc\x63ur\x72\x65\x64\x20\x77\x68\x69\x6ce \x75p\x64\x61t\x69\x6e\x67 \x6f\x62j\x65c\x74.")." \x3cb>".$this->table."\x3c/b>";}}catch(PrestaShopException$e){$this->errors[]=$e->getMessage();}}else{${"\x47\x4cO\x42\x41L\x53"}["ctn\x63\x61\x6at"]="c\x61\x72r\x69\x65\x72";${${"\x47L\x4f\x42\x41\x4c\x53"}["c\x74\x6e\x63\x61jt"]}=new Carrier();${"G\x4cOB\x41\x4cS"}["\x6f\x68\x73h\x77\x78\x6a\x77\x73\x79\x63q"]="\x63a\x72\x72\x69\x65r";$this->copyFromPost(${${"\x47\x4cOB\x41\x4c\x53"}["\x6fhshw\x78j\x77\x73\x79\x63\x71"]},$this->table);$carrier->position=Carrier::getHigherPosition()+1;if($carrier->add()){$carrier->setTaxRulesGroup((int)Tools::getValue("i\x64_tax_rules_\x67ro\x75p"),true);$this->changeZones($carrier->id);$this->changeGroups($carrier->id);$this->updateAssoShop($carrier->id);$this->processLogoUpload($carrier->id);if(Tools::getValue("\x73\x75\x62\x6ditN\x65\x78\x74")){Tools::redirect("\x69\x6edex.\x70h\x70?\x70r\x6f\x63\x65\x73s=\x73\x68\x69pp\x69n\x67\x26fc=module&m\x6f\x64ule=ag\x69l\x65\x73\x65\x6cle\x72\x73h\x69ppi\x6e\x67\x26co\x6e\x74r\x6flle\x72=\x73ell\x65\x72\x63arrie\x72ra\x6eg\x65\x73\x26id_carrier\x3d".$carrier->id);}else{Tools::redirect("i\x6ed\x65x\x2ep\x68\x70?\x70ro\x63\x65\x73s=shi\x70\x70\x69n\x67\x26\x66\x63=m\x6f\x64\x75le\x26\x6d\x6fd\x75le\x3da\x67ilese\x6c\x6c\x65rs\x68i\x70\x70\x69\x6e\x67&\x63\x6f\x6e\x74\x72oll\x65\x72=s\x65\x6cle\x72s\x68ippin\x67");}}else{$this->errors[]=Tools::displayError("\x41n e\x72\x72o\x72 oc\x63u\x72\x72ed whi\x6ce cr\x65\x61t\x69\x6e\x67 objec\x74.");}}}}protected function changeGroups($id_carrier,$delete=true){$ojwfurvsiv="\x67\x72\x6f\x75p\x73";${"\x47\x4c\x4f\x42A\x4cS"}["\x64\x69\x63xn\x7a"]="\x64\x65\x6c\x65\x74\x65";if(${${"\x47\x4c\x4f\x42\x41L\x53"}["\x64i\x63\x78\x6ez"]})Db::getInstance()->execute("\x44ELE\x54\x45 \x46\x52OM\x20"._DB_PREFIX_."carr\x69\x65\x72_g\x72\x6f\x75p\x20\x57HER\x45\x20id\x5fca\x72r\x69e\x72\x20\x3d\x20".(int)${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x64k\x6bd\x6b\x6d\x65"]});${$ojwfurvsiv}=Db::getInstance()->executeS("\x53\x45L\x45\x43T i\x64_g\x72\x6f\x75p \x46ROM \x60"._DB_PREFIX_."g\x72\x6f\x75p\x60");foreach(${${"\x47L\x4f\x42A\x4c\x53"}["\x67\x78\x65hu\x64\x67\x79\x63\x6c"]} as${${"\x47LOB\x41\x4c\x53"}["\x63h\x71\x73\x75\x6c\x6ai"]}){${"\x47\x4c\x4fB\x41\x4c\x53"}["\x6e\x67\x64\x6a\x6bc\x73\x62\x7a"]="\x67\x72o\x75\x70";$rujjmhdzapk="\x67r\x6f\x75\x70";if(Tools::getIsset("g\x72\x6f\x75p\x42\x6fx")&&in_array(${$rujjmhdzapk}["\x69d\x5f\x67rou\x70"],Tools::getValue("g\x72\x6f\x75p\x42\x6fx")))Db::getInstance()->execute("\n\t\t\t\t\tI\x4eSERT\x20\x49\x4eT\x4f\x20"._DB_PREFIX_."carrier\x5fgr\x6f\x75\x70\x20(i\x64\x5f\x67ro\x75\x70, i\x64_\x63a\x72\x72ier)\n\t\t\t\t\tV\x41L\x55\x45\x53(".(int)${${"\x47\x4cOB\x41LS"}["\x6e\x67\x64j\x6b\x63s\x62\x7a"]}["i\x64_\x67\x72\x6fup"].",".(int)${${"\x47LO\x42\x41LS"}["\x64k\x6b\x64\x6bm\x65"]}.")\n\t\t\t\t");}}public function changeZones($id){$uscygltp="\x69d";$jmjrqkr="c\x61\x72r\x69er";${${"\x47\x4cO\x42\x41LS"}["fv\x74\x6cx\x72\x70"]}=new$this->className(${$uscygltp});$qstmgbkcujee="zone";if(!Validate::isLoadedObject(${$jmjrqkr}))die(Tools::displayError("Ob\x6a\x65\x63\x74\x20\x63\x61\x6en\x6ft \x62\x65 \x6co\x61ded"));${${"\x47L\x4fB\x41\x4cS"}["\x68z\x77\x6e\x66\x76y\x74\x74tj"]}=Zone::getZones(false);foreach(${${"\x47LO\x42A\x4c\x53"}["\x68\x7awn\x66v\x79tt\x74j"]} as${$qstmgbkcujee}){${"\x47L\x4fB\x41LS"}["\x6et\x6f\x67qv\x6b\x6d\x63\x71\x71\x6c"]="\x7aone";${"\x47\x4c\x4f\x42\x41LS"}["b\x75\x6f\x79se"]="zo\x6e\x65";if(count($carrier->getZone(${${"G\x4c\x4f\x42\x41\x4cS"}["\x6c\x69n\x69\x66\x6dxne"]}["i\x64_\x7ao\x6ee"]))){${"\x47\x4c\x4f\x42\x41L\x53"}["ed\x67\x6c\x70\x74\x6a\x64\x74e\x78"]="\x7a\x6f\x6e\x65";${"\x47\x4c\x4fB\x41\x4cS"}["g\x68\x63\x78y\x65\x73\x6eb"]="\x7a\x6f\x6e\x65";if(!isset($_POST["zo\x6e\x65\x5f".${${"G\x4cO\x42A\x4c\x53"}["\x6ci\x6e\x69\x66mxne"]}["i\x64\x5fzone"]])||!$_POST["\x7a\x6fn\x65_".${${"GL\x4fBAL\x53"}["e\x64\x67\x6c\x70\x74jd\x74e\x78"]}["i\x64\x5fzon\x65"]])$carrier->deleteZone(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x67\x68c\x78\x79e\x73nb"]}["\x69\x64_\x7aon\x65"]);}else if(isset($_POST["\x7a\x6fne\x5f".${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6eto\x67\x71\x76\x6b\x6dc\x71q\x6c"]}["i\x64\x5fz\x6f\x6e\x65"]])&&$_POST["z\x6fn\x65_".${${"GL\x4f\x42AL\x53"}["\x62uoy\x73\x65"]}["id_z\x6fne"]])$carrier->addZone(${${"\x47\x4c\x4fBA\x4c\x53"}["\x6c\x69n\x69\x66\x6d\x78n\x65"]}["i\x64\x5f\x7a\x6fne"]);}}public function processLogoUpload($carrier_id){if(${${"\x47L\x4f\x42ALS"}["\x64\x71r\x64d\x6a\x75\x66pm"]}<=0)return;${"\x47LO\x42\x41LS"}["\x72\x73\x74k\x6e\x6c\x76"]="\x6co\x67\x6f\x5f\x66\x6f\x6c\x64er";${${"\x47L\x4f\x42\x41LS"}["r\x73t\x6b\x6e\x6c\x76"]}=_PS_SHIP_IMG_DIR_;if(!empty($_FILES["lo\x67o"]["n\x61\x6de"])){$gviwswjtq="f\x69\x6c\x65na\x6d\x65";${${"\x47\x4c\x4fB\x41\x4cS"}["fj\x6c\x70\x62t\x78wev"]}=_PS_SHIP_IMG_DIR_.${${"GL\x4f\x42\x41\x4c\x53"}["\x64q\x72\x64dj\x75\x66\x70\x6d"]}.".j\x70g";if(!move_uploaded_file($_FILES["logo"]["t\x6dp_\x6e\x61\x6d\x65"],${$gviwswjtq})){};}}}
?>