<?php /*
///-build_id: 2014101516.3953
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/store/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2012 Addons-Modules.com
///
*/
${"G\x4c\x4fB\x41L\x53"}["xr\x65t\x75\x6bp\x76c\x65y"]="\x66in\x61\x6c";${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6c\x75\x6bfb\x62\x6bv\x63\x77z"]="\x71\x75e\x72y\x5f\x72e\x71\x75\x6ct\x73";${"\x47\x4c\x4f\x42\x41\x4cS"}["\x7ax\x67p\x66\x68\x61\x6an\x72\x70"]="v\x61\x6c";${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6ct\x70\x65\x6blyc\x66\x74"]="\x61\x76\x65r\x61\x67\x65s\x74a\x72\x73";${"G\x4c\x4f\x42\x41\x4c\x53"}["y\x70\x6a\x6b\x78h\x6c\x74u"]="\x6b\x65y";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6b\x6d\x67\x65\x70\x68\x70\x6e\x71\x70"]="a\x76\x65ra\x67e\x73";${"GLOB\x41\x4cS"}["\x65\x79r\x63\x74\x66\x69\x74\x6ce\x6e"]="\x61\x76er\x61\x67\x65T\x6ft\x61\x6c";${"G\x4cO\x42\x41\x4c\x53"}["\x71\x6f\x6e\x72\x7av\x72\x6a"]="\x61\x67\x69l\x65\x5f\x72\x61\x74\x69\x6e\x67\x73";${"G\x4cO\x42\x41L\x53"}["\x69\x6d\x77\x76\x72\x76k"]="\x70si\x7a\x65";${"\x47\x4c\x4fB\x41\x4c\x53"}["\x64\x70\x77\x6f\x70v\x76xc"]="p\x6e\x6f";${"G\x4c\x4f\x42\x41\x4cS"}["\x77f\x74\x6cg\x6c\x6c\x77\x77v"]="i\x64_\x74\x79pe";${"\x47\x4c\x4f\x42A\x4c\x53"}["\x76\x70\x6ehn\x78c\x70\x6b\x6d"]="\x61g\x69\x6c\x65\x5frati\x6eg\x73_\x6e\x62";${"\x47LOB\x41L\x53"}["\x73\x79meq\x77l"]="a\x67\x69\x6c\x65\x72\x61\x74i\x6e\x67";${"\x47\x4cO\x42\x41\x4c\x53"}["q\x70\x7ar\x76k\x68e\x78\x7a\x70\x78"]="grad\x65";${"\x47L\x4f\x42AL\x53"}["\x68\x6a\x72xu\x73\x72"]="\x74\x6fta\x6c";${"\x47L\x4f\x42\x41L\x53"}["\x75k\x69\x70\x6b\x61i\x79\x67"]="\x63\x69d";${"GL\x4f\x42\x41\x4cS"}["\x77t\x6c\x75\x68\x71\x69\x6b"]="\x6c\x61\x6e\x67\x75\x61\x67e\x73";${"\x47\x4c\x4fB\x41L\x53"}["\x74\x63\x67\x75\x69\x6e\x68c\x6c\x68\x77"]="\x6e\x61me\x73";${"\x47\x4cO\x42\x41\x4c\x53"}["\x73\x63c\x66\x73\x67\x77p\x6b\x6c"]="sel\x6c\x65\x72";${"\x47L\x4f\x42\x41\x4cS"}["\x66\x64d\x7a\x77p\x63\x76\x78\x69\x75c"]="te\x6eth";${"GL\x4f\x42\x41\x4c\x53"}["\x63\x6c\x6f\x76dp\x6f\x6f\x74"]="st\x61r\x73";${"G\x4c\x4f\x42\x41LS"}["\x77ud\x6f\x66\x75\x67\x6crmh"]="\x72\x61t\x69n\x67";${"\x47\x4cOBALS"}["\x7a\x6e\x72\x6dh\x6a\x69"]="\x69d\x78";${"\x47L\x4fBA\x4cS"}["\x6c\x6d\x6e\x6e\x76\x65\x74"]="\x74e\x72ge\x74\x5f\x75r\x6c";${"\x47L\x4f\x42\x41\x4cS"}["\x75j\x7af\x6b\x73y\x6b\x6bw"]="l\x69n\x6b2\x73\x65\x6cl\x65\x72pa\x67\x65";${"\x47LO\x42\x41LS"}["j\x74\x79\x69\x72\x64x\x6c"]="\x61\x76\x65\x72\x61\x67\x65_r\x61\x74i\x6eg_t\x61\x72g\x65\x74";${"G\x4c\x4f\x42ALS"}["\x61kb\x69\x65\x71v"]="t\x61rg\x65t\x5f\x74\x79\x70\x65";${"GLO\x42A\x4c\x53"}["w\x6d\x76\x6a\x62\x6a\x72n\x63r\x71"]="\x69\x64_t\x61\x72g\x65\x74";${"\x47\x4cOBA\x4c\x53"}["\x76\x77h\x75\x63\x76"]="\x6f\x69\x64";${"G\x4cO\x42ALS"}["\x75\x73n\x64g\x67zoc"]="p\x61\x72\x61\x6d\x73";${"G\x4c\x4f\x42AL\x53"}["\x77s\x79\x6c\x6bf\x64\x66\x62"]="\x6e\x62E\x72\x72\x6fr\x73";${"\x47L\x4f\x42A\x4cS"}["\x75\x6c\x70\x79xh\x75"]="exi\x73\x74i\x6eg";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x66\x6f\x68cx\x6c\x72n\x6e"]="n\x61me";${"\x47LO\x42ALS"}["\x6b\x62\x78ais\x63\x78\x62\x6c\x6f\x75"]="\x69d\x5fa\x67i\x6c\x65\x5frat\x69ng_c\x72\x69t\x65\x72\x69\x6f\x6e";${"\x47L\x4f\x42\x41L\x53"}["\x6b\x64h\x76c\x6c"]="a\x63\x74i\x6f\x6e_c\x72i\x74\x65\x72\x69\x6fn";${"\x47\x4cO\x42A\x4c\x53"}["\x6d\x6a\x61\x72\x67rftx\x68"]="\x6ca\x6eg";${"\x47\x4c\x4f\x42A\x4c\x53"}["\x71\x70\x6c\x71\x75\x70\x61\x76"]="\x68\x65\x6c\x70\x65\x72";${"G\x4cOBA\x4c\x53"}["\x76\x75q\x75\x62\x68\x64g\x76\x71"]="f\x69\x65l\x64s_\x66\x6frm";${"GLOB\x41L\x53"}["\x7a\x63\x61\x66oe"]="c\x72\x69\x74\x65\x72io\x6e_\x6ci\x73t";${"\x47\x4c\x4fB\x41\x4c\x53"}["\x69\x70\x69\x67\x73\x66"]="\x63r\x69\x74\x65\x72\x69\x6fn";${"\x47LOBALS"}["\x6ct\x71y\x61\x6d"]="\x63r\x69\x74\x65r\x69\x6f\x6es";${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6a\x76q\x6d\x75\x77\x6a\x71d"]="\x68e\x61\x6cth\x5f\x63h\x65\x63k";${"\x47\x4cOB\x41\x4c\x53"}["\x79\x62q\x6a\x64bh\x6a"]="r\x65t\x65\x72rs";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x70ii\x6e\x69\x62h\x6d\x6f"]="re\x73u\x6c\x74";${"\x47\x4c\x4f\x42\x41LS"}["s\x61\x69\x70\x78l\x67\x70zq"]="\x61\x64\x6di\x6e\x66\x6f\x6cder";${"\x47\x4c\x4f\x42AL\x53"}["\x64\x64\x73\x6cuemd\x76\x72\x77"]="_n\x65wfi\x6ces";if(!class_exists("\x41\x67\x69le\x49\x6es\x74\x61ll\x65\x72")){include_once(_PS_ROOT_DIR_."/mo\x64u\x6c\x65s/\x61gil\x65s\x65\x6cl\x65rra\x74ing\x73/\x69\x6e\x73\x74all/".(_PS_VERSION_>"\x31\x2e\x36"?"\x31\x2e\x36\x78":"\x31.\x35\x78")."/\x63\x6c\x61\x73ses/\x41g\x69l\x65Instal\x6ce\x72\x2e\x70\x68p");eval("\x63l\x61\x73\x73\x20A\x67i\x6ceInstal\x6cer\x20\x65\x78\x74\x65\x6e\x64s \x41\x67\x69l\x65I\x6est\x61ll\x65r\x43\x6f\x72\x65 {}");}class AgileSellerRatings extends Module{const INSTALL_SQL_FILE="ins\x74\x61l\x6c.s\x71\x6c";const RATING_TYPE_SELLER=1;const RATING_TYPE_MANUFACTURER=2;const RATING_TYPE_SUPPLIER=3;public static$_newfiles=array('classes/AgileInstaller.php'=>array('1.6x'=>'classes/AgileInstaller.php','1.5x'=>'classes/AgileInstaller.php'),'classes/AgileHelper.php'=>array('1.6x'=>'classes/AgileHelper.php','1.5x'=>'classes/AgileHelper.php'),'classes/AgileSellerManager.php'=>array('1.6x'=>'classes/AgileSellerManager.php','1.5x'=>'classes/AgileSellerManager.php'),'classes/controller/AgileModuleFrontController.php'=>array('1.6x'=>'classes/controller/AgileModuleFrontController.php','1.5x'=>'classes/controller/AgileModuleFrontController.php'));private$version_dependencies=array();private$_html='';const DELAY=1;function __construct(){$this->name="a\x67\x69le\x73e\x6cl\x65rr\x61ting\x73";$this->tab="\x41d\x6d\x69\x6e\x69\x73\x74\x72a\x74\x69on";$this->bootstrap=true;parent::__construct();$this->author="\x61\x64d\x6fns-\x6do\x64u\x6c\x65\x73\x2ec\x6fm";$this->version="2\x2e\x30.\x30.3";$this->dependencies=array("ag\x69le\x6d\x75ltip\x6ce\x73\x65\x6c\x6cer");$this->ps_versions_compliancy=array("min"=>"1.\x36","\x6d\x61\x78"=>_PS_VERSION_);$this->version_dependencies=array("\x61gil\x65\x6d\x75lt\x69\x70l\x65se\x6cl\x65r"=>"3\x2e\x30");$this->displayName=$this->l('Agile Seller Ratings');$this->description=$this->l('Allows users to rate and give feedback on sellers');}function install(){if(!defined("_IS\x5fA\x47I\x4c\x45\x5fDE\x56\x5f")&&!empty(self::${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["dd\x73l\x75\x65\x6d\x64\x76\x72w"]})&&!Tools::getValue("\x72e\x64\x69r\x65\x63te\x64")){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["nft\x76\x63\x79o"]="\x61\x64\x6d\x69\x6efolde\x72";${${"\x47L\x4f\x42\x41L\x53"}["s\x61i\x70\x78\x6c\x67\x70\x7a\x71"]}=AgileInstaller::detect_admin_folder($_SERVER["\x53C\x52I\x50T_\x46IL\x45NAM\x45"]);${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6f\x6f\x67ewi\x6b\x77\x6f\x72\x66"]="\x72\x65su\x6ct";$gdcdmcqrn="\x5f\x6e\x65\x77\x66il\x65s";$xxmbeoj="a\x64\x6d\x69n\x66\x6fl\x64\x65\x72";AgileInstaller::install_newfiles(self::${$gdcdmcqrn},$this->name,${$xxmbeoj},2);${${"\x47\x4c\x4fB\x41L\x53"}["\x6f\x6fg\x65w\x69\x6b\x77\x6f\x72\x66"]}=AgileInstaller::install_health_check(self::${${"\x47\x4cO\x42\x41\x4c\x53"}["\x64\x64\x73l\x75e\x6d\x64vrw"]},$this->name,${${"\x47LOBA\x4c\x53"}["n\x66\x74vc\x79\x6f"]});if(!empty(${${"GLO\x42\x41\x4c\x53"}["\x70\x69\x69\x6ei\x62\x68\x6d\x6f"]})){$this->_errors[]="<\x61\x20\x74\x61\x72g\x65t\x3d\x22a\x67\x69\x6c\x65\"\x20\x73\x74yl\x65=\"\x74\x65xt-\x64\x65\x63o\x72\x61t\x69on:\x75n\x64er\x6c\x69\x6ee\x3bcol\x6f\x72:b\x6cue;\x22\x20\x68\x72ef=\"h\x74\x74p://a\x64d\x6f\x6es-modul\x65s\x2eco\x6d/sto\x72e/\x65n/conte\x6e\x74/3\x36-\x61\x67\x69\x6ce-mo\x64\x75le-\x69\x6es\x74a\x6c\x6c\x61t\x69\x6f\x6e-\x74\x69ps\">".$this->l('Failed to update files due to permission issue, please visit here for more instructions.')."\x3c/a\x3e";return false;}Tools::redirectAdmin("\x2e/i\x6ed\x65x\x2e\x70h\x70?cont\x72oller\x3d\x41dm\x69\x6eM\x6fd\x75\x6ce\x73\x26t\x6fk\x65n=".Tools::getValue("t\x6f\x6be\x6e")."\x26i\x6estall=".$this->name."&\x74a\x62\x5fm\x6f\x64\x75\x6c\x65\x3d".$this->tab." &m\x6f\x64\x75\x6ce\x5f\x6eame\x3d".$this->name."&\x61n\x63h\x6fr\x3d\x61nchor".$this->name."\x26\x72\x65di\x72e\x63\x74e\x64\x3d\x31");}${${"\x47L\x4fB\x41\x4cS"}["\x79bqj\x64\x62\x68\x6a"]}=AgileInstaller::version_depencies($this->version_dependencies);if(!empty(${${"GL\x4f\x42A\x4c\x53"}["yb\x71\x6adb\x68\x6a"]})){$cnsdpiyripho="\x72ete\x72\x72\x73";$this->_errors=array_merge($this->_errors,${$cnsdpiyripho});return false;}if(!AgileInstaller::sql_install(dirname(__FILE__)."/".self::INSTALL_SQL_FILE))return false;AgileInstaller::add_field_ifnotexists("agil\x65_\x72a\x74i\x6eg","\x72e\x73p\x6fn\x73e","t\x65x\x74","\x4eULL");AgileInstaller::add_field_ifnotexists("ag\x69\x6ce\x5fra\x74in\x67","\x64\x61te_upd","\x64a\x74etime","");if(parent::install()==false OR$this->registerHook("d\x69\x73pla\x79Cu\x73\x74o\x6der\x41c\x63\x6f\x75\x6e\x74")==false OR$this->registerHook("d\x69sp\x6ca\x79\x4d\x79Acc\x6fun\x74B\x6c\x6fck")==false OR$this->registerHook("d\x69spl\x61y\x52i\x67\x68t\x43olum\x6eProd\x75\x63t")==false)return(false);$this->initCriterions();if(version_compare(_PS_VERSION_,"1.\x35",">\x3d"))Autoload::getInstance()->generateIndex();return(true);}public function getContent(){$tbpwgbxin="\x68\x65\x61\x6c\x74\x68\x5f\x63hec\x6b";$esjshvtveps="\x5f\x6e\x65w\x66\x69\x6ce\x73";global$cookie;$wexyyjilvdj="\x63\x72\x69t\x65\x72i\x6f\x6e\x73";$vfnrgfy="\x68e\x61\x6c\x74\x68\x5fch\x65\x63\x6b";$this->_html="<h\x32>".$this->displayName."\x3c/\x682>";${${"GLO\x42\x41\x4cS"}["sai\x70\x78lgp\x7a\x71"]}=AgileInstaller::detect_admin_folder($_SERVER["\x53\x43\x52IP\x54\x5fF\x49\x4c\x45NA\x4d\x45"]);$sjdcxjy="c\x72\x69\x74\x65ri\x6fn_\x6c\x69st";${$vfnrgfy}=AgileInstaller::install_health_check(self::${$esjshvtveps},$this->name,${${"G\x4c\x4fB\x41\x4cS"}["\x73\x61\x69pxl\x67\x70\x7aq"]});if(!empty(${$tbpwgbxin}))$this->_html.=${${"\x47\x4c\x4fBA\x4c\x53"}["\x6a\x76qm\x75\x77\x6aq\x64"]};$this->_checkCriterion();$this->_html.=AgileInstaller::show_agile_links();require_once(dirname(__FILE__)."/\x41gi\x6ceRa\x74ingCri\x74\x65\x72\x69\x6fn.p\x68p");${${"\x47\x4c\x4f\x42\x41L\x53"}["\x6ctqy\x61\x6d"]}=AgileRatingCriterion::getList($cookie->id_lang);${"\x47LO\x42\x41\x4c\x53"}["q\x64\x72\x65is\x63\x69r\x6fy"]="\x63\x72\x69\x74\x65\x72i\x6f\x6e\x5f\x6ci\x73\x74";${$sjdcxjy}=array();foreach(${$wexyyjilvdj} AS${${"GLOB\x41\x4cS"}["\x69\x70\x69\x67s\x66"]}){array_push(${${"G\x4c\x4f\x42AL\x53"}["\x7ac\x61\x66\x6fe"]},array("i\x64"=>${${"G\x4c\x4f\x42\x41L\x53"}["\x69\x70i\x67s\x66"]}["i\x64_\x61gile\x5fr\x61t\x69n\x67_cri\x74\x65r\x69\x6f\x6e"],"\x6e\x61me"=>htmlspecialchars(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x69pi\x67\x73\x66"]}["na\x6d\x65"],ENT_COMPAT,"U\x54F-\x38")));}${${"\x47\x4c\x4f\x42A\x4cS"}["v\x75\x71\x75\x62h\x64\x67\x76q"]}=array("fo\x72m"=>array("le\x67\x65nd"=>array("\x74\x69\x74\x6c\x65"=>$this->l('Review\'s criterions'),"\x69\x6d\x61g\x65"=>$this->_path."l\x6f\x67o.gif",),"d\x65s\x63r\x69\x70t\x69\x6fn"=>$this->l('If seller has private categories, you show seller rating on seller private category page. See install.txt for instructions'),"\x69\x6eput"=>array(array("ty\x70\x65"=>"\x70\x6cacehold\x65r","\x6ca\x62\x65l"=>$this->l('Review\'s criterion'),"\x6ea\x6de"=>"divCr\x69\x74\x65\x72\x69\x6f\x6e\x46o\x72\x6d","f\x6fr\x6d_g\x72\x6f\x75p_cla\x73s"=>"r\x65\x76ie\x77criteri\x6f\x6e","s\x75\x62\x6dit\x5fl\x61\x62el"=>$this->l('Save'),"\x73\x75bm\x69\x74_n\x61m\x65"=>"s\x75bmi\x74\x43\x72i\x74eri\x6fn",),array("t\x79pe"=>"hidd\x65n","\x6ea\x6de"=>"id_\x61gil\x65\x5frati\x6eg_c\x72\x69\x74\x65r\x69o\x6e",),array("\x74\x79\x70\x65"=>"h\x69\x64\x64e\x6e","name"=>"crit\x65rion\x5f\x6e\x61me",),array("\x74\x79\x70\x65"=>"hidden","\x6eam\x65"=>"\x63r\x69t\x65\x72\x69on_\x69\x64_lang",),array("t\x79\x70e"=>"hi\x64\x64e\x6e","\x6e\x61\x6de"=>"cri\x74eri\x6f\x6e\x5f\x61c\x74i\x6f\x6e",),array("\x74yp\x65"=>"c\x72i\x74er\x69o\x6es","\x6c\x61bel"=>$this->l('Review\'s criterions'),"\x6e\x61\x6de"=>"\x63\x72i\x74\x65\x72\x69\x6f\x6es","\x76\x61lue\x73"=>${${"G\x4c\x4f\x42A\x4c\x53"}["\x71\x64\x72ei\x73c\x69\x72\x6f\x79"]},"\x64\x65l\x65t\x65_w\x61r\x6e\x69\x6eg_msg"=>$this->l('When deleting criterion, all related data will be deleted.  Do you want to proceed?'),"\x74\x69\x74l\x65_\x61c\x74\x69ons"=>$this->l('Actions'),"ti\x74\x6c\x65\x5fCri\x74e\x72\x69on"=>$this->l('Criterion'),"\x65\x64\x69t_acti\x6f\x6e"=>$this->l('Edit'),"de\x6c\x65\x74e\x5fa\x63ti\x6fn"=>$this->l('Delete'),),),));${${"\x47\x4cOB\x41L\x53"}["qp\x6cqup\x61\x76"]}=new HelperForm();$helper->show_toolbar=false;$helper->table="\x63\x72i\x74er\x69\x6fn";${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["mjarg\x72\x66\x74\x78\x68"]}=new Language((int)Configuration::get("\x50S\x5fL\x41\x4e\x47_DEFA\x55\x4c\x54"));$helper->default_form_language=$lang->id;$helper->module=$this;$helper->allow_employee_form_lang=Configuration::get("PS_BO_A\x4cLO\x57\x5fEMPLOY\x45E\x5f\x46\x4f\x52M\x5f\x4cANG")?Configuration::get("P\x53\x5f\x42O_A\x4c\x4c\x4f\x57_\x45\x4d\x50\x4cOY\x45\x45_F\x4f\x52\x4d_L\x41NG"):0;$helper->identifier="\x70\x65\x72\x6diss\x69on_set\x74i\x6e\x67";$helper->currentIndex=$this->context->link->getAdminLink("\x41d\x6d\x69n\x4do\x64\x75\x6ce\x73",false)."\x26c\x6fnf\x69g\x75re=".$this->name."\x26\x74a\x62_\x6do\x64ule\x3d".$this->tab."\x26\x6d\x6fd\x75\x6c\x65_\x6ea\x6de\x3d".$this->name;$helper->token=Tools::getAdminTokenLite("Ad\x6d\x69\x6e\x4d\x6f\x64\x75\x6c\x65s");$helper->tpl_vars=array("f\x69\x65l\x64s\x5fv\x61\x6c\x75\x65"=>array("\x69\x64\x5f\x61g\x69\x6ce\x5f\x72\x61\x74in\x67_c\x72i\x74erion"=>"","\x63r\x69teri\x6f\x6e_\x6e\x61m\x65"=>"","\x63\x72\x69te\x72ion_id\x5f\x6c\x61n\x67"=>intval($cookie->id_lang),"\x63\x72i\x74e\x72i\x6f\x6e\x5f\x61ct\x69\x6fn"=>""),"l\x61ngu\x61ge\x73"=>$this->context->controller->getLanguages(),"id_l\x61\x6egu\x61\x67e"=>$this->context->language->id);$this->_html.=$helper->generateForm(array(${${"\x47LOBA\x4c\x53"}["vuq\x75\x62\x68\x64\x67\x76\x71"]}));$this->_html.="\n\x20    \x20   \x20  \x3cs\x63\x72ipt\x20 type=\x22\x74\x65\x78\x74/j\x61va\x73\x63ri\x70\x74\"\x20\x3e\n \x20 \x20\x20 \x20  \x20\x20\x20\x20  \x20the\x50ath = \"".$this->_path."\x22;\n\x20\x20 \x20\x20 \x20  \x20 \x20</s\x63\x72i\x70\x74\x3e\n  \x20 \x20 \x20    \x20\x3c\x73c\x72i\x70\x74\x20t\x79pe=\"\x74e\x78\x74/\x6aav\x61\x73cr\x69\x70t\x22 s\x72\x63=\"".$this->_path."j\x73/c\x72\x69t\x65r\x69o\x6e_e\x64it.\x6as\x22\x3e\x3c/s\x63ript\x3e\n\t\t\t";return$this->_html;}private function _checkCriterion(){require_once(dirname(__FILE__)."/A\x67\x69leRa\x74ing\x43r\x69te\x72io\x6e.php");${"\x47\x4c\x4fB\x41\x4cS"}["\x71\x72\x78w\x77\x71\x6d\x6a\x65"]="a\x63\x74\x69\x6f\x6e_\x63\x72i\x74\x65ri\x6f\x6e";${${"\x47L\x4f\x42A\x4c\x53"}["\x71\x72\x78w\x77\x71\x6d\x6ae"]}=Tools::getValue("c\x72iterion_\x61c\x74i\x6f\x6e");if(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["k\x64\x68\x76\x63l"]}=="\x64\x65let\x65"){$nuvmlghiyv="\x69d\x5f\x61\x67\x69\x6c\x65_rati\x6eg\x5f\x63\x72\x69\x74\x65r\x69\x6f\x6e";${$nuvmlghiyv}=Tools::getValue("i\x64\x5f\x61\x67ile_\x72\x61tin\x67_\x63\x72\x69\x74e\x72ion");AgileRatingCriterion::deleteCriterion(${${"G\x4c\x4fBALS"}["kb\x78\x61\x69s\x63\x78b\x6cou"]});}if(Tools::isSubmit("\x73\x75bmi\x74C\x72i\x74\x65\x72\x69\x6f\x6e")){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6b\x71o\x67\x67f\x69p\x77"]="\x6c\x61ng";${"\x47L\x4fBAL\x53"}["\x65\x65\x71e\x66\x75\x6c\x74\x67t"]="\x6c\x61\x6e\x67\x75\x61g\x65\x73";$gfqfikydjm="\x6c\x61n\x67ua\x67e\x73";global$cookie;${"G\x4c\x4f\x42\x41\x4c\x53"}["v\x69\x69\x72\x64d\x75d\x6f\x6fh"]="\x69\x64_\x63\x72\x69\x74e\x72\x69\x6fn";${${"G\x4c\x4f\x42\x41\x4cS"}["\x76\x69\x69r\x64d\x75\x64\x6f\x6f\x68"]}=intval(Tools::getValue("\x63\x72i\x74er\x69\x6f\x6e_id"));${"\x47\x4c\x4f\x42A\x4cS"}["\x75\x6d\x70b\x61\x77\x6c\x74"]="id\x5fc\x72\x69\x74\x65\x72\x69\x6fn";${${"GLO\x42\x41L\x53"}["\x69p\x69gs\x66"]}=new AgileRatingCriterion(${${"\x47L\x4fB\x41\x4c\x53"}["um\x70bawl\x74"]});${${"\x47\x4c\x4fB\x41LS"}["\x65eq\x65fu\x6ct\x67\x74"]}=Language::getLanguages(true);foreach(${$gfqfikydjm} AS${${"G\x4c\x4f\x42AL\x53"}["k\x71o\x67gf\x69\x70\x77"]}){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["d\x73\x63lf\x64c"]="l\x61\x6e\x67";$shnshw="n\x61m\x65";${"\x47\x4cO\x42A\x4cS"}["\x75\x72\x6ej\x6fkqru\x6c\x6ch"]="\x69\x64_\x63\x72i\x74eri\x6f\x6e";$wndxpmvfnp="\x6ca\x6e\x67";${${"\x47LOBA\x4cS"}["\x66\x6f\x68\x63xlrn\x6e"]}=Tools::getValue("c\x72i\x74\x65\x72ion_".${$wndxpmvfnp}["\x69\x64\x5fl\x61n\x67"]);${"\x47\x4c\x4f\x42\x41L\x53"}["htg\x62\x6a\x6a\x74u\x68"]="\x65x\x69sti\x6e\x67";if(trim(${$shnshw})==""){$this->_errors[]=$this->l('Criterion name is required for all languages');break;}${${"GLO\x42\x41\x4c\x53"}["h\x74\x67\x62jj\x74\x75\x68"]}=new AgileRatingCriterion();$existing->getByName(${${"\x47\x4cOBAL\x53"}["\x66\x6fhc\x78\x6cr\x6en"]},${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6d\x6aarg\x72\x66t\x78\x68"]}["\x69\x64\x5fl\x61\x6e\x67"]);if(Validate::isLoadedObject(${${"\x47\x4cO\x42\x41\x4cS"}["\x75\x6c\x70y\x78\x68\x75"]})AND$existing->id!=${${"\x47\x4cOBA\x4c\x53"}["ur\x6e\x6aok\x71r\x75l\x6ch"]}){$this->_errors[]=$this->l('Same criterion exists')." [".${${"GL\x4f\x42\x41LS"}["\x66o\x68\x63\x78lrn\x6e"]}."]";break;}$criterion->{"n\x61me"}[${${"G\x4c\x4fBAL\x53"}["\x64s\x63\x6cf\x64\x63"]}["i\x64_\x6ca\x6e\x67"]]=Tools::getValue("\x63\x72\x69te\x72i\x6fn\x5f".${${"GL\x4fBAL\x53"}["\x6d\x6aa\x72\x67r\x66tx\x68"]}["\x69\x64\x5fla\x6eg"]);}if(empty($this->_errors)){$criterion->save();$this->_html.=$this->displayConfirmation($this->l('Settings updated'));}else$this->displayErrors();}}public function displayErrors(){${"\x47\x4c\x4fBA\x4c\x53"}["\x76\x66\x72\x6d\x72s\x74r\x77"]="\x6e\x62\x45r\x72\x6f\x72s";$wamlcnre="e\x72\x72\x6f\x72";${${"\x47L\x4f\x42\x41\x4c\x53"}["w\x73y\x6ck\x66\x64\x66b"]}=sizeof($this->_errors);${"G\x4c\x4f\x42A\x4c\x53"}["s\x62\x71g\x6bh\x77\x67\x6fa\x76"]="\x65r\x72o\x72";$this->_html.="\n\t\t\x3c\x64\x69\x76\x20c\x6cas\x73\x3d\"a\x6ce\x72t \x65r\x72o\x72\"\x3e\n\t\t\t\x3c\x68\x33>".(${${"\x47\x4cO\x42ALS"}["\x77\x73\x79\x6ck\x66\x64\x66b"]}>1?$this->l('There are'):$this->l('There is'))."\x20".${${"\x47\x4cOBAL\x53"}["\x76\x66\x72mr\x73\x74r\x77"]}."\x20".(${${"\x47LO\x42\x41\x4cS"}["\x77sy\x6ck\x66\x64\x66\x62"]}>1?$this->l('errors'):$this->l('error'))."\x3c/\x68\x33>\n\t\t\t\x3col>";foreach($this->_errors AS${$wamlcnre})$this->_html.="\n\t\t\t\t<\x6c\x69>".${${"\x47\x4c\x4fB\x41\x4c\x53"}["s\x62\x71\x67\x6b\x68\x77\x67\x6f\x61\x76"]}."</li\x3e";$this->_html.="\n\t\t\t</\x6f\x6c\x3e\n\t\t\x3c/div>";}public function hookDisplayMyAccountBlock($params){return$this->hookDisplayCustomerAccount(${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x75\x73nd\x67gz\x6f\x63"]});}public function hookDisplayCustomerAccount($params){global$smarty,$cookie;if(!$this->active)return;require_once(dirname(__FILE__)."/\x41\x67\x69\x6ce\x52a\x74\x69\x6eg.p\x68\x70");$smarty->assign(array("nb_f\x65e\x64ba\x63\x6b\x5f\x77\x61\x69\x74\x69\x6eg"=>AgileRating::getFeedbackWaitingCount($cookie->id_customer),"\x66\x65e\x64\x62\x61c\x6bwa\x69\x74\x6ci\x73t_u\x72l"=>self::get_waitlist_url()));return$this->display(__FILE__,"\x68\x6f\x6fkmy\x61c\x63o\x75\x6et\x2e\x74\x70\x6c");}public function hookDisplayRightColumnProduct($params){$oqdswuwdggv="\x69d\x5f\x70\x72\x6f\x64\x75\x63\x74";${"G\x4cO\x42\x41L\x53"}["\x74\x74es\x74\x72\x74"]="i\x64_\x70\x72o\x64u\x63\x74";${"\x47\x4c\x4f\x42A\x4cS"}["s\x71\x67\x6d\x78\x69m\x79\x6dw"]="\x73q\x6c";global$smarty,$cookie;if(!$this->active)return;$bdxpimz="\x73\x71l";require_once(dirname(__FILE__)."/\x41g\x69l\x65R\x61ting\x2ephp");${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x74t\x65\x73t\x72\x74"]}=Tools::getValue("id_p\x72\x6fdu\x63t");${${"G\x4c\x4fBAL\x53"}["\x73\x71\x67\x6d\x78\x69\x6d\x79mw"]}="SE\x4c\x45\x43T \x69\x64_\x6fwne\x72\x20\x46\x52\x4fM `"._DB_PREFIX_."pr\x6f\x64\x75\x63\x74_o\x77ner\x60 WH\x45\x52\x45\x20\x69d_\x70\x72oduc\x74=".${$oqdswuwdggv};${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x76whu\x63\x76"]}=Db::getInstance()->getRow(${$bdxpimz});${"\x47\x4c\x4f\x42\x41L\x53"}["mp\x67\x6c\x74\x76\x71\x70r\x6c"]="\x69d\x5f\x74\x61rg\x65\x74";${${"\x47LO\x42A\x4c\x53"}["\x77\x6dvjbjr\x6ecr\x71"]}=isset(${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x76\x77hu\x63v"]}["id\x5fo\x77ne\x72"])?intval(${${"GL\x4f\x42AL\x53"}["\x76wh\x75\x63\x76"]}["\x69d_\x6f\x77ner"]):0;return$this->getAverageRating(${${"\x47\x4c\x4f\x42\x41L\x53"}["\x6dpg\x6c\x74\x76q\x70rl"]},self::RATING_TYPE_SELLER);}public static function getAverageRating4Category($id_category){$ikmejxreecs="\x6do\x64\x75\x6c\x65";$eoipjujrs="i\x64\x5f\x63\x61\x74e\x67\x6f\x72\x79";${"G\x4cO\x42\x41\x4cS"}["mx\x6d\x78\x70\x71\x6d"]="\x69\x64\x5f\x63\x61\x74\x65\x67\x6f\x72\x79";if(intval(${$eoipjujrs})<=0)return"";$mnqlsgkccdh="id\x5f\x6f\x77\x6ee\x72";$xgxxxfjdikj="id\x5fo\x77n\x65r";${$xgxxxfjdikj}=AgileSellerManager::getObjectOwnerID("c\x61\x74eg\x6f\x72y",${${"GLOB\x41L\x53"}["m\x78\x6dx\x70\x71m"]});${"\x47\x4c\x4f\x42A\x4c\x53"}["e\x75\x62\x6b\x63\x6a\x63\x79\x6e"]="\x69\x64\x5f\x6f\x77\x6eer";if(intval(${$mnqlsgkccdh})<=0)return"";${$ikmejxreecs}=new AgileSellerRatings();return$module->getAverageRating(${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x65\x75b\x6b\x63\x6acyn"]},self::RATING_TYPE_SELLER);}public function getAverageRating($id_target,$target_type){global$smarty;if(!$this->active)return;if(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x77\x6d\x76\x6ab\x6ar\x6ec\x72\x71"]}<=0)return;$smarty->assign($this->getAverageRatingData(${${"GLO\x42A\x4c\x53"}["\x77m\x76\x6a\x62jrn\x63\x72\x71"]},${${"\x47\x4c\x4f\x42A\x4cS"}["\x61\x6bb\x69e\x71\x76"]}));return($this->display(__FILE__,"/\x68oo\x6b\x61\x76er\x61\x67\x65\x2et\x70l"));}public function getAverageRating4List($id_target,$target_type){global$smarty;if(!$this->active)return;if(${${"\x47\x4c\x4fB\x41\x4c\x53"}["w\x6d\x76j\x62\x6a\x72\x6e\x63\x72q"]}<=0)return;$ocnvngesxhd="t\x61\x72g\x65t\x5f\x74ype";$smarty->assign($this->getAverageRatingData(${${"\x47\x4c\x4fB\x41LS"}["\x77m\x76jbj\x72\x6e\x63\x72\x71"]},${$ocnvngesxhd}));return($this->display(__FILE__,"/\x68\x6fo\x6b\x61\x76\x65r\x61ge_\x6ci\x73t.\x74\x70l"));}public function getAverageRatingData($id_target,$target_type){${"\x47\x4c\x4f\x42\x41L\x53"}["\x76\x73c\x6cyw\x61u\x68\x79\x6b"]="\x69\x64\x5f\x74a\x72\x67e\x74";${"\x47LO\x42A\x4c\x53"}["\x79\x6d\x75\x70ga\x70\x65"]="\x69\x64\x5f\x74\x61\x72\x67et";${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6c\x66\x64g\x75\x6d"]="\x6c\x69\x6e\x6b\x32\x73\x65\x6c\x6c\x65r\x70\x61g\x65";${"\x47\x4cO\x42\x41\x4cS"}["q\x72b\x67\x77\x68\x66\x67"]="\x74a\x72\x67e\x74\x5ft\x79\x70e";${"\x47\x4c\x4f\x42\x41L\x53"}["\x6c\x68\x73\x78\x63g"]="\x61\x76\x65\x72\x61\x67\x65\x5fr\x61t\x69\x6e\x67\x5f\x74\x61\x72\x67\x65\x74";$crqwljbwy="\x69d\x5f\x74a\x72ge\x74";$crospeyhy="\x6c\x69\x6e\x6b";$obroaesm="\x74\x61\x72g\x65t\x5f\x74\x79\x70\x65";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["v\x79x\x6dis\x79"]="i\x64\x5ft\x61\x72\x67e\x74";global$smarty,$cookie;${$crospeyhy}=new Link();$mdkxfwiwwrq="bn_r\x61\x74\x69n\x67_t\x61\x72\x67e\x74";require_once(dirname(__FILE__)."/\x41g\x69le\x52\x61\x74\x69ng.php");${${"G\x4c\x4f\x42AL\x53"}["j\x74y\x69\x72\x64\x78l"]}=AgileRating::getAverage(${${"\x47\x4cO\x42\x41\x4c\x53"}["v\x79\x78\x6d\x69\x73y"]},${$obroaesm});${$mdkxfwiwwrq}=AgileRating::getCount(${${"\x47L\x4f\x42\x41\x4c\x53"}["w\x6dvj\x62\x6a\x72n\x63r\x71"]},${${"\x47\x4c\x4f\x42AL\x53"}["qrb\x67w\x68\x66\x67"]});${${"\x47\x4cO\x42\x41\x4c\x53"}["\x75jz\x66\x6bs\x79\x6bk\x77"]}="";$cffnugulpq="\x74\x61rg\x65\x74_\x74\x79p\x65";if(Module::isInstalled("\x61\x67i\x6ces\x65\x6c\x6cer\x70\x72o\x64uct\x73")OR Module::isInstalled("\x61gilem\x75\x6cti\x70\x6c\x65s\x68op")){$mtsrtptim="\x69\x64\x5ftar\x67et";${"\x47\x4c\x4fBA\x4cS"}["x\x62to\x64\x73\x62"]="\x6c\x69n\x6b2\x73e\x6c\x6c\x65rpag\x65";${${"\x47L\x4f\x42AL\x53"}["\x78\x62\x74\x6fds\x62"]}=$link->getAgileSellerLink(${$mtsrtptim});}${"\x47\x4cO\x42\x41\x4c\x53"}["\x63\x79\x6bpp\x6c\x71\x65\x79"]="bn\x5f\x72\x61\x74\x69\x6e\x67\x5f\x74\x61\x72\x67\x65t";${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6c\x6d\x6enve\x74"]}=Tools::getShopDomainSsl(true,true).__PS_BASE_URI__."modules/agi\x6c\x65\x73e\x6clerrati\x6egs/\x72at\x69\x6eg\x6ci\x73t\x2ep\x68p?\x69\x64\x5f\x74ype\x3d\x31&id\x5ft\x61\x72\x67et=".${${"GLO\x42ALS"}["\x76s\x63l\x79\x77a\x75h\x79\x6b"]};if(version_compare(_PS_VERSION_,"\x31.\x35","\x3e\x3d"))${${"G\x4c\x4f\x42ALS"}["\x6c\x6dn\x6e\x76e\x74"]}=Context::getContext()->link->getModuleLink("agi\x6ce\x73el\x6ce\x72ra\x74\x69ng\x73","\x72\x61\x74\x69n\x67\x6c\x69s\x74",array("\x69d\x5ftyp\x65"=>1,"i\x64\x5fta\x72\x67et"=>${${"\x47L\x4f\x42\x41L\x53"}["y\x6dup\x67\x61\x70e"]}),true);return array("i\x64_\x72\x61t\x69ng_\x74a\x72g\x65t"=>${$crqwljbwy},"\x6e\x61\x6d\x65_\x72at\x69ng_\x74a\x72\x67e\x74"=>self::getTargetName(${${"G\x4c\x4f\x42\x41L\x53"}["\x77\x6dv\x6a\x62j\x72\x6e\x63rq"]},${$cffnugulpq}),"av\x65ra\x67\x65_\x72at\x69n\x67\x5ft\x61rg\x65t"=>${${"\x47\x4cOB\x41L\x53"}["\x6aty\x69\x72dx\x6c"]},"\x62\x6e_\x72\x61ti\x6e\x67_tar\x67\x65\x74"=>${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x63\x79k\x70\x70\x6cqe\x79"]},"\x6ci\x6ek\x5ft\x61\x72ge\x74"=>${${"\x47\x4cO\x42\x41L\x53"}["\x6cmn\x6e\x76et"]},"\x73ta\x72s_targe\x74"=>self::getStarsImages(${${"GL\x4f\x42\x41\x4c\x53"}["\x6a\x74\x79i\x72\x64x\x6c"]}),"\x6ci\x6e\x6b\x32s\x65l\x6c\x65rp\x61\x67\x65"=>${${"GL\x4f\x42\x41\x4c\x53"}["\x6c\x66\x64g\x75\x6d"]},"\x61\x76\x65\x72\x61\x67e\x5f\x70er\x63en\x74ag\x65"=>${${"\x47\x4c\x4fB\x41\x4c\x53"}["l\x68\x73x\x63\x67"]}*20);}public static function getStarsImages($rating){${"G\x4cO\x42\x41\x4c\x53"}["v\x72\x78\x6fg\x69\x62\x79\x78"]="i\x64\x78";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x68\x79xt\x67\x66k\x6a"]="\x73tars";${${"\x47LOBA\x4cS"}["hy\x78\x74gfk\x6a"]}="";for(${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x7a\x6er\x6d\x68ji"]}=1;${${"G\x4cOB\x41\x4cS"}["\x76r\x78\x6f\x67\x69\x62\x79\x78"]}<=5;${${"GL\x4f\x42\x41\x4c\x53"}["\x7an\x72\x6d\x68\x6a\x69"]}++){${"G\x4c\x4f\x42\x41\x4cS"}["\x76o\x74\x64\x79\x61\x64\x67r\x62"]="\x69\x64\x78";if(${${"\x47LOBAL\x53"}["wu\x64\x6f\x66\x75\x67\x6c\x72m\x68"]}>${${"G\x4c\x4f\x42A\x4c\x53"}["v\x6ftd\x79ad\x67\x72\x62"]}){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x70\x7a\x66sy\x69\x6a\x76\x6c\x66"]="st\x61\x72s";${"\x47\x4c\x4fB\x41\x4cS"}["c\x6cs\x6b\x69\x62\x66"]="s\x74\x61\x72s";${${"\x47\x4cOB\x41L\x53"}["cl\x6f\x76dpo\x6f\x74"]}=${${"GLOB\x41\x4c\x53"}["\x63lskibf"]}=${${"GL\x4f\x42\x41\x4c\x53"}["\x70zfs\x79\x69\x6a\x76l\x66"]}."<\x69mg \x73\x72\x63=\x22"._MODULE_DIR_."/ag\x69\x6ce\x73\x65l\x6ce\x72\x72\x61\x74in\x67\x73/\x69\x6dg/star4.\x70\x6eg\"\x20/\x3e";}else{${"G\x4c\x4f\x42AL\x53"}["\x73ureh\x72\x72l\x6f"]="st\x61\x72s";$lvvpwlbjro="star\x73";$aewvwjtxe="\x74\x65n\x74\x68";$nwrybtdrmbq="\x73tars";$efwkifu="\x73\x74\x61\x72\x73";${"G\x4cO\x42\x41\x4c\x53"}["nsov\x67\x70\x6b\x75\x74\x78\x67\x62"]="st\x61\x72\x73";$wxusuc="\x74e\x6e\x74\x68";${$wxusuc}=(${${"\x47L\x4f\x42\x41LS"}["\x77u\x64\x6f\x66\x75g\x6c\x72\x6d\x68"]}+1-${${"G\x4cO\x42\x41LS"}["z\x6e\x72\x6d\x68\x6a\x69"]})*100;$qpjyyoy="t\x65nt\x68";$ctlsuxbq="\x74\x65\x6e\x74h";if(${${"\x47LOBA\x4cS"}["f\x64dz\x77\x70\x63v\x78\x69\x75c"]}<10)${${"G\x4c\x4fBA\x4cS"}["c\x6c\x6fv\x64\x70oot"]}=${$lvvpwlbjro}."<\x69m\x67\x20src\x3d\""._MODULE_DIR_."/\x61gi\x6c\x65\x73\x65\x6c\x6c\x65rr\x61t\x69\x6e\x67\x73/\x69mg/\x73\x74\x61r0.p\x6e\x67\" /\x3e";elseif(${$qpjyyoy}<35)${${"GL\x4f\x42\x41L\x53"}["\x63\x6c\x6fvd\x70o\x6f\x74"]}=${${"\x47\x4c\x4fBA\x4c\x53"}["\x6e\x73ov\x67pk\x75\x74x\x67b"]}."\x3ci\x6d\x67 \x73\x72c=\x22"._MODULE_DIR_."/\x61\x67\x69\x6ceseller\x72a\x74i\x6eg\x73/i\x6d\x67/\x73ta\x72\x31\x2ep\x6eg\x22\x20/\x3e";elseif(${$aewvwjtxe}<65)${${"GLO\x42\x41\x4cS"}["\x73\x75\x72e\x68\x72r\x6co"]}=${${"\x47L\x4f\x42\x41LS"}["c\x6c\x6fvd\x70\x6f\x6ft"]}."<\x69m\x67\x20s\x72\x63=\x22"._MODULE_DIR_."/agile\x73e\x6c\x6cer\x72\x61\x74\x69ngs/i\x6dg/\x73ta\x72\x32.pn\x67\"\x20/\x3e";elseif(${$ctlsuxbq}<85)${$nwrybtdrmbq}=${${"GL\x4f\x42A\x4c\x53"}["\x63\x6c\x6fvd\x70\x6f\x6f\x74"]}."\x3c\x69m\x67\x20\x73rc\x3d\""._MODULE_DIR_."/a\x67\x69les\x65\x6c\x6ce\x72rati\x6egs/\x69mg/\x73tar3\x2ep\x6e\x67\x22 /\x3e";else${$efwkifu}=${${"G\x4cO\x42\x41\x4c\x53"}["\x63\x6c\x6fv\x64\x70\x6f\x6f\x74"]}."<\x69m\x67 src=\""._MODULE_DIR_."/a\x67ile\x73\x65\x6cl\x65\x72\x72\x61\x74in\x67s/i\x6dg/s\x74ar4.png\"\x20/\x3e";}}return"<\x73\x70\x61\x6e st\x79l\x65\x3d\"d\x69s\x70lay:\x20in\x6cine-b\x6c\x6f\x63k\">".${${"G\x4c\x4fB\x41LS"}["cl\x6f\x76\x64p\x6fo\x74"]}."</spa\x6e\x3e";}public static function getTargetName($id_target,$id_type){$tlzmyiia="i\x64\x5f\x74\x79\x70\x65";global$cookie;if(${$tlzmyiia}==self::RATING_TYPE_SELLER){${"\x47LO\x42A\x4c\x53"}["\x75\x7a\x65\x76au\x64o\x6c"]="\x69\x64\x5f\x74\x61\x72\x67e\x74";$gocfhlynpmg="\x73\x65\x6c\x6c\x65\x72i\x6efo";$wlonmhn="\x73\x65\x6c\x6ce\x72i\x6e\x66\x6f";$umihxqviri="\x73\x65\x6c\x6cer";include_once(_PS_ROOT_DIR_."/\x6d\x6fdul\x65s/\x61\x67i\x6c\x65\x6du\x6ct\x69pl\x65s\x65l\x6c\x65r/Se\x6cle\x72Info.ph\x70");${$gocfhlynpmg}=new SellerInfo(SellerInfo::getIdBSellerId(${${"\x47L\x4f\x42A\x4c\x53"}["\x75\x7a\x65\x76\x61u\x64\x6f\x6c"]}),$cookie->id_lang);$nhtghemsrnf="\x69\x64\x5fta\x72\x67\x65\x74";if(Validate::isLoadedObject(${$wlonmhn})AND!empty($sellerinfo->company))return$sellerinfo->company;${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x73\x63\x63f\x73\x67\x77p\x6bl"]}=new Employee(${$nhtghemsrnf});if(!Validate::isLoadedObject(${$umihxqviri}))return"";return$seller->firstname." ".$seller->lastname;}}public static function formatName($firstname,$lastname){$kfmlwjznmfhd="f\x69r\x73t\x6e\x61\x6d\x65";$nqrfhwyuc="la\x73t\x6ea\x6d\x65";return${$kfmlwjznmfhd}."\x20".strtoupper(substr(${$nqrfhwyuc},0,1)).".";}private function initCriterions(){$qglhcnwfln="c\x72it\x65\x72\x69o\x6e\x73";require_once(dirname(__FILE__)."/Agi\x6ce\x52a\x74i\x6e\x67Crit\x65\x72\x69o\x6e\x2e\x70hp");${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x70\x68\x79s\x75\x65"]="cri\x74e\x72io\x6e\x73";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["r\x76\x79\x72\x79\x78u\x75\x71"]="c\x72it\x65\x72io\x6es";${"\x47\x4c\x4f\x42AL\x53"}["l\x64\x71\x61\x7a\x6f\x70q\x6d\x66\x76"]="\x6ea\x6de";${$qglhcnwfln}=AgileRatingCriterion::getList();if(isset(${${"GL\x4f\x42\x41L\x53"}["\x72\x76\x79\x72\x79\x78\x75\x75\x71"]})AND!empty(${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x70hy\x73\x75\x65"]}))return;${${"\x47LOBA\x4c\x53"}["\x74cgu\x69n\x68\x63\x6c\x68\x77"]}=array("\x53\x68i\x70pin\x67","\x53er\x76ic\x65","\x43o\x6d\x6d\x75\x6eic\x61ti\x6fn");foreach(${${"\x47\x4c\x4f\x42AL\x53"}["t\x63\x67\x75\x69\x6eh\x63\x6c\x68\x77"]} as${${"GL\x4f\x42\x41L\x53"}["\x6cd\x71\x61\x7aop\x71\x6d\x66\x76"]}){${${"\x47LO\x42AL\x53"}["\x69\x70i\x67\x73\x66"]}=new AgileRatingCriterion();$blounrlvinp="\x6c\x61\x6e\x67\x75\x61g\x65s";${$blounrlvinp}=Language::getLanguages(true);foreach(${${"G\x4cOBA\x4cS"}["\x77\x74l\x75h\x71ik"]} AS${${"\x47\x4cO\x42A\x4c\x53"}["\x6dj\x61r\x67r\x66t\x78\x68"]}){$qgsppbfndnp="\x6c\x61\x6e\x67";$criterion->{"\x6e\x61\x6d\x65"}[${$qgsppbfndnp}["i\x64_\x6ca\x6eg"]]=${${"G\x4c\x4f\x42\x41LS"}["f\x6f\x68\x63\x78\x6c\x72\x6en"]};}$criterion->save();}}public static function get_waitlist_url(){if(version_compare(_PS_VERSION_,"1\x2e5","\x3e\x3d"))return Context::getContext()->link->getModuleLink("\x61\x67\x69le\x73el\x6ce\x72\x72\x61\x74i\x6e\x67s","f\x65\x65d\x62\x61\x63\x6bwai\x74l\x69s\x74",array(),true);return Tools::getShopDomainSsl(true,true).__PS_BASE_URI__."\x6d\x6f\x64u\x6c\x65s/f\x65\x65dbackwai\x74l\x69\x73t/fee\x64back\x77\x61itlist.p\x68\x70";}public static function procss_feedback(){$gdhgsnngp="\x63rit\x65rio\x6e\x73";$mtbdrfozfy="\x63\x72\x69\x74\x65rio\x6e";global$cookie;$znqzfcj="\x63\x72\x69\x74\x65\x72\x69on\x73";$evmwfxcdf="to\x74a\x6c";$iraffdjr="\x74\x6f\x74\x61\x6c";${$gdhgsnngp}=AgileRatingCriterion::getList($cookie->id_lang);${$evmwfxcdf}=0;foreach(${$znqzfcj} AS${$mtbdrfozfy}){$cconrhmi="c\x72i\x74\x65\x72\x69\x6f\x6e";${${"GL\x4f\x42\x41\x4c\x53"}["\x75\x6bi\x70\x6b\x61iyg"]}=intval(${$cconrhmi}["\x69d\x5f\x61gile_\x72a\x74\x69\x6eg_crit\x65\x72i\x6f\x6e"]);${${"\x47\x4cO\x42\x41\x4c\x53"}["\x68\x6arx\x75\x73r"]}=${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x68\x6a\x72xu\x73r"]}+intval($_POST[${${"\x47LO\x42A\x4c\x53"}["\x75\x6bi\x70ka\x69\x79g"]}."\x5frat\x69\x6e\x67\x5fgrad\x65"]);}$wtpdvwr="\x63u\x73\x74\x6fm\x65r";${${"GL\x4f\x42\x41\x4c\x53"}["\x71p\x7a\x72\x76\x6bh\x65x\x7a\x70x"]}=${$iraffdjr}/count(${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6c\x74\x71\x79a\x6d"]});${$wtpdvwr}=new Customer($cookie->id_customer);${${"GLO\x42A\x4cS"}["\x73y\x6d\x65qwl"]}=new AgileRating();$agilerating->id=0;$agilerating->id_order=intval(Tools::getValue("\x72\x61\x74in\x67_\x69d\x5f\x6f\x72d\x65\x72"));$agilerating->id_customer=$cookie->id_customer;$agilerating->customer=AgileSellerRatings::formatName($customer->firstname,$customer->lastname);$vpowrovpsv="\x67\x72a\x64e";$agilerating->id_target=intval(Tools::getValue("\x72\x61\x74ing\x5fi\x64_ow\x6e\x65\x72"));$agilerating->id_lang=$cookie->id_lang;$agilerating->id_type=AgileSellerRatings::RATING_TYPE_SELLER;$agilerating->content=strip_tags(Tools::getValue("co\x6e\x74\x65\x6e\x74"));$agilerating->ip_address=$_SERVER["R\x45MO\x54E\x5f\x41\x44\x44\x52"];$agilerating->grade=${$vpowrovpsv};$ngijlztgc="c\x72\x69\x74\x65\x72\x69\x6f\x6e";$agilerating->save();foreach(${${"GL\x4f\x42ALS"}["l\x74q\x79\x61m"]} AS${$ngijlztgc}){${"G\x4c\x4f\x42\x41\x4c\x53"}["\x61zer\x71\x6d"]="\x63i\x64";$qnbkpojl="c\x72i\x74e\x72ion";${${"\x47L\x4fB\x41\x4cS"}["\x61\x7a\x65r\x71m"]}=intval(${${"GL\x4fBAL\x53"}["\x69p\x69\x67\x73f"]}["\x69\x64_\x61gil\x65_\x72a\x74\x69n\x67_crite\x72ion"]);AgileRating::addCriterionRatingGrade($agilerating->id,intval(${$qnbkpojl}["\x69d\x5f\x61\x67il\x65_ra\x74\x69\x6e\x67\x5fc\x72it\x65\x72i\x6f\x6e"]),intval($_POST[${${"\x47\x4cOBA\x4cS"}["u\x6b\x69p\x6b\x61\x69y\x67"]}."_r\x61t\x69\x6eg\x5fg\x72\x61de"]));}}public function process_ratinglist($controller){$deiqoxdtm="\x69\x64x";$lgsucl="\x61g\x69\x6c\x65_\x74\x61rge\x74_\x6ea\x6d\x65";global$cookie,$smarty;${"\x47\x4c\x4f\x42\x41\x4c\x53"}["j\x71\x77\x72\x70\x66\x61\x66y\x78\x6c"]="\x61\x76\x65ra\x67\x65\x73";$wlipdsko="a\x76\x65\x72\x61\x67e\x73";${"\x47\x4c\x4f\x42ALS"}["\x68\x6ach\x79p\x6c\x65\x63f\x65w"]="\x61g\x69\x6c\x65_ta\x72ge\x74_\x6ea\x6d\x65";$conlrwo="\x61\x67i\x6c\x65_r\x61t\x69n\x67s_\x6e\x62";${"\x47\x4c\x4fB\x41\x4cS"}["\x77\x62\x74\x6fij\x65"]="\x69\x64x";$ilyfhrcbveu="id\x5ft\x61r\x67e\x74";${"G\x4c\x4f\x42\x41\x4cS"}["\x73\x68q\x6f\x70\x65z\x77\x72\x6a"]="\x69\x64\x5f\x74\x79\x70e";${"\x47LOB\x41\x4c\x53"}["\x75\x63\x77\x75\x70\x65\x6a\x72u\x71"]="\x69\x64_\x74\x61\x72ge\x74";${${"G\x4cO\x42\x41\x4c\x53"}["\x75\x63\x77\x75\x70e\x6a\x72\x75q"]}=intval(Tools::getValue("id_\x74\x61r\x67\x65\x74"));${"\x47\x4c\x4fB\x41LS"}["whu\x70\x6e\x69\x69\x77\x74\x65\x71\x71"]="id_\x74y\x70e";${${"\x47\x4c\x4fB\x41\x4cS"}["\x73\x68\x71\x6f\x70\x65\x7a\x77\x72\x6a"]}=intval(Tools::getValue("\x69\x64_\x74\x79p\x65"));${"G\x4c\x4fB\x41\x4c\x53"}["\x71\x74\x67\x6b\x68\x73"]="\x61\x67ile_\x72ating\x73";$ilgtcgeicrx="\x69\x64\x5f\x74ar\x67e\x74";${${"GL\x4fBA\x4c\x53"}["\x76p\x6e\x68\x6e\x78c\x70k\x6d"]}=AgileRating::getCount(${$ilgtcgeicrx},${${"\x47\x4c\x4f\x42\x41\x4cS"}["w\x66\x74\x6c\x67\x6cl\x77\x77\x76"]});${"G\x4c\x4fBA\x4c\x53"}["r\x63t\x7a\x6d\x78\x79\x62c"]="i\x64\x5f\x74\x79p\x65";$controller->pagination(${${"\x47L\x4fB\x41LS"}["\x76\x70\x6e\x68\x6ex\x63p\x6b\x6d"]});${"\x47L\x4f\x42ALS"}["e\x7az\x78\x79\x6c\x79\x6eij"]="\x63r\x69\x74\x65\x72\x69\x6fn\x73";${${"GL\x4f\x42\x41\x4c\x53"}["dp\x77\x6f\x70\x76\x76xc"]}=$controller->p;${${"GL\x4f\x42\x41\x4c\x53"}["i\x6d\x77\x76\x72\x76\x6b"]}=$controller->n;$qjsyrp="i\x64\x78";$szmdkmoycr="\x61\x67\x69\x6ce\x5f\x72\x61\x74\x69\x6e\x67\x73";${${"G\x4c\x4fB\x41\x4c\x53"}["\x71\x6fn\x72z\x76rj"]}=AgileRating::getList(${${"\x47LOBA\x4c\x53"}["\x77\x6dv\x6ab\x6a\x72\x6ec\x72q"]},${${"\x47LO\x42AL\x53"}["\x72c\x74z\x6dxyb\x63"]},${${"GLO\x42\x41\x4c\x53"}["\x64\x70\x77\x6f\x70vv\x78\x63"]},${${"\x47L\x4fB\x41L\x53"}["\x69\x6d\x77v\x72\x76k"]});${${"\x47L\x4f\x42\x41\x4c\x53"}["\x68j\x63\x68\x79\x70l\x65\x63\x66\x65w"]}=AgileSellerRatings::getTargetName(${$ilyfhrcbveu},${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x77\x68u\x70n\x69\x69w\x74\x65\x71\x71"]});for(${$deiqoxdtm}=0;${${"\x47\x4cO\x42\x41L\x53"}["\x77bt\x6f\x69\x6ae"]}<count(${$szmdkmoycr});${$qjsyrp}++){$loufoywcknn="idx";${"G\x4c\x4f\x42\x41\x4c\x53"}["b\x67l\x6f\x65z\x6f\x76h\x79"]="\x61\x67\x69\x6ce\x5fra\x74\x69\x6e\x67s";${${"\x47L\x4fBAL\x53"}["b\x67\x6c\x6f\x65z\x6f\x76\x68\x79"]}[${$loufoywcknn}]["\x73tar\x73"]=AgileSellerRatings::getStarsImages(${${"\x47\x4c\x4f\x42\x41LS"}["\x71\x6fn\x72\x7av\x72j"]}[${${"G\x4cO\x42\x41\x4cS"}["\x7a\x6e\x72\x6d\x68j\x69"]}]["\x67ra\x64e"]);}$smarty->assign(array("\x61gi\x6ce\x5f\x72\x61t\x69\x6eg\x73"=>${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x71\x74\x67\x6bhs"]},"a\x67i\x6c\x65\x5frat\x69n\x67s_\x6e\x62"=>${$conlrwo},"\x61g\x69\x6ce\x5f\x74arg\x65\x74\x5fna\x6de"=>${$lgsucl}));${${"\x47L\x4f\x42\x41L\x53"}["\x65\x7a\x7a\x78\x79l\x79\x6e\x69j"]}=AgileRatingCriterion::getList($cookie->id_lang);${"\x47L\x4f\x42\x41\x4c\x53"}["\x74p\x70\x79\x72yv\x6ai\x68\x78\x6a"]="\x76\x61\x6c";${"G\x4cO\x42AL\x53"}["\x75s\x73\x67\x6e\x6f\x69\x77"]="\x61\x76\x65\x72\x61\x67\x65\x73t\x61\x72\x73";${$wlipdsko}=AgileRating::getAverages(${${"\x47LO\x42\x41\x4c\x53"}["\x77m\x76\x6a\x62\x6ar\x6e\x63rq"]},${${"\x47\x4c\x4f\x42\x41\x4cS"}["w\x66tl\x67\x6c\x6c\x77\x77v"]});${${"\x47\x4c\x4f\x42AL\x53"}["e\x79rc\x74fit\x6cen"]}=0;${${"\x47\x4cOB\x41\x4c\x53"}["u\x73\x73\x67n\x6f\x69\x77"]}=array();$nsgrank="a\x76\x65r\x61\x67\x65T\x6f\x74\x61\x6c";foreach(${${"\x47\x4cO\x42\x41\x4cS"}["\x6b\x6d\x67e\x70hp\x6e\x71\x70"]} AS${${"GL\x4f\x42A\x4c\x53"}["\x79\x70jkx\x68lt\x75"]}=>${${"G\x4cO\x42A\x4c\x53"}["\x74pp\x79r\x79v\x6a\x69\x68\x78j"]}){$udokofttg="\x6b\x65y";${"\x47\x4cO\x42\x41L\x53"}["\x75g\x6d\x62\x76\x68"]="\x76\x61\x6c";${${"\x47\x4cO\x42AL\x53"}["lt\x70\x65\x6b\x6cy\x63\x66t"]}[${$udokofttg}]=AgileSellerRatings::getStarsImages(${${"G\x4c\x4fBALS"}["\x7axgp\x66\x68a\x6a\x6er\x70"]});${${"GL\x4f\x42\x41\x4c\x53"}["\x65\x79r\x63\x74\x66i\x74\x6c\x65\x6e"]}+=floatval(${${"\x47L\x4f\x42\x41L\x53"}["\x75g\x6d\x62\x76\x68"]});}${${"\x47\x4cO\x42\x41\x4cS"}["\x65y\x72ct\x66\x69\x74\x6c\x65\x6e"]}=round(count(${${"G\x4cO\x42\x41\x4c\x53"}["j\x71\x77\x72\x70\x66a\x66y\x78\x6c"]})?(${$nsgrank}/count(${${"\x47LO\x42\x41\x4cS"}["\x6b\x6dg\x65\x70\x68\x70\x6e\x71\x70"]})):0,1);$smarty->assign(array("crit\x65rio\x6e\x73"=>${${"\x47\x4c\x4fB\x41\x4c\x53"}["lt\x71\x79a\x6d"]},"a\x76e\x72\x61\x67e\x73"=>${${"\x47LOBA\x4c\x53"}["\x6bm\x67\x65\x70\x68\x70nq\x70"]},"\x61ver\x61\x67\x65s\x74ars"=>${${"\x47L\x4fBAL\x53"}["\x6c\x74pekl\x79\x63f\x74"]},"\x61\x76e\x72ag\x65\x54o\x74al"=>${${"\x47\x4c\x4f\x42ALS"}["e\x79\x72\x63t\x66\x69\x74\x6c\x65\x6e"]},"\x61gil\x65\x73ellerr\x61\x74\x69\x6e\x67_t\x70l"=>_PS_ROOT_DIR_."/mod\x75l\x65s/\x61g\x69\x6c\x65\x73ell\x65r\x72\x61\x74\x69ngs/"));}public function assignSellerRatingForList($query_reqults,$final=true){$knyeosr="qu\x65\x72\x79\x5fre\x71\x75\x6c\x74\x73";$wqswbxqwcir="\x69\x64\x78";for(${$wqswbxqwcir}=0;${${"G\x4cO\x42\x41L\x53"}["\x7a\x6ermhj\x69"]}<count(${${"G\x4c\x4f\x42A\x4c\x53"}["\x6c\x75\x6b\x66b\x62k\x76\x63w\x7a"]});${${"G\x4c\x4f\x42\x41\x4c\x53"}["zn\x72\x6dhj\x69"]}++){if(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x78r\x65t\x75k\x70\x76\x63\x65\x79"]}){${"\x47\x4c\x4fB\x41\x4c\x53"}["\x64\x76\x6c\x63krd\x62"]="q\x75er\x79\x5f\x72\x65q\x75lt\x73";${"GL\x4f\x42A\x4c\x53"}["\x6epwp\x67\x70u\x69y\x64\x6b"]="\x69\x64x";${${"\x47\x4c\x4fBAL\x53"}["\x6cukf\x62\x62k\x76cwz"]}[${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x7a\x6e\x72\x6dhji"]}]["\x73elle\x72\x5f\x72at\x74i\x6e\x67\x73"]=$this->getAverageRating4List(${${"GL\x4f\x42\x41\x4c\x53"}["\x64\x76\x6c\x63k\x72\x64b"]}[${${"GL\x4f\x42A\x4cS"}["n\x70\x77pg\x70\x75\x69y\x64k"]}]["\x69\x64_\x73ell\x65\x72"],AgileSellerRatings::RATING_TYPE_SELLER);}else{$mkjaym="i\x64\x78";${${"G\x4cOB\x41\x4c\x53"}["\x6cu\x6b\x66\x62\x62\x6b\x76\x63\x77\x7a"]}[${$mkjaym}]["sel\x6c\x65\x72\x5f\x72a\x74t\x69ng\x73"]=$this->getAverageRatingData(${${"\x47LO\x42\x41LS"}["\x6c\x75kfb\x62\x6b\x76cwz"]}[${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x7a\x6e\x72m\x68\x6a\x69"]}]["id_\x73e\x6c\x6c\x65r"],AgileSellerRatings::RATING_TYPE_SELLER);}}return${$knyeosr};}}
?>