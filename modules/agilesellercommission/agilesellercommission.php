<?php /*
///-build_id: 2014101516.1711
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/store/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2012 Addons-Modules.com
///
*/
${"\x47L\x4fB\x41\x4c\x53"}["\x75b\x71\x6f\x6b\x73\x68w\x66\x76"]="c\x6e\x74";${"\x47\x4c\x4f\x42\x41L\x53"}["cd\x69f\x63s\x7a"]="r\x65\x66\x66\x65r";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x65\x79\x65w\x6a\x78s\x71\x6ej\x6a"]="\x68\x61\x6e\x64\x6ce";${"\x47\x4c\x4f\x42\x41L\x53"}["g\x63tpd\x6bo"]="to\x74a\x6c";${"G\x4c\x4fB\x41L\x53"}["\x7aqm\x6dyo\x74\x63\x64\x69"]="\x61d\x64\x72e\x73\x73\x5f\x6f\x76\x65\x72\x72id\x65";${"GL\x4f\x42A\x4c\x53"}["\x73t\x6cq\x78u\x73v\x78\x6b"]="\x72et\x75\x72n\x5f\x75\x72l";${"\x47\x4c\x4f\x42\x41LS"}["\x65\x6f\x71\x69\x78\x69\x70k"]="cu\x72\x72\x65\x6ec\x79";${"GL\x4fB\x41LS"}["\x6e\x76\x69l\x62i\x62"]="p\x61\x79e\x72\x5fe\x6da\x69\x6c";${"\x47\x4c\x4f\x42A\x4cS"}["\x72h\x76\x66\x6fz"]="c\x6fu\x6e\x74\x72\x79";${"G\x4c\x4fB\x41L\x53"}["\x62\x72kz\x79\x66\x63"]="\x62\x75sines\x73";${"\x47\x4c\x4fBALS"}["\x6a\x71vyf\x7at\x75j"]="\x68\x65\x61d\x65\x72";${"GLO\x42\x41\x4c\x53"}["rl\x6a\x63\x79\x68\x77\x71jxzf"]="\x72e\x74k\x65\x79";${"\x47\x4c\x4fB\x41L\x53"}["\x63\x6fei\x6a\x66tu\x77\x72\x6d"]="\x70ay\x6be\x79";${"G\x4c\x4fBAL\x53"}["\x6b\x6b\x72\x70y\x6e\x75"]="emp\x6c\x6f\x79e\x65";${"G\x4c\x4fB\x41\x4c\x53"}["\x68\x72\x62\x63\x6f\x75\x67q\x77"]="\x73\x65l\x6c\x65\x72\x49nfo";${"GL\x4f\x42\x41\x4c\x53"}["\x77\x68\x77\x61t\x63\x63"]="r\x65cor\x64_\x74\x79p\x65";${"\x47LO\x42\x41\x4c\x53"}["u\x66ekbpl"]="\x69s\x66\x72ont";${"\x47\x4cOB\x41\x4cS"}["\x66\x67n\x71\x69\x77\x66"]="\x76\x61\x6c";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x7ay\x65h\x6d\x70\x6e\x71\x78\x63pv"]="ur\x6c";${"\x47\x4cOB\x41L\x53"}["\x6c\x72\x63\x6b\x62\x6d\x6ciz"]="p\x61yp\x61\x6c\x5f\x70\x72\x6fdut\x69\x6fn";${"G\x4cO\x42AL\x53"}["\x6a\x6b\x73\x70\x65g\x74l\x76v\x66"]="\x70\x61y\x6d\x65\x6e\x74\x69\x6e\x66\x6f";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["e\x66\x6f\x6al\x62\x6b"]="k\x65\x79";${"\x47LO\x42\x41\x4c\x53"}["\x65\x70nck\x66\x79"]="\x6d\x65\x73\x73\x61\x67\x65s";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x62\x62\x79\x63qgu\x74\x70"]="i\x64\x5fc\x75rr\x65n\x63y";${"G\x4cOB\x41LS"}["q\x63\x6fcs\x6eh\x75\x65\x68\x6bt"]="\x74\x6f_\x63u\x72\x72e\x6e\x63\x79";${"G\x4cO\x42\x41\x4c\x53"}["\x6f\x6amzv\x6c\x76"]="s\x61l\x65\x73_\x61\x6doun\x74";${"G\x4c\x4fB\x41\x4cS"}["\x6bp\x71\x6c\x66\x63\x76"]="\x69\x64\x5f\x73\x65\x6c\x6cer\x5f\x63\x6f\x6dm\x69\x73si\x6fn";${"G\x4c\x4fB\x41\x4c\x53"}["\x79\x63\x64\x6f\x7a\x75\x79\x67"]="\x69\x64_\x63a\x6ec\x65\x6c\x6c";${"\x47L\x4fB\x41\x4c\x53"}["xj\x74\x64\x67ms"]="s\x71\x6c";${"\x47\x4cOBA\x4c\x53"}["xx\x63coxxo"]="\x73\x65ll\x65\x72";${"G\x4c\x4fBA\x4cS"}["\x6ef\x75\x62\x6d\x6b\x6fd\x6f\x76\x71"]="sel\x6cers";${"\x47LO\x42\x41LS"}["\x69\x69\x72\x75\x62bj"]="\x74\x6f\x6be\x6e\x73\x5f\x76\x61\x6c\x75e";${"G\x4cO\x42A\x4c\x53"}["xw\x65\x76q\x6aqu"]="\x74oken\x73_u\x73e\x64\x5f\x69n\x5f\x63a\x72\x74";${"GLOBAL\x53"}["\x6eo\x78\x77rd\x76pwu\x61"]="s\x65\x6c\x6c\x65\x72\x5f\x73\x61les_\x34\x63o\x6d";${"\x47L\x4f\x42A\x4c\x53"}["fgq\x72x\x66\x74"]="\x6f\x72d\x65r\x5f\x6f\x72\x69gin";${"\x47\x4cO\x42ALS"}["ls\x70\x6bq\x74o"]="\x72an\x67e\x5f\x63\x6f\x6d\x6d\x69\x73s\x69\x6f\x6e";${"\x47LO\x42\x41\x4c\x53"}["\x6f\x6a\x6eu\x6a\x62kp\x79\x70u"]="\x73e\x6c\x6c\x65\x72\x5fc\x6f\x6d\x6d\x69\x73s\x69\x6f\x6e";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x70\x63g\x72\x74y\x6c\x62\x78"]="\x62as\x65\x5f\x63\x6f\x6d\x6dis\x73\x69\x6f\x6e";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x74\x65\x77m\x69\x71f\x67\x6e"]="\x64e\x64\x75ctio\x6e_\x72\x61\x74e";${"G\x4cO\x42A\x4c\x53"}["o\x75\x63\x78b\x6cg\x76u\x6b\x78\x70"]="\x73\x65\x6c\x6ce\x72\x5f\x66in\x61l_sa\x6c\x65\x73";${"\x47LO\x42AL\x53"}["r\x77\x68\x62\x6d\x70rxtsm"]="\x63\x6f\x6d\x6d\x69\x73si\x6fn\x5fra\x74\x65";${"\x47L\x4f\x42\x41\x4cS"}["\x6a\x6a\x78h\x69\x74\x65\x66"]="\x73\x65l\x6ce\x72\x5fsa\x6ce\x73\x5f\x6f\x72\x69g\x69\x6e\x61l";${"\x47\x4cOBAL\x53"}["xu\x69wb\x67\x73\x6f\x6d"]="\x73e\x6c\x6c\x65\x72_f\x69\x6e\x61\x6c_sa\x6c\x65s\x5f\x6f\x72\x69g\x69\x6e\x61l";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x79\x72\x69\x6am\x71\x75\x76\x78r"]="se\x6cle\x72\x5f\x73\x61\x6c\x65\x73";${"\x47LO\x42AL\x53"}["\x68\x66\x62i\x66r\x6c\x74\x6c\x6c\x6d"]="\x69\x64_\x73\x65\x6c\x6cer";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x71lykhws\x6a"]="\x63u\x72r\x65\x6e\x63\x79_\x6fr\x64\x65r";${"G\x4cO\x42\x41\x4cS"}["d\x77\x74o\x71\x6d\x6e"]="a\x66\x74\x65\x72_di\x73\x63\x6f\x75\x6et";${"\x47L\x4f\x42A\x4c\x53"}["\x6a\x64\x67\x71\x69\x6f\x61snpr"]="\x69\x6e\x63\x6cu\x64e\x5fsh\x69\x70\x70i\x6e\x67";${"\x47L\x4f\x42\x41\x4cS"}["\x72xy\x72wmm\x69\x6f"]="n\x62Er\x72o\x72\x73";${"\x47L\x4fB\x41\x4c\x53"}["\x71\x6f\x67s\x6az\x6b"]="\x63\x6f\x6e\x66";${"\x47LO\x42\x41\x4cS"}["r\x79fk\x6e\x67\x64a\x63\x7a\x74o"]="c\x6fn\x66\x5f\x6be\x79\x73";${"GLOB\x41\x4cS"}["\x6f\x73\x76\x6eb\x63\x79\x65\x75\x6f\x66"]="\x6c\x61ng";${"GL\x4f\x42\x41\x4c\x53"}["\x6b\x7ag\x6e\x62\x6f"]="c\x75\x72\x72\x65\x6ec\x69e\x73";${"G\x4cO\x42\x41\x4c\x53"}["\x63\x6b\x6fgr\x72\x73ok\x79n\x78"]="f\x69\x65\x6c\x64\x73\x5f\x66\x6f\x72\x6d";${"\x47LOB\x41LS"}["\x64\x6at\x7a\x69\x6c"]="de\x64\x75\x63\x74i\x6f\x6e\x5fl\x69\x73\x74";${"G\x4c\x4f\x42\x41\x4cS"}["\x75c\x78\x6av\x6ccx\x65\x75f"]="\x73hi\x70\x70ing\x5f\x69n\x63\x6cu\x64e";${"\x47\x4cOB\x41L\x53"}["gpb\x7apd\x66\x73\x75\x6b"]="\x70\x61y\x70\x61\x6c\x5f\x73\x61n\x64b\x6fx";${"\x47L\x4fB\x41\x4cS"}["my\x65\x65fcp\x6f\x63"]="\x70a\x79\x70\x61l_h\x65a\x64e\x72";${"G\x4cO\x42\x41\x4cS"}["\x62k\x6b\x69\x62\x70"]="\x69\x64\x5fo\x72de\x72_\x73\x74a\x74\x65\x5fr\x74\x5fcom\x6d\x69\x73s\x69\x6f\x6e";${"GLOBAL\x53"}["\x68\x64\x6fe\x73\x70s\x75"]="h\x65a\x6c\x74\x68\x5f\x63\x68\x65ck";${"\x47\x4c\x4fB\x41L\x53"}["l\x66\x62r\x6ffk\x6c\x6b"]="\x69\x64_pr\x6f\x66il\x65";${"\x47\x4c\x4f\x42\x41LS"}["\x6f\x63\x65ff\x70"]="\x72e\x74err\x73";${"\x47L\x4f\x42\x41\x4c\x53"}["xyud\x64hn\x75u\x75b\x68"]="r\x65\x73\x75l\x74";${"\x47L\x4f\x42A\x4c\x53"}["\x67\x66\x73\x73\x6bk\x74\x69"]="\x61\x64\x6d\x69\x6e\x66\x6f\x6c\x64e\x72";${"\x47\x4c\x4fBA\x4cS"}["\x75s\x6e\x77\x76kkl\x6c"]="\x5f\x6e\x65\x77f\x69\x6ce\x73";${"\x47\x4c\x4f\x42A\x4c\x53"}["f\x70\x6b\x64ixd\x6fi\x75"]="\x73\x74\x61\x74\x65";${"\x47\x4c\x4f\x42\x41LS"}["\x6c\x6a\x73\x6cl\x62\x63\x6d\x6f"]="s\x74\x61\x74\x65\x73";if(!class_exists("\x41g\x69\x6c\x65Ins\x74al\x6cer")){include_once(_PS_ROOT_DIR_."/m\x6fd\x75le\x73/ag\x69l\x65sel\x6cer\x63ommis\x73\x69\x6f\x6e/\x69n\x73\x74al\x6c/".(_PS_VERSION_>"1\x2e\x36"?"\x31\x2e\x36\x78":"1.5x")."/\x63las\x73\x65\x73/Agile\x49\x6es\x74al\x6c\x65r.\x70hp");eval("\x63\x6ca\x73\x73\x20Ag\x69\x6ce\x49\x6est\x61l\x6c\x65r \x65xtends A\x67i\x6ceIn\x73\x74a\x6cler\x43\x6f\x72e {}");}define("\x41g\x69\x6c\x65_\x53ell\x65r_\x43omm\x69ss\x69\x6f\x6e\x5f\x4c\x6fg\x67\x69ng","o\x66f");class AgileSellerCommission extends Module{const INSTALL_SQL_FILE="i\x6e\x73t\x61\x6c\x6c\x2es\x71l";const VOUCHER_COST_AT_STORE=1;const VOUCHER_COST_AT_SELLER=2;public static$_newfiles=array('classes/AgileInstaller.php'=>array('1.6x'=>'classes/AgileInstaller.php','1.5x'=>'classes/AgileInstaller.php'),'classes/AgileHelper.php'=>array('1.6x'=>'classes/AgileHelper.php','1.5x'=>'classes/AgileHelper.php'),'classes/AgileSellerManager.php'=>array('1.6x'=>'classes/AgileSellerManager.php','1.5x'=>'classes/AgileSellerManager.php'));private$version_dependencies=array();private$_html='';private$_postErrors=array();private$_statesArray;function __construct(){global$cookie;$this->name="\x61\x67\x69\x6cese\x6clerc\x6fmm\x69ssi\x6fn";$this->tab="\x61dmi\x6eis\x74r\x61\x74\x69o\x6e";$this->author="a\x64\x64on\x73-\x6dodu\x6ce\x73\x2ecom";$this->version="\x31.\x33\x2e1.\x31";$this->dependencies=array("ag\x69\x6c\x65mu\x6c\x74iple\x73e\x6cl\x65\x72");$this->ps_versions_compliancy=array("m\x69n"=>"1.\x36","\x6da\x78"=>_PS_VERSION_);$this->version_dependencies=array("\x61gi\x6cem\x75\x6ct\x69\x70\x6cese\x6c\x6cer"=>"3.0.\x33");$this->bootstrap=true;parent::__construct();$this->displayName=$this->l('Agile Seller Commission module');$this->description=$this->l('Enable seller commission related functions');${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x6cj\x73l\x6c\x62c\x6d\x6f"]}=OrderState::getOrderStates((int)($cookie->id_lang));foreach(${${"\x47\x4cO\x42\x41\x4c\x53"}["lj\x73\x6c\x6c\x62cm\x6f"]} AS${${"GL\x4fB\x41LS"}["\x66p\x6bdi\x78\x64\x6f\x69\x75"]}){${"G\x4cO\x42ALS"}["\x79o\x64\x66\x64g\x73\x72\x73t\x65v"]="\x73\x74a\x74\x65";$this->_statesArray[${${"G\x4c\x4fB\x41\x4c\x53"}["yod\x66\x64\x67sr\x73\x74e\x76"]}["id_o\x72\x64er\x5fs\x74a\x74e"]]=${${"\x47L\x4fB\x41\x4c\x53"}["\x66\x70k\x64\x69x\x64o\x69\x75"]}["name"];}}function install(){${"G\x4cO\x42\x41\x4c\x53"}["yih\x66\x74\x76\x78"]="i\x64\x5f\x70ro\x66il\x65";if(!defined("_IS\x5f\x41\x47I\x4cE\x5f\x44\x45V\x5f")&&!empty(self::${${"\x47L\x4fB\x41L\x53"}["\x75\x73\x6e\x77\x76kkll"]})&&!Tools::getValue("r\x65d\x69\x72\x65ct\x65d")){${"\x47\x4c\x4f\x42\x41\x4cS"}["\x79\x75z\x6e\x69\x71\x74z"]="\x61\x64mi\x6e\x66older";${"G\x4c\x4fBA\x4c\x53"}["\x62\x6c\x6d\x66w\x6d\x76\x6cd\x78"]="\x61\x64\x6d\x69n\x66\x6fl\x64e\x72";$orygyeenrxo="\x5f\x6e\x65wfil\x65s";$sxthwepf="\x72es\x75l\x74";${${"G\x4c\x4fB\x41L\x53"}["b\x6c\x6d\x66\x77\x6d\x76\x6c\x64\x78"]}=AgileInstaller::detect_admin_folder($_SERVER["\x53C\x52IPT\x5fFIL\x45\x4eA\x4d\x45"]);AgileInstaller::install_newfiles(self::${${"\x47\x4cOB\x41\x4c\x53"}["\x75\x73n\x77\x76\x6b\x6b\x6cl"]},$this->name,${${"\x47L\x4f\x42\x41L\x53"}["\x67f\x73\x73\x6b\x6b\x74\x69"]},2);${$sxthwepf}=AgileInstaller::install_health_check(self::${$orygyeenrxo},$this->name,${${"\x47\x4cO\x42\x41L\x53"}["\x79\x75z\x6e\x69\x71\x74\x7a"]});if(!empty(${${"G\x4c\x4fB\x41LS"}["\x78\x79\x75\x64\x64\x68n\x75uub\x68"]})){$this->_errors[]="<\x61\x20t\x61r\x67\x65\x74\x3d\x22a\x67\x69le\" s\x74\x79le=\x22\x74\x65x\x74-\x64\x65\x63oratio\x6e:unde\x72l\x69\x6e\x65\x3b\x63ol\x6f\x72:b\x6cue\x3b\" h\x72ef\x3d\"\x68t\x74\x70://\x61ddons-m\x6f\x64ul\x65\x73\x2e\x63\x6f\x6d/st\x6f\x72e/e\x6e/\x63o\x6ete\x6e\x74/36-\x61g\x69\x6ce-\x6d\x6fdule-\x69\x6e\x73\x74a\x6cla\x74\x69o\x6e-t\x69\x70\x73\x22>".$this->l('Failed to update files due to permission issue, please visit here for more instructions.')."\x3c/\x61>";return false;}Tools::redirectAdmin("\x2e/i\x6e\x64\x65\x78\x2ep\x68p?co\x6e\x74r\x6f\x6c\x6c\x65\x72=Ad\x6di\x6e\x4do\x64\x75\x6c\x65s\x26t\x6fk\x65n\x3d".Tools::getValue("t\x6fken")."\x26i\x6est\x61\x6c\x6c\x3d".$this->name."\x26\x74\x61b_m\x6f\x64\x75\x6c\x65\x3d".$this->tab."\x20&modul\x65_\x6ea\x6d\x65\x3d".$this->name."\x26\x61\x6e\x63\x68o\x72=an\x63\x68or".$this->name."&\x72e\x64\x69\x72e\x63\x74\x65d=\x31");}${${"\x47\x4c\x4fB\x41\x4c\x53"}["oc\x65\x66fp"]}=AgileInstaller::version_depencies($this->version_dependencies);if(!empty(${${"\x47\x4cOBA\x4c\x53"}["\x6fc\x65\x66\x66\x70"]})){$wikryfclsln="\x72e\x74\x65r\x72\x73";$this->_errors=array_merge($this->_errors,${$wikryfclsln});return false;}include_once(_PS_ROOT_DIR_."/mo\x64ule\x73/\x61g\x69\x6cemult\x69\x70\x6ce\x73\x65\x6c\x6ce\x72/ag\x69l\x65mu\x6ctiple\x73\x65l\x6cer\x2e\x70\x68\x70");if(!AgileInstaller::sql_install(dirname(__FILE__)."/".self::INSTALL_SQL_FILE))return false;AgileInstaller::add_field_ifnotexists("c\x6f\x6dm\x69ss\x69on_\x72a\x74\x65","\x64edu\x63\x74ion\x5f\x72ate","\x66\x6co\x61t(\x316,2)","\x4e\x55\x4c\x4c");AgileInstaller::add_field_ifnotexists("se\x6c\x6c\x65r_comm\x69s\x73ion","\x64\x65d\x75\x63\x74i\x6f\x6e_am\x6f\x75nt","floa\x74(\x316,2)","\x4e\x55\x4c\x4c");$ilhohpdmlk="\x69\x64_p\x72o\x66i\x6c\x65";AgileInstaller::add_field_ifnotexists("\x73\x65l\x6ce\x72\x5f\x63o\x6dmi\x73\x73\x69\x6fn","\x6frde\x72_o\x72\x69\x67i\x6e","\x69n\x74(10)","\x4eUL\x4c");AgileInstaller::add_field_ifnotexists("\x73e\x6cler_c\x6f\x6dm\x69\x73s\x69on","tok\x65\x6e\x73\x5f\x75\x73ed","floa\x74(16,2)","0");if(parent::install()==false OR Configuration::updateValue("\x41SC_\x52T_\x43OMM\x49SSI\x4f\x4e_AT",Configuration::get("P\x53_\x4f\x53\x5f\x43\x41\x4e\x43ELED"))==false OR Configuration::updateValue("\x41S\x43\x5f\x43OM\x4dIS\x53IO\x4e_CU\x52\x52ENCY",Configuration::get("\x50S\x5fC\x55RRE\x4eC\x59\x5fDE\x46A\x55\x4c\x54"))==false OR Configuration::updateValue("A\x53C\x5fPAY\x50\x41\x4c_S\x41N\x44\x42\x4fX","1")==false OR Configuration::updateValue("A\x53C\x5f\x50\x41\x59P\x41\x4c\x5fEM\x41I\x4c","")==false OR Configuration::updateValue("A\x53C\x5fPAYPAL\x5f\x48E\x41\x44\x45R","")==false OR Configuration::updateValue("ASC\x5fSH\x49PP\x49NG\x5fINCL\x55\x44\x45",1)==false OR Configuration::updateValue("\x41\x53C\x5f\x56O\x55\x43H\x45\x52\x5fCO\x53T",self::VOUCHER_COST_AT_STORE)==false OR Configuration::updateValue("A\x53C\x5fD\x45DU\x43\x54\x49\x4f\x4e\x5f\x43\x48\x4fI\x43E\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP,0)==false OR Configuration::updateValue("ASC_\x44EDU\x43\x54\x49ON_CH\x4fIC\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_EBAY,0)==false)return false;${${"G\x4cO\x42\x41\x4cS"}["\x6c\x66\x62r\x6ff\x6b\x6ck"]}=intval(Configuration::get("\x41GILE_\x4d\x53\x5f\x50R\x4fFI\x4c\x45_ID"));if(!AgileInstaller::create_tab("Trans\x61cti\x6fn \x46\x65es","\x41g\x69\x6c\x65Ba\x73\x65Comm\x69\x73\x73\x69\x6f\x6eR\x61te\x73",(_PS_VERSION_>"1\x2e5"?"\x41\x64m\x69\x6e\x50\x61ren\x74C\x75\x73t\x6f\x6de\x72":"Admi\x6eCu\x73\x74\x6f\x6d\x65\x72s"),$this->name))return false;AgileInstaller::init_tab_prmission_for_existing_profiles("\x41\x67\x69\x6ce\x42a\x73eC\x6f\x6d\x6d\x69s\x73ion\x52a\x74\x65s",1,1,1,1);AgileInstaller::update_access(${${"\x47LO\x42A\x4c\x53"}["\x79\x69\x68\x66\x74vx"]},"\x41\x67\x69l\x65\x42a\x73\x65\x43\x6f\x6d\x6d\x69\x73\x73\x69onR\x61t\x65s",1,0,0,0);if(!AgileInstaller::create_tab("Co\x6dmiss\x69on F\x65e\x73","Agil\x65R\x61n\x67eC\x6fmmissionRate\x73",(_PS_VERSION_>"1.5"?"\x41dm\x69nP\x61r\x65\x6etCu\x73\x74o\x6der":"\x41\x64m\x69nCu\x73t\x6f\x6d\x65r\x73"),$this->name))return false;AgileInstaller::init_tab_prmission_for_existing_profiles("A\x67\x69l\x65R\x61nge\x43o\x6dmiss\x69onRat\x65\x73",1,1,1,1);AgileInstaller::update_access(${${"\x47\x4cO\x42A\x4c\x53"}["\x6c\x66\x62\x72\x6f\x66\x6bl\x6b"]},"A\x67i\x6ceRa\x6e\x67e\x43\x6fmmi\x73\x73i\x6f\x6eRa\x74es",1,0,0,0);if(!AgileInstaller::create_tab("A\x63co\x75\x6e\x74\x20H\x69s\x74o\x72\x79","Ag\x69\x6ce\x43o\x6dm\x69\x73\x73i\x6fn\x73",(_PS_VERSION_>"\x31.\x35"?"\x41dmi\x6eP\x61r\x65n\x74Cu\x73\x74om\x65\x72":"\x41dm\x69\x6eC\x75\x73\x74o\x6de\x72\x73"),$this->name))return false;AgileInstaller::init_tab_prmission_for_existing_profiles("A\x67i\x6c\x65\x43\x6f\x6dmi\x73s\x69o\x6es",1,1,1,1);AgileInstaller::update_access(${$ilhohpdmlk},"\x41\x67il\x65C\x6fm\x6d\x69\x73s\x69\x6f\x6es",1,0,0,0);if(!AgileInstaller::create_tab("Acc\x6f\x75\x6e\x74\x20\x42\x61\x6can\x63\x65","Ag\x69\x6c\x65Co\x6d\x6diss\x69\x6f\x6eB\x61\x6ca\x6e\x63e\x73",(_PS_VERSION_>"1\x2e5"?"Admin\x50a\x72ent\x43\x75\x73\x74o\x6d\x65\x72":"A\x64\x6d\x69\x6eC\x75s\x74\x6f\x6d\x65rs"),$this->name))return false;AgileInstaller::init_tab_prmission_for_existing_profiles("\x41g\x69\x6ce\x43o\x6d\x6d\x69ssi\x6f\x6e\x42\x61l\x61n\x63\x65\x73",1,1,1,1);AgileInstaller::update_access(${${"\x47LO\x42ALS"}["\x6c\x66\x62\x72\x6f\x66\x6bl\x6b"]},"A\x67ile\x43\x6f\x6dmi\x73si\x6fnB\x61\x6ca\x6ec\x65s",1,0,0,0);Db::getInstance()->Execute("UP\x44\x41\x54\x45\x20"._DB_PREFIX_."\x73el\x6ce\x72_comm\x69ssio\x6e\x20\x53\x45\x54 rec\x6f\x72\x64\x5ftype\x3d1\x302 \x57\x48\x45RE re\x63o\x72d_\x74y\x70e\x3d1\x30\x31 A\x4e\x44 r\x65\x63\x6frd_bal\x61nc\x65\x3c0");Db::getInstance()->Execute("U\x50DAT\x45\x20"._DB_PREFIX_."s\x65l\x6c\x65\x72\x5f\x63o\x6d\x6di\x73si\x6fn SET \x72e\x63o\x72\x64\x5f\x74\x79\x70\x65\x3d10\x31\x20\x57H\x45R\x45\x20r\x65co\x72d_t\x79pe\x3d1\x302\x20AN\x44\x20\x72ecor\x64_bal\x61\x6ece>0");Db::getInstance()->Execute("\x55P\x44\x41\x54E "._DB_PREFIX_."\x73el\x6cer\x5f\x63ommi\x73s\x69on\x20\x53ET\x20\x72ec\x6frd_\x74ype\x3d3\x20\x57\x48ER\x45\x20rec\x6frd\x5f\x74\x79\x70\x65=\x30");Autoload::getInstance()->generateIndex();$this->prepareDefaultCommissionSetting();return true;}public function uninstall(){if(!parent::uninstall())return false;AgileInstaller::delete_tab("Ag\x69\x6ceC\x6fm\x6d\x69ssio\x6es");AgileInstaller::delete_tab("\x41g\x69le\x42\x61\x73eCom\x6d\x69s\x73\x69\x6f\x6eR\x61t\x65s");AgileInstaller::delete_tab("Agi\x6c\x65Range\x43ommi\x73s\x69\x6fnRat\x65s");AgileInstaller::delete_tab("\x41\x67i\x6ce\x43\x6fm\x6d\x69ssio\x6eBa\x6cance\x73");return true;}public function getContent(){$wqzmgq="\x68\x65\x61\x6c\x74\x68_che\x63\x6b";global$cookie;include_once(_PS_ROOT_DIR_."/\x6d\x6fdul\x65\x73/\x61\x67\x69le\x6dultiplese\x6cler/\x61\x67i\x6c\x65\x6du\x6c\x74ip\x6c\x65s\x65ll\x65r\x2e\x70\x68p");$this->_html="<\x682\x3e".$this->displayName."</h2\x3e";$vnevjvrp="h\x65\x61\x6c\x74\x68_\x63\x68\x65c\x6b";${${"GL\x4f\x42\x41\x4c\x53"}["\x67\x66s\x73\x6b\x6bt\x69"]}=AgileInstaller::detect_admin_folder($_SERVER["SCR\x49PT_F\x49L\x45NA\x4d\x45"]);${$wqzmgq}=AgileInstaller::install_health_check(self::${${"G\x4c\x4fBALS"}["us\x6e\x77\x76kk\x6c\x6c"]},$this->name,${${"\x47LO\x42\x41\x4c\x53"}["gfs\x73\x6bkt\x69"]});if(!empty(${$vnevjvrp}))$this->_html.=${${"\x47LO\x42\x41LS"}["\x68doe\x73\x70\x73u"]};$this->_html.=AgileInstaller::show_agile_links();if(Tools::isSubmit("s\x75b\x6di\x74Set\x74\x69n\x67")){$kuukkhdw="\x70\x61\x79\x70\x61\x6c_e\x6d\x61\x69\x6c";${${"\x47LO\x42\x41\x4c\x53"}["\x62kkib\x70"]}=Tools::getValue("i\x64_o\x72d\x65\x72_st\x61te\x5f\x72\x74_c\x6fm\x6dissi\x6fn");${"\x47\x4cO\x42\x41\x4c\x53"}["\x65\x62s\x61i\x78gf\x62\x62\x73"]="\x63o\x6dm\x69ssi\x6f\x6e_\x63\x75r\x72\x65n\x63\x79";$wrvtylhapx="\x76\x6f\x75\x63\x68\x65\x72\x5f\x63\x6f\x73\x74";Configuration::updateValue("ASC_R\x54_\x43OM\x4d\x49SSI\x4f\x4e\x5f\x41T",${${"\x47\x4cO\x42A\x4c\x53"}["\x62k\x6b\x69\x62\x70"]});${"\x47LOB\x41\x4c\x53"}["\x66ewl\x77\x61\x72"]="\x70\x61\x79pa\x6c_\x73a\x6e\x64\x62o\x78";${"\x47LO\x42A\x4c\x53"}["\x6d\x62\x71\x6fvq\x76t\x66"]="p\x61\x79\x70\x61\x6c\x5f\x68\x65\x61\x64er";$xgwaqyimmkm="v\x6f\x75\x63\x68\x65\x72\x5f\x63\x6fs\x74";$ghollx="\x63o\x6dm\x69s\x73\x69\x6f\x6e\x5fc\x75\x72r\x65\x6ecy";${${"\x47L\x4f\x42A\x4c\x53"}["ebsa\x69xg\x66\x62\x62\x73"]}=intval(Tools::getValue("c\x6fmmissio\x6e\x5f\x63u\x72re\x6ec\x79"));Configuration::updateValue("A\x53C_COM\x4dISSI\x4f\x4e\x5f\x43U\x52\x52E\x4eCY",${$ghollx});$zhbbbyiin="p\x61\x79\x70\x61\x6c\x5f\x65m\x61il";${$kuukkhdw}=Tools::getValue("\x70ayp\x61l\x5fem\x61i\x6c");Configuration::updateValue("\x41\x53C\x5fPA\x59\x50A\x4c\x5f\x45MA\x49L",${$zhbbbyiin});${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6d\x79\x65\x65\x66c\x70\x6fc"]}=Tools::getValue("\x70a\x79pal_h\x65a\x64\x65r");Configuration::updateValue("\x41SC\x5f\x50A\x59\x50AL_\x48\x45\x41\x44\x45\x52",${${"\x47\x4c\x4f\x42\x41\x4cS"}["m\x62q\x6f\x76\x71v\x74\x66"]});${${"\x47LO\x42\x41L\x53"}["\x67\x70\x62z\x70d\x66s\x75\x6b"]}=intval(Tools::getValue("p\x61y\x70\x61l_s\x61\x6ed\x62o\x78"));$ibcwyfieipp="s\x68\x69\x70\x70\x69\x6e\x67\x5f\x69n\x63\x6c\x75\x64e";Configuration::updateValue("A\x53\x43\x5f\x50\x41YP\x41L\x5fS\x41NDB\x4f\x58",${${"G\x4cO\x42A\x4c\x53"}["\x66ew\x6c\x77\x61\x72"]});${$ibcwyfieipp}=intval(Tools::getValue("s\x68i\x70pi\x6e\x67_i\x6e\x63\x6c\x75de"));Configuration::updateValue("\x41\x53\x43_\x53H\x49\x50P\x49\x4eG\x5fIN\x43LUDE",${${"\x47\x4cOB\x41\x4c\x53"}["\x75c\x78\x6a\x76\x6cc\x78euf"]});${$xgwaqyimmkm}=intval(Tools::getValue("v\x6f\x75\x63\x68\x65r\x5fc\x6f\x73t"));Configuration::updateValue("\x41\x53C\x5f\x56\x4fU\x43H\x45\x52_\x43O\x53T",${$wrvtylhapx});Configuration::updateValue("\x41\x53C_DE\x44UC\x54\x49\x4f\x4e\x5fC\x48\x4fI\x43E\x5f".AgileMultipleSeller::ORDER_ORIGIN_EBAY,intval(Tools::getValue("\x64\x65\x64u\x63ti\x6f\x6e_\x63\x68oi\x63e\x5f".AgileMultipleSeller::ORDER_ORIGIN_EBAY)));Configuration::updateValue("A\x53\x43_D\x45\x44U\x43\x54\x49\x4f\x4e\x5fC\x48OI\x43E_".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP,intval(Tools::getValue("de\x64uction_c\x68\x6fic\x65\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP)));$this->displayConf();}$this->displayForm();return$this->_html;}public function displayConf(){$this->_html.=$this->displayConfirmation($this->l('Settings updated'));}public function displayForm(){$deptsvgjbe="\x64\x65\x64\x75\x63\x74\x69\x6fn\x5flis\x74";${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6a\x78go\x61\x70\x74\x71"]="\x68\x65\x6c\x70\x65\x72";global$cookie;include_once(_PS_ROOT_DIR_."/modu\x6ce\x73/a\x67il\x65\x6dulti\x70l\x65se\x6c\x6cer/\x61g\x69l\x65m\x75\x6ct\x69pl\x65\x73el\x6c\x65\x72.\x70h\x70");$xooeka="\x63u\x72\x72\x65\x6e\x63\x69e\x73";${${"G\x4c\x4f\x42AL\x53"}["\x6c\x6as\x6c\x6c\x62c\x6d\x6f"]}=OrderState::getOrderStates((int)($cookie->id_lang));${$xooeka}=Currency::getCurrencies();${${"\x47L\x4fB\x41LS"}["dj\x74\x7a\x69l"]}=array();$tzyryhdgpdob="sta\x74\x65\x73";array_push(${${"G\x4cOBAL\x53"}["d\x6a\x74\x7a\x69l"]},array("\x69d"=>AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP,"\x76\x61l"=>1,"name"=>$this->l('Apply deductions to orders from this store'),));if(Module::isInstalled("\x70r\x65st\x61b\x61\x79")){${"\x47\x4c\x4fB\x41\x4c\x53"}["\x79\x63\x62i\x6c\x72\x74i\x76\x67\x6e\x7a"]="\x64\x65\x64u\x63\x74i\x6f\x6e\x5f\x6c\x69s\x74";array_push(${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x79\x63b\x69\x6c\x72\x74i\x76g\x6e\x7a"]},array("id"=>AgileMultipleSeller::ORDER_ORIGIN_EBAY,"\x76\x61l"=>1,"na\x6d\x65"=>$this->l('Apply deductions to orders from this store'),));}${${"\x47\x4cOB\x41\x4cS"}["\x63\x6bogr\x72\x73\x6fk\x79n\x78"]}=array("f\x6frm"=>array("l\x65\x67\x65\x6ed"=>array("\x74\x69tl\x65"=>$this->l('Seller Commision Settings'),"i\x6da\x67e"=>$this->_path."\x6co\x67o.g\x69\x66",),"\x69\x6epu\x74"=>array(array("t\x79\x70\x65"=>"t\x65\x78t","l\x61b\x65\x6c"=>$this->l('Store Paypal Email: '),"n\x61m\x65"=>"\x70\x61y\x70al_e\x6da\x69\x6c","desc"=>array($this->l('When seller chooses commissions, this Paypal account be used.'))),array("t\x79\x70e"=>"rad\x69o","\x6c\x61\x62el"=>$this->l('Sandbox mode: '),"na\x6de"=>"\x70a\x79pa\x6c\x5fs\x61\x6e\x64b\x6f\x78","\x76a\x6cues"=>array(array("\x69\x64"=>"\x70\x61\x79pal\x5f\x73an\x64bo\x78_yes","v\x61\x6c\x75e"=>1,"\x6c\x61\x62el"=>$this->l('Yes')),array("i\x64"=>"\x70\x61ypa\x6c\x5f\x73a\x6e\x64bo\x78\x5f\x6eo","\x76al\x75\x65"=>0,"la\x62\x65l"=>$this->l('No'),),),),array("\x74\x79p\x65"=>"te\x78\x74","l\x61\x62el"=>$this->l('Paypal Header Image: '),"\x6e\x61\x6d\x65"=>"pa\x79\x70al_\x68ead\x65r",),array("\x74y\x70e"=>"\x73\x65l\x65ct","l\x61\x62el"=>$this->l('Commission Currency: '),"nam\x65"=>"\x63omm\x69\x73s\x69on_c\x75rre\x6ec\x79","\x6fpti\x6f\x6es"=>array("\x71\x75e\x72y"=>${${"GLO\x42\x41\x4c\x53"}["\x6b\x7agnb\x6f"]},"id"=>"\x69d\x5fcu\x72\x72\x65nc\x79","\x6e\x61m\x65"=>"\x6ea\x6de"),"d\x65\x73\x63"=>array($this->l('Please choose the currency that you used for commission payment and calculation.'),"<f\x6fn\x74 \x63ol\x6fr\x3d\x22r\x65d\"\x3e".$this->l('DO NOT change currency once you start doing business.')."\x3c/f\x6fn\x74\x3e\x26\x6e\x62\x73p\x3b".$this->l('Otherwise, the balance calculation will be incorrect.'))),array("\x74\x79\x70e"=>"\x73e\x6c\x65\x63t","l\x61b\x65\x6c"=>$this->l('Return commission at: '),"na\x6d\x65"=>"\x69\x64_o\x72\x64\x65\x72\x5fst\x61t\x65_\x72t_\x63\x6fm\x6d\x69s\x73\x69\x6fn","\x6f\x70tion\x73"=>array("q\x75\x65\x72y"=>${$tzyryhdgpdob},"i\x64"=>"\x69\x64\x5ford\x65r_sta\x74\x65","n\x61m\x65"=>"n\x61\x6d\x65"),"d\x65\x73\x63"=>array($this->l('In some cases, you will need to return the commission back to seller.'),$this->l('for example, an order is cancelled, item is returned, or refund is given.'),$this->l('You need to choose one order status for the module to return commssion back to seller.'),$this->l('Once the order reaches this status, the commission will be charged to seller.'))),array("\x74\x79p\x65"=>"\x72\x61d\x69\x6f","l\x61\x62\x65\x6c"=>$this->l('Shipping fee in commission: '),"\x6eame"=>"s\x68i\x70p\x69n\x67_i\x6e\x63\x6cu\x64\x65","v\x61lu\x65s"=>array(array("\x69d"=>"\x73hipp\x69\x6e\x67\x5finclu\x64e\x5fye\x73","\x76\x61\x6c\x75\x65"=>1,"\x6c\x61b\x65\x6c"=>$this->l('Yes')),array("\x69d"=>"\x73\x68\x69\x70p\x69ng\x5fincl\x75d\x65\x5f\x6e\x6f","\x76\x61lue"=>0,"l\x61be\x6c"=>$this->l('No'),),),"\x64\x65\x73\x63"=>array($this->l('Do you want shipping fees to be included in the commission fee(commission) calculation?'))),array("t\x79p\x65"=>"\x72\x61\x64\x69\x6f","l\x61\x62el"=>$this->l('Discount voucher handling: '),"\x6eame"=>"\x76\x6f\x75c\x68er_co\x73t","v\x61\x6cue\x73"=>array(array("i\x64"=>"\x76o\x75ch\x65r\x5fcost_s\x74or\x65","va\x6c\x75\x65"=>1,"\x6cab\x65\x6c"=>$this->l('At store\'s cost')." - ".$this->l('Store will take care of the cost.'),),array("\x69d"=>"v\x6f\x75\x63her\x5fco\x73\x74\x5f\x73eller","\x76al\x75\x65"=>0,"\x6ca\x62el"=>$this->l('At seller\'s cost')." - ".$this->l('Sellers will share the cost by percentage of amount of the products in an order. '),),),"d\x65\x73c"=>array($this->l('All vouchers belong to store level, including vouchers converted from customer loyalty points.'))),array("\x74yp\x65"=>"\x63\x68\x65c\x6bbo\x78","\x6cab\x65l"=>$this->l('Deduction Handling: '),"\x6eam\x65"=>"\x64educt\x69on_\x63\x68\x6fice","valu\x65\x73"=>array("\x71\x75ery"=>${$deptsvgjbe},"\x69d"=>"\x69d","name"=>"\x6eam\x65"),"d\x65\x73c"=>array($this->l('You deduct a percentage (for example 10%) from total sale amount, apply 90% of total for commission calculation.'),$this->l('You must specify the deduction rate in the Commission Fee setting in "Customer"->"Commission Fees" tab.'))),),"\x73u\x62mi\x74"=>array("t\x69tle"=>$this->l('Save'),)));${${"GL\x4f\x42A\x4cS"}["\x6ax\x67\x6f\x61\x70\x74\x71"]}=new HelperForm();$helper->show_toolbar=false;$helper->table=$this->name;${${"\x47\x4c\x4fBA\x4c\x53"}["\x6fsvnb\x63\x79\x65\x75of"]}=new Language((int)Configuration::get("\x50\x53\x5fL\x41\x4eG_\x44EF\x41\x55\x4cT"));$helper->default_form_language=$lang->id;$helper->module=$this;$helper->allow_employee_form_lang=Configuration::get("PS_\x42\x4f_\x41L\x4cOW_\x45\x4d\x50LO\x59\x45\x45_F\x4f\x52M\x5f\x4cANG")?Configuration::get("PS_\x42O_\x41LL\x4fW_\x45MP\x4cOYE\x45_\x46ORM_\x4cA\x4eG"):0;$helper->identifier=$this->identifier;$helper->submit_action="sub\x6d\x69tS\x65\x74\x74in\x67";$helper->currentIndex=$this->context->link->getAdminLink("A\x64mi\x6e\x4do\x64\x75l\x65s",false)."&\x63\x6f\x6ef\x69gu\x72e\x3d".$this->name."\x26\x74ab_mo\x64ul\x65=".$this->tab."&module_n\x61\x6d\x65=".$this->name;$hqjiglhgv="\x66\x69el\x64s\x5ff\x6fr\x6d";$helper->token=Tools::getAdminTokenLite("\x41\x64\x6din\x4dod\x75le\x73");$helper->tpl_vars=array("\x66\x69\x65\x6cd\x73_v\x61lu\x65"=>$this->getConfigFieldsValues(),"\x6c\x61\x6egu\x61\x67es"=>$this->context->controller->getLanguages(),"\x69d_\x6can\x67u\x61ge"=>$this->context->language->id);$this->_html.=$helper->generateForm(array(${$hqjiglhgv}));}public function getConfigFieldsValues(){${"\x47\x4c\x4f\x42\x41L\x53"}["c\x72\x6co\x70\x6a\x71br\x65\x63\x6d"]="\x63\x6f\x6e\x66";${${"\x47\x4cO\x42\x41\x4cS"}["\x72\x79\x66\x6bng\x64\x61\x63\x7a\x74o"]}=array("A\x53C_\x50AY\x50AL\x5f\x45\x4d\x41IL","AS\x43_\x50A\x59\x50\x41\x4c\x5fS\x41N\x44\x42OX","A\x53C\x5fPA\x59P\x41L_\x48\x45\x41\x44E\x52","ASC\x5fC\x4fM\x4dIS\x53\x49O\x4e_C\x55\x52\x52E\x4eCY","A\x53\x43_R\x54\x5fC\x4fMM\x49SS\x49\x4fN_\x41\x54","ASC\x5fS\x48\x49\x50\x50IN\x47\x5fINC\x4cU\x44E","\x41\x53C\x5f\x56OU\x43\x48ER_\x43OS\x54","\x41\x53C_\x44ED\x55C\x54\x49ON_CH\x4fI\x43E\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP,"A\x53\x43_\x44E\x44U\x43\x54I\x4fN_CHOIC\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_EBAY);${"\x47\x4cOB\x41\x4c\x53"}["\x63qs\x61\x68\x6b\x6c"]="c\x6f\x6e\x66";${"\x47L\x4f\x42\x41\x4c\x53"}["wciji\x75\x71e\x73"]="\x63\x6f\x6e\x66";${"\x47L\x4fB\x41\x4c\x53"}["\x63\x61\x67s\x79\x75x"]="c\x6fn\x66\x5fke\x79\x73";$tiqijytt="\x63\x6fn\x66";${"\x47LO\x42\x41L\x53"}["\x6d\x69ix\x64\x73\x76"]="\x63\x6f\x6e\x66";$blbqirzl="c\x6fn\x66";${${"G\x4c\x4fB\x41\x4c\x53"}["\x71\x6fgs\x6az\x6b"]}=Configuration::getMultiple(${${"G\x4c\x4f\x42\x41L\x53"}["\x63\x61\x67\x73\x79u\x78"]});$hsopkjqfb="co\x6e\x66";${"\x47LO\x42\x41L\x53"}["\x72\x6a\x7a\x69i\x66\x61"]="\x63\x6fn\x66";return array("\x70\x61yp\x61\x6c_ema\x69l"=>Tools::getValue("\x70\x61y\x70\x61\x6c_\x65ma\x69l",array_key_exists("ASC\x5fPAYPAL\x5fEM\x41I\x4c",${${"GL\x4f\x42A\x4c\x53"}["\x72\x6a\x7aii\x66a"]})?${${"\x47\x4cO\x42\x41\x4c\x53"}["\x63\x71sa\x68\x6b\x6c"]}["\x41\x53\x43_\x50A\x59PA\x4c_\x45M\x41IL"]:""),"\x70\x61\x79p\x61\x6c_\x73\x61\x6edbox"=>Tools::getValue("\x70\x61\x79p\x61l\x5f\x73andb\x6f\x78",array_key_exists("ASC_PAY\x50\x41\x4c\x5f\x53AND\x42O\x58",${${"\x47\x4cOB\x41\x4c\x53"}["m\x69i\x78ds\x76"]})?${$tiqijytt}["\x41SC_P\x41\x59\x50\x41\x4c_S\x41N\x44B\x4f\x58"]:""),"\x70\x61yp\x61\x6c\x5f\x68ea\x64\x65r"=>Tools::getValue("\x70a\x79p\x61\x6c\x5fh\x65\x61\x64\x65r",array_key_exists("\x41\x53\x43_\x50A\x59\x50\x41\x4c\x5f\x48\x45A\x44E\x52",${${"\x47\x4cOBA\x4c\x53"}["\x77\x63i\x6aiu\x71\x65s"]})?${${"\x47\x4cO\x42\x41L\x53"}["q\x6fgs\x6az\x6b"]}["ASC_\x50\x41Y\x50A\x4c\x5f\x48EAD\x45R"]:""),"\x63\x6fmm\x69\x73si\x6f\x6e\x5fcurren\x63\x79"=>Tools::getValue("\x63\x6f\x6dm\x69ss\x69\x6f\x6e_c\x75rre\x6e\x63y",array_key_exists("A\x53\x43\x5f\x43OMMISSIO\x4e\x5f\x43\x55RRENCY",${${"\x47L\x4fB\x41\x4c\x53"}["q\x6fg\x73j\x7a\x6b"]})?${${"G\x4c\x4f\x42AL\x53"}["q\x6fg\x73\x6azk"]}["AS\x43_\x43\x4f\x4dMI\x53\x53\x49\x4fN\x5f\x43\x55R\x52\x45NCY"]:""),"\x69d\x5f\x6fr\x64er_s\x74at\x65_rt_co\x6d\x6d\x69s\x73i\x6fn"=>Tools::getValue("\x69d_\x6f\x72de\x72\x5f\x73\x74a\x74\x65\x5f\x72t_\x63\x6f\x6dmi\x73si\x6fn",array_key_exists("\x41\x53C_\x52T_\x43\x4fMM\x49\x53\x53IO\x4e_\x41\x54",${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x71\x6fgs\x6a\x7ak"]})?${${"\x47\x4cOBA\x4c\x53"}["\x71\x6f\x67\x73j\x7a\x6b"]}["\x41SC_RT\x5fC\x4fMMIS\x53\x49ON_A\x54"]:""),"s\x68\x69ppi\x6e\x67\x5f\x69\x6eclud\x65"=>Tools::getValue("\x73\x68\x69pping_i\x6e\x63l\x75de",array_key_exists("\x41\x53\x43\x5fSHIPPIN\x47\x5fIN\x43\x4c\x55DE",${${"G\x4c\x4f\x42AL\x53"}["q\x6f\x67s\x6a\x7a\x6b"]})?${${"\x47\x4cO\x42\x41\x4c\x53"}["\x71\x6f\x67\x73\x6a\x7ak"]}["ASC\x5fS\x48I\x50\x50IN\x47_\x49\x4eC\x4c\x55\x44\x45"]:""),"\x76o\x75\x63h\x65\x72_cost"=>Tools::getValue("vouc\x68\x65r\x5fc\x6f\x73\x74",array_key_exists("A\x53C\x5fV\x4f\x55CHE\x52\x5f\x43\x4f\x53T",${$blbqirzl})?${${"G\x4c\x4fBA\x4c\x53"}["qo\x67\x73\x6a\x7a\x6b"]}["\x41\x53C_V\x4fU\x43\x48\x45\x52\x5fC\x4f\x53T"]:""),"\x64edu\x63\x74\x69o\x6e\x5f\x63\x68\x6fi\x63e_".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP=>Tools::getValue("deductio\x6e_\x63h\x6f\x69ce_".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP,intval(array_key_exists("A\x53C\x5f\x44E\x44U\x43\x54I\x4f\x4e\x5f\x43HO\x49C\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP,${${"\x47\x4cO\x42\x41LS"}["\x63rl\x6f\x70j\x71b\x72\x65\x63\x6d"]})?${${"G\x4cOB\x41L\x53"}["\x71\x6f\x67\x73\x6az\x6b"]}["\x41S\x43_\x44E\x44\x55\x43TI\x4f\x4e_C\x48\x4f\x49\x43\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP]:"")),"de\x64\x75\x63ti\x6fn\x5fcho\x69\x63e\x5f".AgileMultipleSeller::ORDER_ORIGIN_EBAY=>Tools::getValue("ded\x75\x63\x74i\x6f\x6e\x5f\x63\x68o\x69\x63e_".AgileMultipleSeller::ORDER_ORIGIN_EBAY,intval(array_key_exists("\x41\x53\x43_\x44\x45DU\x43\x54\x49O\x4e\x5f\x43H\x4f\x49C\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_EBAY,${${"G\x4c\x4f\x42A\x4cS"}["\x71\x6fgsj\x7ak"]})?${$hsopkjqfb}["ASC\x5f\x44EDU\x43\x54\x49\x4fN_\x43HOI\x43\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_EBAY]:"")),);}public function displayErrors(){$yawjolxiuz="\x6e\x62\x45\x72ro\x72\x73";${"\x47LOB\x41L\x53"}["j\x62d\x64\x67\x6d\x79\x64\x6c\x6ff"]="n\x62\x45\x72ro\x72\x73";${"GL\x4f\x42\x41\x4cS"}["\x75\x6a\x76p\x74dp"]="nb\x45r\x72\x6fr\x73";${$yawjolxiuz}=sizeof($this->_postErrors);$sbkiwrh="\x65\x72r\x6fr";$wgodqh="er\x72\x6f\x72";$this->_html.="\n\t\t<di\x76\x20cla\x73\x73\x3d\x22\x61le\x72t \x65rr\x6fr\">\n\t\t\t<\x68\x33>".(${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x72\x78\x79r\x77m\x6d\x69\x6f"]}>1?$this->l('There are'):$this->l('There is'))."\x20".${${"G\x4c\x4f\x42A\x4c\x53"}["\x6a\x62\x64\x64g\x6dyd\x6c\x6f\x66"]}."\x20".(${${"\x47L\x4f\x42A\x4c\x53"}["\x75\x6a\x76\x70\x74\x64\x70"]}>1?$this->l('errors'):$this->l('error'))."</\x683\x3e\n\t\t\t\x3co\x6c>";foreach($this->_postErrors AS${$wgodqh})$this->_html.="\x3c\x6c\x69\x3e".${$sbkiwrh}."\x3c/\x6ci\x3e";$this->_html.="\n\t\t\t</\x6fl>\n\t\t</d\x69\x76>";}public static function createSellerCommission($order,$order_origin=0){if(!Module::isInstalled("a\x67\x69\x6c\x65\x6du\x6ct\x69\x70\x6ces\x65\x6cler"))return;$jkxcbtlbuly="\x61\x66t\x65\x72_\x64i\x73c\x6fun\x74";require_once(dirname(__FILE__)."/../agile\x6du\x6ct\x69\x70l\x65\x73e\x6cle\x72/agi\x6c\x65\x6d\x75ltipl\x65s\x65\x6cl\x65r.\x70\x68\x70");$higtrmjtebhk="\x73e\x6c\x6ce\x72\x5f\x73al\x65\x73\x5f\x6f\x72i\x67\x69\x6e\x61\x6c";require_once(dirname(__FILE__)."/Selle\x72\x43o\x6d\x6dis\x73\x69\x6fn.ph\x70");$npfgbbl="\x69\x6e\x63\x6cud\x65_\x73\x68\x69\x70pi\x6e\x67";$hkelesfx="\x73el\x6cer_\x73\x61\x6c\x65s\x5f4\x63\x6fm";${"\x47L\x4fB\x41L\x53"}["x\x78\x78\x63o\x74p\x62le\x63\x77"]="\x73\x65l\x6c\x65\x72_sa\x6c\x65\x73_4\x63o\x6d";$xrhclkouoox="se\x6cl\x65\x72_s\x61l\x65\x73";$odawgyenlof="\x61\x66te\x72\x5f\x64\x69\x73c\x6f\x75\x6e\x74";require_once(dirname(__FILE__)."/Ba\x73\x65\x43o\x6d\x6dis\x73i\x6fn\x52\x61te.\x70\x68\x70");require_once(dirname(__FILE__)."/Ra\x6eg\x65Comm\x69s\x73\x69o\x6eRate\x2eph\x70");${"\x47\x4cO\x42A\x4c\x53"}["d\x68\x6e\x65da\x6a\x63"]="\x63\x75\x72\x72\x65\x6e\x63\x79\x5f\x63\x6f\x6d\x6di\x73\x73\x69\x6fn";${$npfgbbl}=(intval(Configuration::get("A\x53\x43\x5fS\x48\x49PPI\x4eG_I\x4eC\x4cUDE"))==1);${$odawgyenlof}=(intval(Configuration::get("\x41\x53\x43\x5fVO\x55\x43HER_\x43\x4f\x53T"))==self::VOUCHER_COST_AT_SELLER);${$hkelesfx}=AgileMultipleSeller::get_seller_sales_from_order($order->id,${${"\x47\x4cO\x42\x41L\x53"}["\x6a\x64\x67q\x69\x6f\x61\x73np\x72"]},${$jkxcbtlbuly},false);${$higtrmjtebhk}=AgileMultipleSeller::get_seller_sales_from_order($order->id,true,${${"\x47L\x4f\x42\x41\x4c\x53"}["\x64\x77\x74\x6f\x71m\x6e"]},true);${${"\x47\x4c\x4fB\x41L\x53"}["dhn\x65\x64\x61\x6a\x63"]}=new Currency((int)Configuration::get("ASC\x5fCOM\x4d\x49\x53S\x49O\x4e_C\x55R\x52\x45\x4e\x43Y"));${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x71\x6c\x79\x6b\x68w\x73j"]}=new Currency($order->id_currency);foreach(${${"\x47\x4c\x4f\x42\x41LS"}["xx\x78c\x6ftpb\x6ce\x63w"]} AS${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x68fbi\x66\x72\x6c\x74l\x6c\x6d"]}=>${$xrhclkouoox}){$voggnboh="i\x64\x5f\x73\x65ller";${"G\x4cO\x42AL\x53"}["\x66\x76q\x66\x62\x76"]="\x63\x6fm\x6di\x73\x73\x69o\x6e_r\x61\x74e";${"GL\x4f\x42\x41\x4c\x53"}["d\x74\x6enx\x77\x73"]="\x69\x64_s\x65\x6c\x6ce\x72\x5f\x63om\x6d\x69\x73\x73i\x6f\x6e";self::log_message("i\x64_\x73\x65\x6c\x6ce\x72:$id_seller,\x20se\x6cl\x65\x72_\x73\x61\x6c\x65s:$seller_sales");${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x62\x6e\x78\x63\x72\x71\x63"]="\x69d\x5fs\x65\x6cl\x65\x72";${"G\x4cO\x42A\x4c\x53"}["\x62g\x65\x64bmhkq\x65f\x68"]="\x72\x61\x6e\x67e\x5f\x63\x6f\x6d\x6d\x69ssi\x6f\x6e";$vmpvduldmrp="i\x64_\x73\x65\x6c\x6c\x65r";$pwunuiy="s\x65l\x6c\x65\x72_\x66\x69\x6eal\x5fs\x61l\x65s";${"G\x4c\x4f\x42\x41\x4cS"}["s\x62\x6bl\x73qf\x79c\x77"]="\x69\x64_\x73el\x6c\x65\x72\x5fco\x6d\x6d\x69s\x73\x69\x6f\x6e";${"\x47\x4cOBA\x4cS"}["s\x70\x79i\x75m\x65p"]="co\x6d\x6d\x69\x73\x73\x69o\x6e\x5frat\x65";${"GLO\x42\x41\x4cS"}["\x7am\x6d\x65e\x69\x61"]="\x72\x61n\x67\x65\x5fc\x6f\x6dm\x69s\x73\x69\x6f\x6e";$zyimftil="\x73\x65\x6cl\x65\x72\x5fs\x61\x6c\x65\x73\x5f\x34c\x6fm";${"GL\x4fBAL\x53"}["v\x74d\x67w\x69\x78kpu\x77"]="sell\x65r\x5f\x66\x69\x6e\x61\x6c\x5fs\x61\x6c\x65\x73";${"\x47\x4cO\x42\x41LS"}["j\x79\x66va\x66\x61\x79u"]="\x69\x64\x5f\x73e\x6c\x6c\x65\x72";$finggjf="\x69d\x5f\x73\x65\x6c\x6c\x65r";if(intval(${$vmpvduldmrp})<=0)continue;$qocllcgvqdrt="\x64\x65\x64\x75\x63\x74\x69on\x5f\x72a\x74e";$xpjcxttmr="\x6frd\x65\x72\x5fo\x72\x69\x67\x69n";$bdnkimgr="\x62\x61\x73\x65_\x63\x6f\x6dmi\x73\x73\x69\x6f\x6e";$yjxfbqsojf="\x64\x65d\x75ct\x69o\x6e\x5fr\x61\x74e";${"\x47L\x4f\x42\x41\x4c\x53"}["ub\x75\x63\x74\x68\x6d"]="\x6f\x72d\x65\x72\x5f\x6f\x72\x69g\x69\x6e";${"G\x4c\x4f\x42\x41\x4c\x53"}["r\x76\x65\x71\x68\x79\x6b"]="se\x6c\x6c\x65\x72\x5f\x66\x69\x6ea\x6c\x5f\x73al\x65\x73\x5for\x69g\x69nal";${"\x47\x4c\x4f\x42AL\x53"}["\x76\x71\x76\x6du\x64\x73\x76\x71"]="ba\x73\x65\x5fc\x6f\x6dmiss\x69\x6fn";${${"\x47\x4cO\x42\x41L\x53"}["dtnnxws"]}=(int)SellerCommission::getCommissionRecordID($order->id,${$finggjf});${"GL\x4f\x42\x41\x4c\x53"}["yo\x66v\x79\x66\x64"]="\x69d\x5f\x73\x65lle\x72";if(${${"\x47LO\x42\x41\x4cS"}["\x73\x62\x6b\x6c\x73q\x66\x79\x63w"]}>0)continue;${$pwunuiy}=${${"\x47L\x4f\x42\x41L\x53"}["y\x72\x69\x6am\x71u\x76x\x72"]}*$currency_commission->conversion_rate/$currency_order->conversion_rate;${"\x47\x4cOB\x41\x4cS"}["\x76ufk\x63b\x78k\x61w\x74"]="\x69\x64\x5f\x73ell\x65r";${${"G\x4cO\x42A\x4c\x53"}["\x78u\x69\x77\x62\x67so\x6d"]}=${${"\x47\x4cO\x42\x41\x4c\x53"}["\x6a\x6a\x78\x68i\x74\x65f"]}[${${"\x47LO\x42\x41\x4cS"}["h\x66\x62\x69frl\x74\x6c\x6cm"]}]*$currency_commission->conversion_rate/$currency_order->conversion_rate;${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x62g\x65\x64\x62mhkqe\x66\x68"]}=0;${$bdnkimgr}=0;${${"\x47LO\x42\x41LS"}["\x72\x77\x68\x62m\x70\x72\x78\x74\x73\x6d"]}=RangeCommissionRate::getRate((int)${${"\x47L\x4fBAL\x53"}["y\x6ff\x76yfd"]},${${"\x47L\x4f\x42\x41\x4c\x53"}["\x6f\x75\x63\x78\x62\x6c\x67v\x75\x6b\x78p"]},RangeCommissionRate::RATE_FOR_COMMISSION);${"\x47L\x4f\x42\x41\x4c\x53"}["\x75\x76\x71g\x61\x75\x6c\x64"]="\x6f\x72\x64\x65\x72\x5f\x6fr\x69g\x69n";self::log_message("co\x6ef\x69g\x5fe\x62a\x79=".intval(Configuration::get("A\x53\x43\x5f\x44\x45\x44\x55C\x54IO\x4e_CHOICE_".AgileMultipleSeller::ORDER_ORIGIN_EBAY)));self::log_message("\x63\x6fn\x66i\x67_s\x74\x6fre\x3d".intval(Configuration::get("\x41SC_DE\x44UC\x54\x49\x4fN\x5fC\x48O\x49C\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP)));$grgxil="\x69\x64_\x73\x65\x6c\x6c\x65\x72";if((${${"\x47L\x4f\x42\x41LS"}["u\x62\x75c\x74\x68m"]}==AgileMultipleSeller::ORDER_ORIGIN_EBAY AND intval(Configuration::get("\x41S\x43\x5f\x44\x45DUC\x54ION_C\x48OICE_".AgileMultipleSeller::ORDER_ORIGIN_EBAY))==1)OR(${${"\x47LO\x42A\x4cS"}["u\x76q\x67a\x75ld"]}==AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP AND intval(Configuration::get("ASC_\x44EDUCTION\x5fC\x48O\x49\x43\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP))==1))${$qocllcgvqdrt}=RangeCommissionRate::getRate((int)${${"\x47\x4cO\x42\x41LS"}["j\x79\x66\x76\x61f\x61\x79\x75"]},${${"G\x4c\x4f\x42\x41\x4c\x53"}["v\x74\x64g\x77\x69\x78\x6b\x70\x75\x77"]},RangeCommissionRate::RATE_FOR_DEDUCTION);else${$yjxfbqsojf}=0;self::log_message("de\x64\x75\x63\x74ion\x5f\x72\x61\x74e\x3d".${${"G\x4c\x4fBA\x4cS"}["\x74e\x77m\x69\x71\x66g\x6e"]});self::log_message("c\x6f\x6dm\x69s\x73io\x6e_\x72ate\x3d".${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x66\x76\x71\x66bv"]});${${"\x47\x4cO\x42\x41\x4c\x53"}["\x7am\x6d\x65e\x69a"]}=${$zyimftil}[${$grgxil}]*(1-${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x74\x65\x77\x6diqfgn"]}*0.01)*floatval(${${"G\x4c\x4f\x42\x41LS"}["\x73\x70\x79\x69\x75m\x65\x70"]})*0.01*$currency_commission->conversion_rate/$currency_order->conversion_rate;${${"\x47L\x4fB\x41\x4c\x53"}["pc\x67\x72t\x79\x6c\x62x"]}=BaseCommissionRate::getBaseCommissionRate(${${"\x47\x4c\x4fBAL\x53"}["v\x75fkcb\x78\x6ba\x77t"]});self::log_message("\x62\x61\x73e\x5f\x63omm\x69ss\x69\x6fn\x3d".${${"G\x4c\x4f\x42\x41\x4c\x53"}["v\x71\x76m\x75\x64svq"]});${${"\x47\x4c\x4f\x42AL\x53"}["\x6f\x6a\x6e\x75j\x62\x6b\x70y\x70\x75"]}=new SellerCommission();$seller_commission->id_seller=${$voggnboh};$seller_commission->id_order=$order->id;$seller_commission->id_currency=$currency_commission->id;$seller_commission->sales_amount=${${"\x47\x4c\x4f\x42AL\x53"}["\x72\x76\x65\x71\x68yk"]};$seller_commission->base_commission=${${"GLO\x42\x41L\x53"}["p\x63\x67\x72\x74\x79\x6c\x62\x78"]};$seller_commission->range_commission=${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["lspkq\x74\x6f"]};if((${$xpjcxttmr}==AgileMultipleSeller::ORDER_ORIGIN_EBAY AND intval(Configuration::get("\x41SC\x5fDEDUC\x54ION\x5f\x43HO\x49\x43E\x5f".AgileMultipleSeller::ORDER_ORIGIN_EBAY))==1)OR(${${"G\x4c\x4f\x42ALS"}["\x66\x67\x71\x72\x78\x66\x74"]}==AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP AND intval(Configuration::get("A\x53\x43_\x44\x45DU\x43\x54I\x4f\x4e\x5f\x43\x48OI\x43\x45\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP))==1))$seller_commission->deduction_amount=${${"G\x4c\x4f\x42ALS"}["n\x6f\x78\x77\x72\x64\x76\x70\x77u\x61"]}[${${"\x47L\x4fBA\x4cS"}["b\x6e\x78\x63r\x71c"]}]*${${"GL\x4f\x42\x41LS"}["\x74\x65\x77\x6di\x71\x66\x67\x6e"]}*0.01*$currency_commission->conversion_rate/$currency_order->conversion_rate;else$seller_commission->deduction_amount=0;$seller_commission->order_origin=${${"G\x4c\x4fB\x41L\x53"}["\x66\x67qrx\x66\x74"]};$seller_commission->seller_sales=${${"GL\x4f\x42\x41\x4c\x53"}["\x6f\x75\x63\x78bl\x67v\x75\x6b\x78p"]}-${${"\x47L\x4f\x42\x41\x4c\x53"}["pc\x67r\x74y\x6c\x62x"]}-${${"GL\x4f\x42\x41\x4c\x53"}["\x6cs\x70k\x71\x74\x6f"]}-$seller_commission->deduction_amount;$seller_commission->record_type=SellerCommission::RECORD_TYPE_BUYER_PAY_STORE;$seller_commission->record_balance=$seller_commission->seller_sales;$seller_commission->payment_txn_id="";$seller_commission->date_add=date("Y-m-d H:\x69:\x73");$seller_commission->memo=Mail::l('Order Confirmed');if(Module::isInstalled("a\x67ilep\x72e\x70a\x69d\x63\x72\x65\x64\x69t")){$fxpgmvksedh="\x74\x6fken\x73\x5f\x75\x73ed\x5f\x69n\x5f\x63\x61\x72t";require_once(_PS_ROOT_DIR_."/m\x6f\x64ul\x65\x73/agi\x6ce\x70\x72\x65p\x61idc\x72e\x64it/\x61\x67\x69\x6c\x65\x70\x72\x65pai\x64\x63\x72\x65d\x69t.p\x68p");${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x78we\x76\x71\x6a\x71\x75"]}=AgilePrepaidCredit::tokens_used_in_cart($order->id_cart);if(${$fxpgmvksedh}>0){${"\x47\x4c\x4f\x42\x41LS"}["h\x6b\x71\x66\x77ksy"]="t\x6f\x6b\x65\x6e\x73_\x76\x61\x6c\x75\x65";${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x68\x6b\x71\x66\x77\x6bs\x79"]}=AgilePrepaidCredit::ConvertTokens2Price(${${"GL\x4f\x42\x41LS"}["\x78w\x65\x76\x71\x6aq\x75"]},$currency_commission->id);$seller_commission->tokens_used=${${"\x47\x4c\x4f\x42\x41LS"}["\x69ir\x75\x62\x62j"]};}}$seller_commission->save();SellerCommission::updateRecordType($order->id,intval(Configuration::get("\x41\x47\x49\x4cE\x5f\x4d\x53_P\x41YM\x45N\x54_\x4d\x4f\x44\x45")),"");}}public static function cancelSellerCommission($order){if(!Module::isInstalled("ag\x69lem\x75\x6cti\x70lese\x6cl\x65r"))return;require_once(dirname(__FILE__)."/.\x2e/a\x67i\x6ce\x6dult\x69pl\x65selle\x72/ag\x69\x6ce\x6dul\x74i\x70\x6c\x65\x73\x65\x6c\x6c\x65\x72.\x70h\x70");require_once(dirname(__FILE__)."/S\x65l\x6ce\x72C\x6f\x6dmissi\x6f\x6e\x2e\x70h\x70");require_once(dirname(__FILE__)."/Ba\x73\x65\x43o\x6d\x6d\x69s\x73\x69\x6f\x6eRa\x74\x65.\x70\x68p");require_once(dirname(__FILE__)."/Ra\x6eg\x65\x43o\x6d\x6diss\x69\x6f\x6eRa\x74\x65.\x70hp");${${"\x47\x4cO\x42\x41\x4c\x53"}["\x6ef\x75\x62\x6d\x6b\x6f\x64ovq"]}=AgileMultipleSeller::getSellersByOrder($order->id);foreach(${${"\x47\x4cO\x42\x41\x4c\x53"}["nf\x75\x62m\x6bod\x6f\x76q"]} AS${${"\x47\x4cOB\x41L\x53"}["\x78\x78\x63\x63\x6f\x78\x78o"]}){$qplorup="\x69d\x5f\x73e\x6c\x6ce\x72";${"GL\x4f\x42\x41L\x53"}["\x6a\x6f\x6a\x71\x67\x6bc\x6f"]="sq\x6c";$jdbohi="\x73\x65\x6c\x6c\x65\x72_co\x6dm\x69s\x73\x69on";$ibsrbjxe="\x73\x65l\x6c\x65\x72\x5fc\x6f\x6d\x6d\x69\x73\x73\x69o\x6e";${"\x47\x4cO\x42\x41\x4cS"}["m\x6f\x65v\x66\x6b\x78\x78"]="\x69d\x5f\x73\x65l\x6cer\x5f\x63o\x6dm\x69s\x73\x69\x6fn";${$qplorup}=intval(${${"G\x4c\x4fBA\x4c\x53"}["\x78\x78cc\x6fx\x78o"]}["\x69d_em\x70lo\x79\x65\x65"]);${${"\x47L\x4fB\x41\x4c\x53"}["x\x6at\x64gms"]}="SELEC\x54 \x69d_s\x65\x6c\x6c\x65r\x5f\x63om\x6dis\x73\x69o\x6e \x46\x52OM\x20"._DB_PREFIX_."\x73\x65ll\x65\x72_c\x6fmm\x69ssion \x57HE\x52E\x20r\x65c\x6frd\x5ft\x79pe= ".SellerCommission::RECORD_TYPE_ORDER_CANCELLATION." AN\x44\x20\x69d_\x6fr\x64\x65\x72=".$order->id."\x20A\x4eD\x20\x69\x64\x5f\x73elle\x72=".${${"GL\x4f\x42AL\x53"}["\x68\x66b\x69\x66r\x6c\x74\x6c\x6cm"]};${${"\x47\x4cOBAL\x53"}["y\x63\x64\x6f\x7a\x75y\x67"]}=intval(Db::getInstance()->getValue(${${"\x47\x4cOBAL\x53"}["\x6ao\x6a\x71\x67\x6bco"]}));${"G\x4c\x4f\x42A\x4cS"}["\x74ey\x79\x64\x78\x74\x72"]="id\x5fc\x61nc\x65\x6cl";if(${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x74\x65\x79\x79\x64x\x74\x72"]}>0)continue;${${"\x47\x4c\x4fB\x41LS"}["\x6d\x6f\x65\x76\x66k\x78\x78"]}=SellerCommission::getCommissionRecordID($order->id,${${"GLO\x42\x41\x4c\x53"}["\x68\x66\x62\x69\x66\x72\x6c\x74\x6c\x6cm"]});${$jdbohi}=new SellerCommission(${${"G\x4c\x4f\x42A\x4c\x53"}["\x6b\x70q\x6cf\x63v"]});if(Validate::isLoadedObject(${$ibsrbjxe})){$seller_commission->id=0;$seller_commission->record_type=SellerCommission::RECORD_TYPE_ORDER_CANCELLATION;$seller_commission->sales_amount=0-$seller_commission->sales_amount;$seller_commission->base_commission=0-$seller_commission->base_commission;$seller_commission->range_commission=0-$seller_commission->range_commission;$seller_commission->seller_sales=0-$seller_commission->seller_sales;$seller_commission->record_balance=0-$seller_commission->record_balance;$edvdvv="\x69\x64_s\x65\x6c\x6c\x65\x72";$seller_commission->deduction_amount=0-$seller_commission->deduction_amount;$seller_commission->memo=Mail::l('Order cancalled');$seller_commission->save();SellerCommission::updateBalance(${$edvdvv},$seller_commission->id);}}}public static function get_seller_commission_amount($id_seller,$sales_amount,$id_currency,$order_origin=0){${"\x47\x4c\x4f\x42A\x4c\x53"}["cw\x6f\x69t\x75\x6d\x66\x74"]="\x69d\x5f\x73e\x6c\x6ce\x72";$wiceucyormt="\x69\x64_\x73\x65\x6cl\x65\x72";$ewmmnaxyf="o\x72\x64\x65\x72\x5f\x6fr\x69g\x69\x6e";$ubvhulynwpdd="\x63u\x72ren\x63\x79\x5fco\x6d\x6d\x69\x73\x73\x69\x6fn";$qntsuejweuv="\x72\x61nge\x5f\x63\x6fm\x6d\x69\x73s\x69\x6fn";$uoxndd="\x69d_\x73\x65\x6cl\x65\x72";if(!intval(${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x63w\x6f\x69\x74\x75\x6d\x66\x74"]}))return-1;${"\x47L\x4f\x42\x41LS"}["\x64rq\x66ua\x64\x62aq\x6c"]="b\x61\x73e_co\x6d\x6di\x73\x73\x69\x6fn";include_once(_PS_ROOT_DIR_."/mod\x75les/\x61\x67\x69l\x65mul\x74ip\x6cesel\x6c\x65r/\x61g\x69\x6ce\x6du\x6c\x74i\x70\x6c\x65s\x65ll\x65r.ph\x70");require_once(dirname(__FILE__)."/Sel\x6cer\x43o\x6dmiss\x69on\x2e\x70\x68p");require_once(dirname(__FILE__)."/\x42aseCo\x6dmi\x73sio\x6eRa\x74e\x2e\x70hp");${"\x47L\x4fB\x41\x4cS"}["\x7a\x76\x61\x6d\x76\x71"]="\x63\x6f\x6dmi\x73\x73io\x6e\x5f\x72\x61\x74\x65";require_once(dirname(__FILE__)."/\x52\x61\x6egeC\x6fm\x6d\x69\x73sio\x6eR\x61te.\x70\x68p");${${"G\x4cO\x42A\x4c\x53"}["\x7a\x76\x61\x6dvq"]}=RangeCommissionRate::getRate((int)${$wiceucyormt},${${"G\x4cO\x42\x41\x4c\x53"}["o\x6a\x6d\x7a\x76\x6c\x76"]},RangeCommissionRate::RATE_FOR_COMMISSION);${"\x47\x4c\x4f\x42\x41\x4cS"}["pe\x76\x6ebe\x66\x73\x75v"]="\x73al\x65s_\x61m\x6f\x75nt";${"GL\x4f\x42\x41\x4c\x53"}["\x68\x6cm\x71\x69\x6e\x71hj\x74\x72"]="\x62\x61se\x5fc\x6fmm\x69\x73\x73i\x6f\x6e";${"\x47L\x4f\x42A\x4cS"}["\x63fk\x64\x6dih"]="\x72e\x74";${"\x47LO\x42A\x4c\x53"}["\x77o\x69vo\x64v"]="\x69d\x5f\x73\x65l\x6c\x65r";if((${$ewmmnaxyf}==AgileMultipleSeller::ORDER_ORIGIN_EBAY AND intval(Configuration::get("A\x53\x43_DE\x44\x55\x43T\x49O\x4e_\x43\x48\x4fI\x43E_".AgileMultipleSeller::ORDER_ORIGIN_EBAY))==1)OR(${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x66g\x71\x72\x78\x66t"]}==AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP AND intval(Configuration::get("\x41\x53\x43_DED\x55CT\x49\x4fN_C\x48O\x49CE\x5f".AgileMultipleSeller::ORDER_ORIGIN_PRESTASHOP))==1))${${"G\x4c\x4fB\x41L\x53"}["\x74\x65wmiq\x66g\x6e"]}=RangeCommissionRate::getRate((int)${$uoxndd},${${"\x47LO\x42\x41\x4cS"}["\x6f\x6a\x6d\x7av\x6c\x76"]},RangeCommissionRate::RATE_FOR_DEDUCTION);else${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["t\x65\x77\x6d\x69\x71f\x67n"]}=0;${${"\x47\x4c\x4fBA\x4c\x53"}["\x6c\x73\x70k\x71t\x6f"]}=${${"\x47LO\x42A\x4c\x53"}["p\x65v\x6e\x62\x65fs\x75\x76"]}*(1-${${"GL\x4f\x42\x41\x4c\x53"}["\x74\x65\x77\x6d\x69\x71f\x67\x6e"]}*0.01)*floatval(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x72\x77h\x62\x6d\x70rx\x74s\x6d"]})*0.01;${${"\x47\x4c\x4f\x42\x41L\x53"}["pc\x67\x72t\x79lb\x78"]}=BaseCommissionRate::getBaseCommissionRate(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["w\x6f\x69\x76\x6f\x64v"]});${$ubvhulynwpdd}=new Currency((int)Configuration::get("ASC_COMMI\x53\x53\x49\x4f\x4e\x5f\x43\x55RR\x45\x4eC\x59"));${${"\x47LO\x42\x41\x4c\x53"}["\x71c\x6f\x63\x73\x6e\x68\x75e\x68\x6b\x74"]}=new Currency(${${"\x47\x4c\x4fB\x41\x4cS"}["b\x62y\x63\x71g\x75\x74\x70"]});$ofjpfkxx="ret";${${"\x47\x4c\x4f\x42ALS"}["\x70\x63g\x72\x74yl\x62x"]}=${${"\x47\x4c\x4f\x42\x41\x4cS"}["h\x6cm\x71\x69\x6e\x71\x68\x6a\x74\x72"]}*$to_currency->conversion_rate/$currency_commission->conversion_rate;${${"\x47L\x4f\x42\x41\x4c\x53"}["\x63fk\x64mi\x68"]}=${${"\x47L\x4f\x42\x41L\x53"}["d\x72qf\x75\x61\x64b\x61\x71l"]}+${$qntsuejweuv};return${$ofjpfkxx};}public function getL($key){${${"\x47LO\x42A\x4cS"}["\x65\x70\x6eck\x66\x79"]}=array("\x43o\x6dm\x69\x73\x73\x69\x6f\x6e"=>$this->l('Commission'),"Seller S\x61\x6ces"=>$this->l('Seller Sales'),"S\x65\x6c\x6ce\x72"=>$this->l('Seller'),"I\x6e\x76ali\x64\x20p\x61y\x6d\x65n\x79 \x6bey"=>$this->l('Invalid paymeny key'),"\x49\x6eva\x6cid \x70a\x79\x6den\x74 re\x63\x6frd\x20\x74y\x70\x65"=>$this->l('Invalid payment record type'),"\x49\x6e\x76\x61li\x64 p\x61\x79m\x65nt\x20r\x65\x74\x75rn key"=>$this->l('Invalid payment return key'),"Invalid\x20\x73elle\x72\x20\x69\x64"=>$this->l('Invalid seller id'),"\x6d\x63_\x67r\x6fss"=>$this->l('Paypal key \'mc_gross\' not specified, can\'t control amount paid.'),"\x70a\x79me\x6et\x5fs\x74\x61\x74u\x73"=>$this->l('Paypal key \'payment_status\' not specified, can\'t control payment validity'),"pa\x79men\x74"=>$this->l('Payment: '),"\x63\x75st\x6f\x6d"=>$this->l('Paypal key \'custom\' not specified, can\'t rely to cart'),"t\x78n_id"=>$this->l('Paypal key \'txn_id\' not specified, transaction unknown'),"mc\x5f\x63ur\x72\x65n\x63y"=>$this->l('Paypal key \'mc_currency\' not specified, currency unknown'),"ca\x72t"=>$this->l('Cart not found'),"or\x64\x65\x72"=>$this->l('Order has already been placed'),"\x74\x72\x61\x6esac\x74\x69\x6fn"=>$this->l('Paypal Transaction ID: '),"ve\x72if\x69ed"=>$this->l('The PayPal transaction could not be VERIFIED.'),"\x63\x6f\x6e\x6ee\x63\x74"=>$this->l('Problem connecting to the PayPal server.'),"n\x6f\x6detho\x64"=>$this->l('No communications transport available.'),"s\x6fc\x6b\x65\x74me\x74\x68od"=>$this->l('Verification failure (using fsockopen). Returned: '),"\x63url\x6deth\x6f\x64"=>$this->l('Verification failure (using cURL). Returned: '),"\x63\x75\x72lmethod\x66ai\x6ced"=>$this->l('Connection using cURL failed'),"Pl\x65\x61s\x65\x20\x77\x61\x69t,\x20re\x64\x69rect\x69\x6e\x67 t\x6f\x20\x50\x61\x79\x70a\x6c\x2e\x2e\x2e\x20\x54\x68\x61\x6ek\x73."=>$this->l('Please wait, redirecting to Paypal... Thanks.'),"S\x6fr\x72\x79, \x77e\x20\x64\x6f n\x6f\x74\x20\x73\x68\x69p\x20to \x79\x6fu\x72 \x63\x6f\x75ntry."=>$this->l('Sorry, we do not ship to your country.'),"Canc\x65l"=>$this->l('Cancel'),"My\x20\x63\x61r\x74"=>$this->l('My cart'),"\x52\x65tur\x6e\x20t\x6f \x73\x68op"=>$this->l('Return to shop'),"\x43u\x72r\x65nc\x79 \x52\x65st\x72\x69c\x74\x69on:\x20(\x49\x6eval\x69\x64\x20curr\x65\x6e\x63\x79\x20\x72es\x74r\x69\x63\x74\x69\x6fn\x20s\x65tt\x69\x6e\x67\x20\x66\x6f\x72 \x74\x68is \x6dodule)"=>$this->l('Currency Restriction: (Invalid currency restriction setting for this module)'),"P\x61\x79\x70\x61\x6c\x20\x65r\x72o\x72: (\x69\x6ev\x61li\x64\x20or\x20\x75n\x64e\x66\x69\x6eed \x62us\x69\x6e\x65\x73\x73 \x61ccou\x6e\x74\x20emai\x6c)"=>$this->l('Paypal error: (invalid or undefined business account email)'),"\x52e\x63\x75r\x72ing\x20c\x79c\x6ce\x20er\x72\x6fr:\x20(\x69\x6ev\x61li\x64\x20or\x20\x72ecu\x72\x72\x69ng c\x79\x63\x6c\x65)"=>$this->l('Recurring cycle error: (invalid or recurring cycle)'),"\x4eo\x6e \x69\x6e\x74e\x72es\x74\x20\x74\x78n\x5fty\x70e:\x20(N\x6fne\x20\x69\x6et\x65\x72\x65st\x20t\x78\x6e\x5f\x74\x79\x70\x65,\x20\x69\x67no\x72\x65\x64)"=>$this->l('Non interest txn_type: (None interest txn_type, ignored)'),"Error \x63\x6fp\x79i\x6e\x67 \x63\x61\x72t: (E\x72ror occ\x75r\x65d w\x68en cop\x79in\x67 \x63ar\x74\x20\x66\x6f\x72 recu\x72ring p\x61\x79\x6de\x6et)"=>"E\x72\x72\x6f\x72\x20\x63\x6fpyi\x6e\x67\x20\x63\x61\x72\x74: (E\x72r\x6f\x72\x20occ\x75r\x65d\x20\x77\x68\x65n\x20cop\x79i\x6e\x67\x20\x63\x61rt for\x20r\x65\x63\x75\x72ring p\x61\x79\x6d\x65\x6e\x74)","\x50\x61\x79\x70a\x6c\x20e\x72r\x6fr: (\x69\x6e\x76\x61\x6ci\x64\x20ad\x64r\x65\x73s\x20o\x72 \x63\x75\x73\x74o\x6der)"=>$this->l('Paypal error: (invalid address or customer)'));return${${"GL\x4fBA\x4c\x53"}["\x65p\x6e\x63\x6b\x66\x79"]}[${${"\x47L\x4f\x42AL\x53"}["\x65f\x6fj\x6c\x62k"]}];}public function getSellerPaypalEmailAddress($id_seller){global$cart;require_once(_PS_ROOT_DIR_."/\x6d\x6f\x64\x75l\x65s/a\x67i\x6c\x65m\x75\x6ct\x69p\x6cesel\x6c\x65r/\x41\x67il\x65S\x65l\x6c\x65rPayment\x49\x6e\x66o\x2eph\x70");${"\x47\x4cO\x42\x41L\x53"}["\x73\x71g\x6a\x75k\x65\x71"]="pa\x79\x6d\x65\x6e\x74\x69\x6e\x66\x6f";${"G\x4c\x4fB\x41\x4c\x53"}["\x72f\x79l\x6d\x6e\x7a"]="\x69\x64\x5fs\x65ll\x65\x72";${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6a\x6bsp\x65\x67t\x6cvvf"]}=AgileSellerPaymentInfo::getForSellerByModuleName("agil\x65\x70\x61ypa\x6c",${${"G\x4cOBA\x4c\x53"}["\x72\x66\x79\x6c\x6d\x6e\x7a"]});if(!Validate::isLoadedObject(${${"GL\x4f\x42\x41L\x53"}["sqg\x6au\x6be\x71"]}))return"";return$paymentinfo->info1;}public function getPaypalUrl(){${"\x47L\x4fB\x41\x4c\x53"}["\x75\x67\x6d\x6fy\x6buq\x6f"]="\x70\x61y\x70\x61\x6c\x5f\x73a\x6e\x64b\x6f\x78";${"G\x4cO\x42\x41LS"}["\x63lft\x63\x73di"]="pa\x79\x70\x61\x6c\x5fs\x61\x6e\x64\x62ox";$wnsdosn="\x70a\x79pa\x6c_pro\x64u\x74i\x6fn";${${"G\x4c\x4fBALS"}["\x6c\x72\x63\x6bb\x6dliz"]}="h\x74\x74ps://ww\x77\x2e\x70\x61y\x70\x61l.\x63\x6f\x6d/\x63g\x69-bin/\x77\x65\x62\x73cr";${${"\x47\x4c\x4fBA\x4c\x53"}["u\x67m\x6f\x79ku\x71\x6f"]}="\x68\x74\x74ps://\x77w\x77\x2e\x73a\x6edb\x6fx\x2epa\x79p\x61l\x2ec\x6fm/\x63\x67i-b\x69\x6e/\x77e\x62s\x63r";return Configuration::get("\x41S\x43\x5fP\x41Y\x50A\x4c_SA\x4e\x44B\x4fX")?${${"\x47\x4c\x4f\x42\x41L\x53"}["\x63\x6cftcs\x64\x69"]}:${$wnsdosn};}public static function get_paycommission_url($params){${"\x47\x4c\x4f\x42\x41\x4cS"}["\x71\x63\x65\x76n\x6bl\x77"]="\x70\x61\x72\x61\x6d\x73";${"G\x4c\x4fB\x41\x4cS"}["\x63xw\x67\x78\x6e\x6a\x71\x75\x6a\x73"]="\x75\x72\x6c";$rmwmabluldx="\x70\x61\x72\x61ms";$fcaouiyvll="v\x61l";if(version_compare(_PS_VERSION_,"1\x2e5","\x3e="))return Context::getContext()->link->getModuleLink("\x61gile\x73el\x6ce\x72\x63o\x6d\x6d\x69\x73\x73\x69\x6fn","pa\x79\x63o\x6d\x6d\x69\x73\x73io\x6e",${$rmwmabluldx},true);${${"\x47LOBA\x4c\x53"}["\x7ay\x65\x68\x6dp\x6e\x71\x78\x63\x70\x76"]}=Tools::getShopDomainSsl(true,true).__PS_BASE_URI__."mo\x64\x75l\x65\x73/\x61gileselle\x72\x63\x6f\x6dmi\x73\x73ion/pay\x63\x6f\x6dmiss\x69o\x6e.\x70h\x70?";foreach(${${"G\x4cOBA\x4c\x53"}["q\x63\x65\x76n\x6b\x6c\x77"]} as${${"G\x4c\x4f\x42A\x4c\x53"}["\x65\x66\x6f\x6a\x6c\x62\x6b"]}=>${$fcaouiyvll}){${${"\x47L\x4f\x42\x41\x4c\x53"}["z\x79\x65\x68\x6d\x70\x6e\x71xc\x70\x76"]}.="&".${${"G\x4cO\x42A\x4c\x53"}["\x65\x66\x6f\x6al\x62\x6b"]}."=".${${"GLO\x42\x41L\x53"}["f\x67\x6e\x71\x69\x77f"]};}return${${"\x47L\x4f\x42\x41\x4c\x53"}["\x63x\x77\x67\x78\x6e\x6a\x71\x75j\x73"]};}public function process_paycommission(){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x74\x69\x72\x63\x68\x6e"]="a\x64d\x72\x65s\x73_ov\x65rr\x69\x64\x65";global$cookie,$cart,$smarty;$xkvixsjldfbn="\x72\x65\x63\x6f\x72\x64\x5f\x74\x79\x70\x65";${"G\x4c\x4fBA\x4c\x53"}["\x78\x71\x66pm\x71t"]="\x72ec\x6f\x72\x64_\x74\x79\x70e";${"GLOB\x41L\x53"}["\x79lv\x73\x67\x70r"]="pa\x79men\x74_\x6eame";$pvmlelnjvnfp="\x69d\x5f\x73\x65\x6cl\x65\x72";${"\x47\x4c\x4f\x42\x41L\x53"}["\x78\x67\x66\x69u\x78"]="r\x65\x63\x6fr\x64\x5f\x74\x79p\x65";$vcsmlbyg="\x69\x64_\x73\x65\x6c\x6ce\x72";$vbsescjh="\x72e\x74\x6b\x65\x79";${"\x47L\x4f\x42A\x4cS"}["p\x76\x68\x62\x64\x78\x70w\x63"]="tota\x6c";${${"\x47\x4cO\x42AL\x53"}["u\x66ek\x62pl"]}=intval(Tools::getValue("i\x73fr\x6f\x6et",0));${"\x47\x4cO\x42ALS"}["\x65\x6a\x6ak\x78\x6eb\x65j\x78\x62\x67"]="\x70a\x79\x65r\x5f\x69\x64";${${"GLO\x42\x41\x4cS"}["\x78\x71\x66\x70\x6d\x71\x74"]}=intval(Tools::getValue("\x72\x65\x63\x6f\x72d_t\x79\x70\x65"));${"G\x4cOB\x41L\x53"}["\x64\x67\x71l\x77\x64edm"]="\x70ay\x6b\x65y";if(${${"\x47L\x4f\x42A\x4c\x53"}["\x77\x68\x77\x61t\x63\x63"]}!=SellerCommission::RECORD_TYPE_STORE_PAY_SELLER AND${${"G\x4c\x4f\x42A\x4c\x53"}["x\x67f\x69u\x78"]}!=SellerCommission::RECORD_TYPE_SELLER_PAY_STORE){return$this->getL("In\x76\x61l\x69d\x20\x70\x61ym\x65nt record ty\x70e");}${"G\x4cO\x42\x41\x4c\x53"}["\x79\x6d\x78\x61\x72kpo\x6a"]="\x63\x6f\x75\x6e\x74r\x79";${${"\x47L\x4f\x42AL\x53"}["\x68\x66\x62\x69\x66r\x6c\x74ll\x6d"]}=intval(Tools::getValue("i\x64\x5fseller"));${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x68r\x62\x63\x6fu\x67\x71\x77"]}=new SellerInfo(SellerInfo::getIdBSellerId(${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x68\x66\x62i\x66r\x6c\x74\x6c\x6c\x6d"]}));$oijwff="r\x65\x63\x6f\x72\x64_\x74ype";${${"G\x4c\x4f\x42AL\x53"}["k\x6b\x72\x70\x79\x6e\x75"]}=new Employee(${$pvmlelnjvnfp});if(!Validate::isLoadedObject(${${"G\x4cO\x42\x41\x4c\x53"}["\x6bk\x72py\x6eu"]})OR$employee->id_profile!=Configuration::get("AGILE_\x4dS\x5fPR\x4f\x46\x49\x4c\x45_\x49\x44")){return$this->getL("I\x6eva\x6c\x69\x64\x20\x73e\x6c\x6cer\x20\x69d");}${${"\x47\x4c\x4f\x42A\x4cS"}["\x63\x6fe\x69\x6aft\x75\x77\x72\x6d"]}=Tools::encrypt(${$vcsmlbyg});$usjdyxpv="\x62\x75\x73i\x6e\x65\x73\x73";if(${${"\x47\x4c\x4fBALS"}["\x63oe\x69\x6a\x66\x74u\x77\x72m"]}!=Tools::getValue("\x70\x61y\x6bey")){return$this->getL("\x49\x6eval\x69\x64 paym\x65\x6ey key");}${"\x47L\x4f\x42AL\x53"}["q\x78\x67d\x73\x73cd"]="\x72\x65c\x6f\x72\x64\x5f\x74\x79\x70\x65";$lhdimay="b\x75\x73in\x65\x73\x73";${"\x47\x4cO\x42\x41\x4c\x53"}["\x78\x63\x75\x62\x6ai\x70f\x63\x68y"]="p\x61y\x6d\x65\x6e\x74\x5fna\x6d\x65";${${"\x47L\x4f\x42\x41\x4cS"}["r\x6c\x6a\x63\x79\x68\x77\x71\x6a\x78zf"]}=Tools::getValue("\x72\x65tk\x65y");if(${${"\x47\x4c\x4fBAL\x53"}["u\x66\x65\x6bbp\x6c"]}==0 AND empty(${$vbsescjh})){return$this->getL("\x49n\x76\x61lid\x20p\x61yment \x72etu\x72n k\x65y");}${${"G\x4c\x4f\x42\x41\x4c\x53"}["t\x69rc\x68\x6e"]}=0;${"\x47LO\x42AL\x53"}["\x7a\x76\x75t\x79\x6bp"]="i\x64_\x73\x65\x6c\x6ce\x72";${$lhdimay}="";${"\x47L\x4f\x42A\x4c\x53"}["\x72\x7a\x63\x6a\x67\x70\x73\x6a\x6b"]="\x70\x61y\x65\x72\x5f\x65\x6d\x61i\x6c";${${"G\x4c\x4f\x42\x41LS"}["\x66\x70\x6bd\x69\x78d\x6f\x69u"]}=NULL;${${"G\x4c\x4f\x42A\x4c\x53"}["jq\x76\x79f\x7a\x74\x75\x6a"]}="";${${"\x47\x4c\x4f\x42AL\x53"}["\x79\x6c\x76s\x67\x70\x72"]}="";if(${$xkvixsjldfbn}==SellerCommission::RECORD_TYPE_SELLER_PAY_STORE){$pjvejouqfq="\x69\x64_\x73e\x6c\x6c\x65\x72";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["lndo\x6e\x77x\x75"]="\x70\x61\x79\x6de\x6e\x74\x5f\x6e\x61\x6d\x65";${"G\x4cO\x42\x41L\x53"}["g\x67g\x6c\x6c\x6f\x6d\x74\x6c\x63"]="i\x64\x5fs\x65ll\x65r";${"GL\x4f\x42AL\x53"}["kq\x6dw\x79\x6c\x63n\x6d\x6d"]="\x70\x61\x79\x65r\x5fi\x64";$kkjukhezjpw="\x70aye\x72_\x65\x6d\x61\x69\x6c";${${"G\x4cOB\x41\x4c\x53"}["\x6cnd\x6f\x6e\x77\x78\x75"]}=$this->getL("Com\x6dission");${${"\x47\x4c\x4f\x42\x41LS"}["b\x72k\x7a\x79\x66c"]}=Configuration::get("\x41\x53C\x5f\x50A\x59\x50A\x4c\x5f\x45MA\x49\x4c");${${"\x47L\x4f\x42A\x4c\x53"}["\x72\x68vf\x6f\x7a"]}=new Country(intval(Configuration::get("\x50S_C\x4f\x55N\x54R\x59_DE\x46AU\x4c\x54")));${${"\x47LOB\x41L\x53"}["\x6a\x71\x76\x79\x66\x7a\x74uj"]}=Configuration::get("AS\x43_P\x41\x59P\x41L\x5fH\x45A\x44\x45\x52");${$kkjukhezjpw}=$this->getSellerPaypalEmailAddress(${${"GL\x4fB\x41\x4c\x53"}["\x67\x67\x67l\x6c\x6f\x6d\x74\x6cc"]});${${"\x47L\x4f\x42\x41LS"}["kq\x6dw\x79l\x63\x6e\x6dm"]}=$this->getL("Sel\x6c\x65r")."-".${$pjvejouqfq};}else if(${$oijwff}==SellerCommission::RECORD_TYPE_STORE_PAY_SELLER){${"G\x4c\x4fB\x41\x4c\x53"}["\x74\x79\x6cu\x69\x6e\x66"]="\x70a\x79m\x65\x6e\x74_n\x61\x6d\x65";${${"\x47LOBA\x4c\x53"}["ty\x6c\x75\x69\x6e\x66"]}=$this->getL("\x53\x65\x6cler\x20S\x61les");${${"\x47LO\x42\x41\x4cS"}["\x72\x68\x76\x66\x6f\x7a"]}=new Country($sellerInfo->id_country);${"\x47\x4cO\x42AL\x53"}["e\x75\x69\x73\x6ctz\x6edj"]="\x70\x61\x79\x65\x72_i\x64";${${"\x47L\x4f\x42\x41L\x53"}["\x62\x72\x6b\x7ayf\x63"]}=$this->getSellerPaypalEmailAddress(${${"\x47L\x4f\x42\x41\x4c\x53"}["\x68\x66\x62\x69f\x72\x6c\x74\x6c\x6c\x6d"]});${${"\x47\x4c\x4f\x42A\x4cS"}["n\x76\x69lb\x69\x62"]}=Configuration::get("A\x53C\x5fPAY\x50AL_\x45M\x41\x49\x4c");${${"\x47\x4c\x4fBA\x4c\x53"}["\x65\x75is\x6ct\x7an\x64j"]}=Configuration::get("P\x53\x5f\x53H\x4f\x50\x5f\x4eAME");}$gwpwprwwqpf="\x62\x75\x73\x69\x6e\x65\x73\x73";$hpevjzfbr="\x73\x65\x6c\x6c\x65\x72\x49\x6e\x66\x6f";if(empty(${$gwpwprwwqpf})OR!Validate::isEmail(${$usjdyxpv}))return$this->getL("P\x61ypal\x20\x65\x72\x72o\x72:\x20(\x69\x6eva\x6c\x69d \x6f\x72\x20unde\x66in\x65\x64 \x62\x75\x73\x69n\x65\x73\x73 \x61\x63c\x6f\x75nt\x20\x65\x6d\x61\x69\x6c)");${${"GL\x4f\x42\x41L\x53"}["\x65\x6fq\x69\x78\x69p\x6b"]}=new Currency(Configuration::get("ASC\x5fCOM\x4dIS\x53\x49ON_CUR\x52E\x4eC\x59"));if(!Validate::isLoadedObject(${${"G\x4cO\x42\x41\x4c\x53"}["\x65o\x71\x69\x78\x69\x70\x6b"]}))return$this->getL("C\x75\x72\x72en\x63\x79\x20\x52\x65st\x72\x69c\x74\x69o\x6e: (In\x76\x61l\x69d \x63urr\x65n\x63y \x72\x65s\x74\x72\x69ct\x69on\x20s\x65t\x74in\x67\x20\x66o\x72 \x74h\x69\x73\x20m\x6f\x64\x75\x6ce)");${"G\x4cO\x42A\x4cS"}["\x71l\x6c\x79xt\x75f"]="\x72\x65t\x75\x72\x6e\x5f\x75\x72l";${${"\x47\x4c\x4f\x42ALS"}["\x70\x76\x68bd\x78p\x77\x63"]}=Tools::getValue("\x61\x6do\x75nt\x5ft\x6f_p\x61y");if(${${"GL\x4fBA\x4cS"}["\x75\x66\x65\x6b\x62\x70\x6c"]}==0){${"GLO\x42\x41\x4c\x53"}["\x74\x74qr\x61\x68\x76xt\x69"]="\x72\x65\x74\x75\x72n_\x75rl";${${"GL\x4fB\x41\x4cS"}["\x74t\x71\x72a\x68\x76\x78\x74\x69"]}=Tools::getShopDomainSsl(true,true).__PS_BASE_URI__.Configuration::get("\x41\x47I\x4cE_\x4d\x53\x5f\x41D\x4d\x49N_FOLDE\x52\x5f\x4eAM\x45")."/\x69nd\x65x\x2e\x70\x68\x70?\x74ab\x3d\x41\x67\x69le\x43ommi\x73\x73\x69\x6fnB\x61\x6cances\x26to\x6b\x65\x6e\x3d{$retkey}";if(version_compare(_PS_VERSION_,"\x31.\x35","\x3e\x3d"))${${"G\x4c\x4fB\x41\x4cS"}["\x73\x74\x6cqx\x75\x73\x76\x78\x6b"]}=Tools::getShopDomainSsl(true,true).__PS_BASE_URI__.Configuration::get("A\x47I\x4cE\x5f\x4d\x53_\x41\x44\x4dIN_F\x4fL\x44ER_N\x41ME")."/i\x6e\x64\x65x\x2eph\x70?\x63o\x6et\x72\x6f\x6c\x6c\x65r=a\x67\x69\x6ce\x63o\x6d\x6di\x73\x73i\x6fn\x62\x61\x6c\x61n\x63\x65s&t\x6fken\x3d{$retkey}";}else{${${"\x47\x4c\x4f\x42\x41L\x53"}["\x73\x74\x6c\x71\x78\x75\x73vx\x6b"]}=Context::getContext()->link->getModuleLink("\x61g\x69l\x65mu\x6cti\x70le\x73\x65\x6cl\x65r","se\x6cle\x72\x73\x75\x6d\x6d\x61r\x79",array(),true);}$smarty->assign(array("\x72\x65\x64ire\x63t\x5f\x74\x65xt"=>$this->getL("Plea\x73\x65\x20w\x61\x69t,\x20\x72\x65\x64i\x72e\x63t\x69ng t\x6f \x50aypal\x2e.\x2e \x54h\x61n\x6b\x73\x2e"),"\x63an\x63e\x6c_t\x65\x78\x74"=>$this->getL("Ca\x6ec\x65\x6c"),"\x70\x61y\x6d\x65\x6e\x74_\x6ea\x6d\x65"=>${${"\x47\x4c\x4fBALS"}["\x78\x63\x75bj\x69p\x66c\x68\x79"]},"r\x65\x74\x75\x72\x6e\x5f\x74\x65\x78t"=>$this->getL("Re\x74u\x72\x6e to\x20s\x68\x6f\x70"),"\x70\x61\x79p\x61l\x5fu\x72\x6c"=>$this->getPaypalUrl(),"\x72\x65turn\x5f\x75rl"=>${${"\x47\x4cOBA\x4c\x53"}["\x71\x6cl\x79\x78\x74\x75\x66"]},"a\x64d\x72es\x73"=>${$hpevjzfbr},"co\x75\x6etry"=>${${"\x47\x4cO\x42\x41LS"}["\x79\x6dxa\x72\x6bpoj"]},"\x72et\x6b\x65\x79"=>${${"GLOB\x41\x4c\x53"}["\x72\x6cj\x63\x79h\x77qj\x78z\x66"]},"s\x74\x61\x74e"=>${${"G\x4c\x4f\x42AL\x53"}["\x66\x70k\x64\x69\x78d\x6f\x69u"]},"\x61d\x6din\x66\x6f\x6cde\x72"=>Configuration::get("\x41GIL\x45_M\x53\x5f\x41D\x4dI\x4e\x5f\x46\x4fL\x44ER\x5f\x4e\x41M\x45"),"\x61\x64\x64\x72e\x73\x73_o\x76\x65rri\x64\x65"=>${${"G\x4cO\x42\x41\x4c\x53"}["\x7aq\x6d\x6d\x79\x6ftc\x64\x69"]},"pa\x79er\x5fe\x6dail"=>${${"\x47L\x4f\x42\x41\x4cS"}["rz\x63\x6ag\x70\x73\x6a\x6b"]},"paye\x72\x5fi\x64"=>${${"G\x4c\x4fB\x41\x4c\x53"}["\x65\x6a\x6a\x6bx\x6eb\x65j\x78bg"]},"\x74\x6f\x74al"=>${${"\x47\x4cO\x42\x41L\x53"}["g\x63t\x70\x64ko"]},"\x62u\x73\x69n\x65ss"=>${${"\x47L\x4fBA\x4cS"}["\x62rkzy\x66c"]},"\x63urr\x65\x6ec\x79"=>${${"\x47\x4c\x4fB\x41L\x53"}["eo\x71i\x78\x69p\x6b"]},"\x69d\x5f\x73ell\x65r"=>intval(${${"\x47\x4cO\x42\x41L\x53"}["\x7avu\x74\x79\x6bp"]}),"\x70\x61\x79p\x61l\x5f\x69\x64"=>intval($this->id),"he\x61\x64e\x72"=>${${"\x47L\x4f\x42\x41L\x53"}["\x6aq\x76\x79\x66\x7a\x74uj"]},"\x70\x61\x79k\x65\x79"=>${${"\x47\x4cO\x42\x41LS"}["dgqlwded\x6d"]},"\x69n\x76\x6fi\x63e"=>${${"\x47\x4c\x4f\x42AL\x53"}["q\x78g\x64ss\x63\x64"]},"u\x72l"=>Tools::getHttpHost(true,true).__PS_BASE_URI__));return"";}public static function log_message($msg){$petjibsih="\x68\x61n\x64le";if(Agile_Seller_Commission_Logging!="on")return;${$petjibsih}=fopen(dirname(__FILE__)."/\x64\x65\x62ug.\x6cog","\x61+");if(!${${"\x47\x4c\x4f\x42ALS"}["eyew\x6a\x78\x73\x71\x6e\x6a\x6a"]})return;${"\x47\x4c\x4fB\x41\x4cS"}["jtj\x67\x66\x6d\x6a\x6c\x68"]="m\x73\x67";${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x63\x64ifc\x73\x7a"]}="";if(isset($_SERVER["H\x54TP_\x52\x45FE\x52\x45\x52"]))${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x63\x64\x69f\x63\x73\x7a"]}=$_SERVER["HT\x54\x50\x5fR\x45\x46\x45\x52\x45R"];fwrite(${${"G\x4c\x4f\x42\x41LS"}["\x65\x79\x65\x77\x6a\x78\x73\x71\x6ej\x6a"]},date("\x59-m-d H:i:\x73").",".${${"G\x4c\x4fBAL\x53"}["c\x64\x69\x66\x63\x73z"]}.",".${${"\x47L\x4fB\x41L\x53"}["j\x74\x6a\x67\x66m\x6a\x6ch"]}."\r\n");fclose(${${"\x47L\x4fBA\x4c\x53"}["ey\x65\x77\x6axsq\x6e\x6a\x6a"]});}private function prepareDefaultCommissionSetting(){$czfnkfmkmbrk="s\x71\x6c";include_once(_PS_ROOT_DIR_."/m\x6fdul\x65s/agil\x65\x73\x65\x6cl\x65\x72\x63o\x6dm\x69\x73s\x69o\x6e/B\x61se\x43ommi\x73s\x69o\x6eR\x61\x74e.php");include_once(_PS_ROOT_DIR_."/\x6do\x64ul\x65\x73/\x61\x67ilese\x6cle\x72c\x6fm\x6d\x69\x73si\x6fn/R\x61ng\x65\x43\x6f\x6d\x6di\x73\x73i\x6f\x6eR\x61\x74e\x2ep\x68p");${"\x47\x4c\x4fB\x41L\x53"}["or\x71\x76\x66o\x76"]="c\x6e\x74";$ajbheweebog="\x73q\x6c";${$czfnkfmkmbrk}="\x53\x45\x4c\x45CT \x63\x6f\x75\x6et(*) as \x63\x6e\x74 \x46ROM "._DB_PREFIX_."bas\x65_\x63\x6fm\x6dissio\x6e";${${"G\x4cO\x42A\x4c\x53"}["\x6f\x72qv\x66o\x76"]}=(int)Db::getInstance()->getValue(${$ajbheweebog});if(${${"\x47\x4c\x4f\x42\x41LS"}["\x75\x62\x71\x6f\x6b\x73\x68\x77\x66\x76"]}<1){$dqrcujbnckx="\x62\x61\x73\x65c\x6f\x6d";${$dqrcujbnckx}=new BaseCommissionRate();$basecom->id_seller=0;$basecom->base_commission=0;$basecom->save();}${${"\x47\x4cO\x42A\x4cS"}["x\x6a\x74dg\x6ds"]}="\x53\x45\x4c\x45\x43T\x20coun\x74(*) \x61\x73\x20cn\x74 FROM "._DB_PREFIX_."\x63\x6f\x6d\x6d\x69s\x73io\x6e_\x72ate";${${"\x47\x4c\x4f\x42A\x4cS"}["u\x62\x71\x6f\x6b\x73h\x77f\x76"]}=(int)Db::getInstance()->getValue(${${"\x47\x4c\x4f\x42AL\x53"}["\x78\x6atd\x67\x6ds"]});if(${${"G\x4c\x4f\x42A\x4c\x53"}["\x75b\x71\x6f\x6bs\x68wf\x76"]}<1){$dldfjabmh="c\x6fm\x72\x61\x74e";${$dldfjabmh}=new RangeCommissionRate();$comrate->id_seller=0;$comrate->from_amount=0;$comrate->to_amount=0;$comrate->commission=10;$comrate->deduction_rate=0;$comrate->save();}}}
?>