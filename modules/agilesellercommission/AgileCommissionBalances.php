<?php /*
///-build_id: 2014101516.1711
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/store/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2012 Addons-Modules.com
///
*/
${"\x47\x4cO\x42\x41\x4c\x53"}["\x6fxd\x73\x75\x69t\x72\x6ezs\x71"]="l\x69\x6d\x69\x74";${"\x47L\x4f\x42\x41\x4c\x53"}["t\x6f\x78w\x6e\x6e"]="\x63u\x73\x74\x6f\x6der";${"G\x4c\x4f\x42\x41L\x53"}["c\x74w\x6a\x76l"]="\x63u\x72\x72e\x6e\x63\x79";${"GLOBA\x4c\x53"}["\x65b\x65\x79\x6cnl\x6d\x6b"]="\x72\x65\x74";${"\x47LO\x42\x41\x4cS"}["\x74\x6a\x72\x6b\x6fn\x6d\x78\x72h"]="\x62\x61\x6c\x61\x6ec\x65";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x73\x78\x7a\x77x\x72\x72r\x76\x64"]="\x63\x6f\x6c\x6fr";${"G\x4c\x4fB\x41L\x53"}["c\x64m\x79\x73\x64\x69\x78f\x64"]="\x61\x6c\x74";${"\x47\x4c\x4f\x42\x41L\x53"}["\x6f\x6bb\x67\x67\x65\x69f\x69\x62"]="\x73\x71\x6c";${"\x47L\x4fB\x41\x4cS"}["rp\x65\x66fk\x66\x6f\x69\x78i"]="\x70ay\x6d\x65\x6e\x74_ur\x6c";${"\x47L\x4f\x42A\x4c\x53"}["\x67\x76\x72f\x63m\x6d"]="\x6e\x6f\x74\x65s";${"\x47\x4cO\x42\x41\x4c\x53"}["\x67\x63\x61djhh\x71\x76\x76f"]="v\x61\x6c\x75e";${"\x47\x4c\x4f\x42\x41\x4cS"}["\x76\x72ct\x6fwjv\x66"]="\x64\x61\x74\x61";${"G\x4c\x4fB\x41\x4c\x53"}["s\x74kwbp\x6e\x62hhre"]="\x70a\x79\x64\x61ta";include_once(_PS_ROOT_DIR_."/\x6do\x64ul\x65\x73/ag\x69l\x65\x73\x65\x6c\x6c\x65\x72\x63ommissi\x6f\x6e/\x43\x6fm\x6di\x73s\x69\x6fnB\x61\x6c\x61n\x63\x65.ph\x70");include_once(_PS_ROOT_DIR_."/\x6d\x6fdu\x6ces/ag\x69\x6c\x65\x73e\x6c\x6cer\x63\x6fmmis\x73\x69o\x6e/\x53\x65llerCo\x6dmiss\x69on\x2ep\x68\x70");include_once(_PS_ROOT_DIR_."/\x6dodule\x73/a\x67ile\x73e\x6c\x6c\x65r\x63\x6fmm\x69ssi\x6f\x6e/\x61g\x69\x6c\x65\x73\x65l\x6cer\x63\x6f\x6d\x6d\x69ss\x69on.p\x68\x70");class AgileCommissionBalances extends ModuleAdminController{public function __construct(){global$cookie;$this->bootstrap=true;$this->table="c\x6fm\x6d\x69s\x73\x69\x6fn\x5f\x62\x61\x6c\x61\x6ec\x65";$this->className="\x43ommi\x73s\x69o\x6e\x42\x61\x6c\x61\x6ec\x65";$this->identifier="\x69\x64_\x63\x6fm\x6di\x73s\x69\x6fn\x5fbalance";parent::__construct();$this->lang=false;$this->list_no_link=true;$this->fields_list=array("i\x64\x5fcommis\x73ion\x5f\x62a\x6c\x61nc\x65"=>array("\x74itle"=>$this->l('Seller ID'),"al\x69g\x6e"=>"c\x65n\x74\x65r","\x77id\x74h"=>25),"s\x65\x6c\x6ce\x72"=>array("title"=>$this->l('Seller Name'),"align"=>"r\x69\x67h\x74","width"=>50),"ba\x6c\x61\x6e\x63\x65"=>array("t\x69\x74\x6c\x65"=>$this->l('Balance'),"widt\x68"=>150,"\x61\x6cig\x6e"=>"r\x69\x67h\x74","\x74ype"=>"\x70r\x69ce","cu\x72\x72\x65\x6ec\x79"=>true),"\x74op\x61\x79"=>array("\x74\x69t\x6c\x65"=>$this->l('Action'),"wi\x64t\x68"=>150,"a\x6ci\x67n"=>"rig\x68t","callb\x61\x63k"=>"\x64i\x73p\x6c\x61\x79\x50\x61\x79L\x69nk"));}public function initToolbar(){parent::initToolbar();unset($this->toolbar_btn["\x6eew"]);}public function renderList(){if(!$this->is_seller){return parent::renderList().$this->showBottomNotes();}return$this->showSelleBalanceInfo();}public function displayPayLink($value,$data){$xalvmvxw="\x70a\x79d\x61\x74\x61";$nqnvsbpw="\x76a\x6c\x75e";if((float)${$nqnvsbpw}<=0)return"--";${${"\x47\x4cO\x42\x41\x4c\x53"}["st\x6b\x77\x62pn\x62\x68\x68\x72e"]}=array("\x72\x65cord\x5f\x74ype"=>SellerCommission::RECORD_TYPE_STORE_PAY_SELLER,"id_s\x65ller"=>${${"\x47\x4c\x4fB\x41LS"}["\x76rcto\x77j\x76\x66"]}["\x69d\x5f\x63o\x6dmis\x73i\x6fn_bal\x61nc\x65"],"a\x6doun\x74\x5f\x74\x6f\x5f\x70ay"=>floatval(${${"G\x4cO\x42A\x4c\x53"}["g\x63\x61d\x6a\x68h\x71vvf"]}),"ret\x6be\x79"=>Tools::getValue("t\x6fk\x65n"),"\x70\x61y\x6bey"=>Tools::encrypt(${${"\x47LO\x42\x41\x4c\x53"}["\x76\x72\x63\x74\x6fw\x6a\x76f"]}["\x69d_\x63\x6f\x6dm\x69s\x73\x69\x6fn_b\x61la\x6e\x63e"]));return"\n\t\t\t\x3ca\x20\x68re\x66\x3d\"".AgileSellerCommission::get_paycommission_url(${$xalvmvxw})."\"\x3e\n\t\t\t<i\x6dg\x20sr\x63\x3d\x22".__PS_BASE_URI__."mo\x64\x75\x6ce\x73/\x61\x67\x69le\x73e\x6cler\x63\x6f\x6dmi\x73s\x69\x6f\x6e/i\x6d\x67/pa\x79\x2ep\x6e\x67\x22 \x61\x6c\x74\x3d\x22".$this->l('Pay Commission')."\"\x20\x74i\x74\x6c\x65\x3d\"".$this->l('Pay Commission')."\" /\x3e</\x61>";}public function showBottomNotes(){$jqwgneook="n\x6f\x74\x65\x73";${${"G\x4cO\x42\x41\x4c\x53"}["\x67\x76\x72fcmm"]}="";$hobpuflhm="\x70ayme\x6e\x74\x5fu\x72\x6c";${$jqwgneook}.="\x3cp>".$this->l('Negative account: Seller owes store owner. Seller need to pay store owner.')."</p\x3e";${${"\x47\x4cO\x42A\x4c\x53"}["\x67v\x72\x66\x63\x6d\x6d"]}.="<p>".$this->l('Postive account: Store owner owes seller. Store owner needs to pay seller the sales of products.')."</\x70>";${"\x47\x4cO\x42AL\x53"}["xg\x6ef\x76\x66\x6eqc\x6b"]="n\x6f\x74e\x73";${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x72\x70\x65\x66\x66kf\x6f\x69\x78\x69"]}=Tools::getShopDomainSsl(true,true).__PS_BASE_URI__."mo\x64u\x6c\x65\x73/\x61gil\x65\x70aypa\x6cma\x73\x73\x70ay/\x65\x78e\x63\x75t\x65\x2e\x70h\x70";if(version_compare(_PS_VERSION_,"\x31.5","\x3e=")){${${"\x47\x4c\x4fB\x41LS"}["\x72p\x65\x66\x66\x6bf\x6fi\x78\x69"]}=Context::getContext()->link->getModuleLink("\x61g\x69\x6ce\x70\x61y\x70a\x6c\x6da\x73s\x70\x61\x79","\x65xecut\x65",array(),true);}if(Module::isInstalled("\x61\x67ile\x70a\x79p\x61lm\x61sspay"))${${"\x47\x4cO\x42A\x4c\x53"}["\x67v\x72\x66\x63\x6dm"]}.="\x3c\x70>".$this->l('Click [Mass Pay All] button to pay all sellers together. ')."\x3ca \x68\x72\x65\x66\x3d\x22".${$hobpuflhm}."\"\x20\x63\x6ca\x73s\x3d\"bu\x74to\x6e\"\x3e".$this->l('Mass Pay All')."</\x61\x3e</p>";else${${"\x47\x4c\x4f\x42A\x4cS"}["\x67\x76\x72f\x63m\x6d"]}.="\x3cp>".$this->l('If you install Agile Paypal Mass pay module, you can pay all sellers together in one transaction.')."\x3c/\x70\x3e";return${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x78\x67\x6efv\x66\x6e\x71c\x6b"]};}public function showSelleBalanceInfo(){$esyrxth="\x73\x71\x6c";$wumrnpchbv="r\x65t";$mefwtek="b\x61\x6c\x61n\x63\x65";global$cookie;${$wumrnpchbv}="";${${"GL\x4f\x42\x41L\x53"}["\x6f\x6b\x62\x67\x67\x65\x69\x66ib"]}="S\x45LE\x43\x54 S\x55M(\x73\x63\x2ere\x63ord\x5fbalan\x63e) \x41\x53\x20\x62al\x61\x6ec\x65\n\t   \x20\x20\x20  \x46\x52O\x4d `"._DB_PREFIX_."se\x6cl\x65r\x5f\x63omm\x69s\x73io\x6e\x60\x20s\x63\n\t\x20  \x20\x20\x20  W\x48E\x52\x45 i\x64_\x73\x65\x6c\x6cer=".$cookie->id_employee."\x20\n\t\x20\x20\x20\x20 \x20 \x20";$qnihgdkgwts="\x63\x75\x72\x72\x65\x6e\x63\x79";${"G\x4cO\x42ALS"}["\x6cpb\x68y\x6c"]="\x63\x6flo\x72";${$mefwtek}=Db::getInstance()->getValue(${$esyrxth});${${"GL\x4fBA\x4c\x53"}["\x63dmy\x73\x64\x69\x78\x66\x64"]}=$this->l('Pay Now');$ndmbhgqr="\x62a\x6c\x61\x6e\x63\x65";${${"\x47\x4cO\x42\x41L\x53"}["\x73\x78z\x77\x78r\x72r\x76\x64"]}="bl\x61c\x6b";if(${${"\x47\x4cOB\x41\x4c\x53"}["t\x6a\x72\x6bonmx\x72\x68"]}<0)${${"GL\x4f\x42\x41LS"}["\x6c\x70bh\x79l"]}="\x72ed";${$qnihgdkgwts}=new Currency(Configuration::get("ASC\x5f\x43O\x4d\x4d\x49S\x53IO\x4e\x5fCU\x52\x52E\x4e\x43\x59"));${${"G\x4c\x4f\x42A\x4c\x53"}["e\x62\x65y\x6c\x6el\x6d\x6b"]}.=$this->l('Your account balance is').": <s\x70\x61n\x20s\x74\x79l\x65=\"f\x6fnt-s\x69ze:xx-\x6c\x61\x72g\x65\x3bc\x6fl\x6fr:".${${"G\x4c\x4f\x42A\x4c\x53"}["sx\x7a\x77\x78\x72\x72\x72\x76\x64"]}."\x22>".Tools::displayPrice(floatval(${${"GL\x4f\x42\x41\x4c\x53"}["\x74j\x72\x6b\x6fn\x6d\x78rh"]}),${${"G\x4c\x4f\x42\x41\x4cS"}["c\x74wj\x76\x6c"]})."\x3c/sp\x61n>\x3c\x62\x72 /><\x62r\x20/>";if(${$ndmbhgqr}<0){$uilrkxj="al\x74";${"GLO\x42AL\x53"}["g\x69nel\x64\x6e"]="b\x61\x6ca\x6ece";${"G\x4c\x4fB\x41L\x53"}["\x69\x76\x7ajpnniq\x65\x73\x72"]="\x72\x65\x74";${"GL\x4f\x42AL\x53"}["\x71\x69j\x71\x71\x6f\x77\x76\x67"]="\x70\x61\x79\x64at\x61";${"\x47\x4c\x4f\x42\x41L\x53"}["\x6cl\x6de\x66b\x6a\x6e\x6f\x69"]="\x61\x6c\x74";${${"\x47LO\x42\x41\x4c\x53"}["\x73t\x6b\x77bp\x6ebh\x68\x72\x65"]}=array("rec\x6frd\x5ft\x79pe"=>SellerCommission::RECORD_TYPE_SELLER_PAY_STORE,"id_\x73\x65l\x6c\x65\x72"=>$cookie->id_employee,"\x61mou\x6et_\x74o_\x70a\x79"=>(-${${"\x47L\x4fBA\x4c\x53"}["\x67\x69n\x65\x6cdn"]}),"\x72e\x74\x6b\x65y"=>Tools::getValue("\x74\x6f\x6ben"),"\x70a\x79ke\x79"=>Tools::encrypt($cookie->id_employee));${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x69\x76\x7ajp\x6en\x69qes\x72"]}.=$this->l('Payment to store owner is owed for commissions on sales.')."\n  \x20\x20\x20\x20\x20\x20\t\t\x3c\x62r /\x3e\x3c\x62\x72 /><a \x68re\x66=\x22".AgileSellerCommission::get_paycommission_url(${${"G\x4c\x4f\x42\x41\x4cS"}["q\x69\x6a\x71\x71\x6f\x77\x76g"]})."\x22\x3e\n\t\t\t\x20 \x20 ".$this->l('Click the icon to pay now')."&\x6e\x62\x73p;<\x69mg\x20src=\x22".__PS_BASE_URI__."\x6d\x6f\x64ul\x65\x73/\x61\x67\x69les\x65l\x6ce\x72\x63om\x6di\x73\x73io\x6e/\x69\x6dg/\x70a\x79.p\x6eg\" \x61lt\x3d\"".${$uilrkxj}."\"\x20\x74it\x6ce\x3d\x22".${${"GL\x4f\x42A\x4c\x53"}["\x6c\x6cm\x65\x66b\x6anoi"]}."\x22 /\x3e\x3c/a\x3e";}else{$srjwxknidt="\x72e\x74";${$srjwxknidt}.=$this->l('Store owes you the above amont.');if(Module::isInstalled("a\x67ilepr\x65p\x61i\x64\x63\x72edi\x74")){${${"G\x4c\x4fB\x41\x4c\x53"}["\x65\x62\x65y\x6cn\x6c\x6d\x6b"]}.="<b\x72\x20/\x3e".$this->l('You can transfer this amount to your customer account and convert into tokens so that you can use it to purchase items in this store.');${${"\x47L\x4fB\x41\x4cS"}["\x74o\x78\x77n\x6e"]}=new Customer($cookie->id_employee);${"\x47\x4cO\x42\x41\x4c\x53"}["\x63tw\x70e\x77i"]="\x63\x75\x73t\x6fm\x65\x72";if(Validate::isLoadedObject(${${"\x47\x4c\x4fBAL\x53"}["\x63tw\x70e\x77i"]})){${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6badd\x6fhc\x77x\x6bh"]="r\x65\x74";${${"G\x4cO\x42A\x4cS"}["\x6b\x61\x64\x64oh\x63\x77\x78\x6bh"]}.="<b\x72 /\x3e".$customer->firstname." ".$customer->lastname."(".$customer->email.")";}else{${"\x47\x4c\x4f\x42\x41LS"}["\x70\x6bwx\x62\x73\x76"]="\x72\x65\x74";$npqfkmiugv="\x72\x65t";${${"GL\x4f\x42\x41\x4c\x53"}["\x70k\x77\x78\x62\x73\x76"]}.="\x3cbr />".$this->l('Not linked to any account');${${"GL\x4f\x42\x41L\x53"}["\x65\x62\x65\x79l\x6e\x6c\x6dk"]}.="<br /\x3e".$this->l('Link by email address:')."\x26\x6e\x62\x73\x70\x3b<i\x6e\x70u\x74 ty\x70\x65\x3d\x22linkt\x6f_e\x6da\x69\x6c\x22 v\x61l\x75\x65\x3d\"\"\x20\x20/\x3e";${$npqfkmiugv}.="\x3cb\x72\x20/\x3e".$this->l('Link by customer ID:')."&\x6e\x62\x73p;\x3ci\x6ep\x75\x74 \x74\x79pe=\x22linkt\x6f\x5f\x69\x64\x5fcus\x74omer\"\x20\x76\x61lue\x3d\x22\"\x20\x20/\x3e";}}}return${${"G\x4c\x4fB\x41\x4c\x53"}["\x65\x62\x65yl\x6e\x6c\x6dk"]};}public function getList($id_lang,$orderBy=NULL,$orderWay=NULL,$start=0,$limit=NULL,$id_lang_shop=false){${"\x47\x4cO\x42\x41LS"}["\x62\x65\x6d\x76\x6e\x72\x78\x6b\x63"]="s\x71\x6c\x32";$widnavsvg="\x73\x71l0";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x6d\x66\x76\x73\x6ahy"]="s\x71l\x30";$uhxckvqui="\x73ql\x32";${"G\x4cO\x42\x41\x4c\x53"}["z\x75\x6d\x6a\x73b\x77\x75mc\x78"]="\x73\x71\x6c0";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x76vo\x65h\x69\x6f\x6b\x71"]="\x73\x71\x6c\x31";global$cookie;$jngoiybms="\x73\x74\x61r\x74";${"G\x4cOB\x41\x4c\x53"}["\x69\x63p\x6b\x71\x65a\x64uo\x6d\x63"]="\x6c\x69mi\x74";${"G\x4cOBA\x4cS"}["\x66\x72\x6b\x71\x74sh\x70b\x69\x72"]="\x73q\x6c\x31";${${"GL\x4f\x42\x41L\x53"}["\x6d\x66vsj\x68\x79"]}="SE\x4c\x45CT \x53U\x4d(sc.reco\x72d_bal\x61nce) \x41S\x20\x62\x61la\x6ec\x65, S\x55\x4d(\x73\x63.reco\x72\x64\x5fb\x61l\x61\x6e\x63\x65)\x20AS\x20\x74o\x70\x61y, \x73\x63\x2eid_c\x75\x72r\x65n\x63\x79, s\x63\x2e\x69\x64\x5fs\x65\x6cler\x20AS\x20id\x5fcom\x6d\x69ss\x69on\x5f\x62a\x6c\x61\x6e\x63e, \x73\x6c\x2e\x63\x6f\x6d\x70a\x6ey\x20AS \x73\x65\x6c\x6c\x65r\n\t\x20\x20\x20  \x20    \x20 \x46RO\x4d \x60"._DB_PREFIX_."sel\x6c\x65\x72_\x63\x6fmmis\x73\x69o\x6e\x60 s\x63\n\t\x20\x20      \x20 \x20\x20   \x20\x4cEF\x54 \x4aOI\x4e\x20`"._DB_PREFIX_."se\x6c\x6ce\x72inf\x6f` \x73 \x4f\x4e\x20\x73c\x2ei\x64\x5fse\x6c\x6cer=s.id\x5f\x73\x65l\x6c\x65\x72\n\t \x20 \x20    \x20\x20  \x20 \x20\x20LEFT\x20\x4aO\x49\x4e \x60"._DB_PREFIX_."\x73\x65ll\x65ri\x6ef\x6f\x5fl\x61\x6e\x67`\x20\x73l O\x4e\x20(sl\x2e\x69d\x5fsel\x6cer\x69\x6e\x66o\x3d\x73.i\x64\x5f\x73\x65\x6c\x6ce\x72i\x6e\x66o \x41\x4eD\x20s\x6c.id\x5fl\x61ng\x3d".intval($cookie->id_lang).")\n\t \x20\x20 \x20  \x20 \x20 \x20\x57\x48\x45R\x45\x20\x31 A\x4e\x44 \x73c.\x69d_\x73e\x6cl\x65r\x3e0 ".($this->is_seller?"\x20\x41\x4e\x44\x20s\x63\x2e\x69d\x5f\x73e\x6cle\x72\x3d".$cookie->id_employee:"")." \n\t\x20    \x20\x20 \x20 \x20 \x47\x52OU\x50 B\x59 \x73\x63\x2ei\x64_sell\x65\x72, \x73l.\x63\x6f\x6d\x70an\x79\n\t   \x20 \x20\x20\x20\x20\x20 \x20";${${"G\x4cOBA\x4c\x53"}["\x66rkq\x74\x73\x68p\x62i\x72"]}=${${"G\x4cO\x42\x41\x4c\x53"}["\x7aum\x6a\x73b\x77\x75\x6d\x63x"]}." \x4cIM\x49T ".${$jngoiybms}.",".(intval(${${"\x47\x4cO\x42A\x4cS"}["\x6f\x78d\x73uit\x72\x6ez\x73q"]})>0?intval(${${"\x47LO\x42ALS"}["ic\x70\x6bq\x65\x61duom\x63"]}):50);$this->_list=Db::getInstance()->ExecuteS(${${"\x47L\x4f\x42\x41\x4c\x53"}["\x76\x76o\x65\x68i\x6f\x6bq"]});${${"\x47\x4c\x4f\x42\x41L\x53"}["\x62e\x6d\x76\x6erxk\x63"]}="\x53E\x4c\x45\x43T\x20\x43OUN\x54(*)\x20AS \x6e\x75\x6d FR\x4f\x4d\x20(".${$widnavsvg}.") A\x53\x20\x54";$this->_listTotal=Db::getInstance()->getValue(${$uhxckvqui});}}
?>