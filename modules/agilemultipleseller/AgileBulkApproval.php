<?php /*
///-build_id: 2015013020.5255
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/store/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2012 Addons-Modules.com
///
*/
${"G\x4c\x4fBALS"}["\x62\x6e\x76\x79\x64\x63\x69"]="\x72\x65c";${"\x47L\x4f\x42\x41L\x53"}["\x78s\x79\x6b\x72\x70l\x79u\x6c"]="sq\x6c";${"G\x4cO\x42\x41L\x53"}["\x76\x71\x75nu\x62tb\x6fg\x65"]="\x70\x72\x6fd\x75c\x74\x69\x64\x73";${"G\x4cO\x42\x41\x4c\x53"}["\x72\x62\x64\x7a\x79\x67\x67u\x74\x74"]="\x6e\x65wtoek\x6e";${"\x47\x4c\x4f\x42\x41L\x53"}["\x70\x67\x78x\x66xxit"]="\x69d";${"\x47\x4c\x4f\x42\x41LS"}["\x66\x66s\x74\x63\x62\x64a\x6a\x72"]="\x75r\x6c";${"\x47LO\x42\x41\x4cS"}["\x61\x6dm\x70\x71\x6fyd"]="cu\x72re\x6e\x63y";include_once(_PS_ADMIN_DIR_."/../\x6do\x64u\x6c\x65s/\x61gi\x6c\x65\x6du\x6ct\x69\x70\x6c\x65s\x65ller/\x61gile\x6d\x75ltipl\x65\x73\x65l\x6c\x65r\x2e\x70h\x70");class AgileBulkApproval extends ModuleAdminController{private$_isSeller;private$_approved_statuses=array('1'=>'Yes','0'=>'No');public$controller_type='admin';public function __construct(){global$cookie;$this->bootstrap=true;$this->table="p\x72\x6f\x64\x75\x63t";$this->identifier="\x69d\x5fpr\x6f\x64\x75ct";$this->className="P\x72odu\x63\x74";$this->list_no_link=false;parent::__construct();${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x61\x6d\x6dp\x71oyd"]}=(int)Configuration::get("\x50\x53\x5fC\x55RR\x45N\x43\x59_\x44\x45\x46AU\x4cT");$this->addRowAction("");$this->confirmations[]=$this->l('Only products waiting approval will be displayed here, no matter what category the product is in. Products have been approved will not appear here.');$this->bulk_actions["\x62\x75\x6c\x6ba\x70\x72\x6fva\x6c"]=array("tex\x74"=>$this->l('Approve'),"con\x66\x69\x72m"=>$this->l('Approve all selected items?'));$this->_isSeller=(intval($cookie->profile)==Configuration::get("A\x47I\x4cE\x5fM\x53\x5fPR\x4f\x46\x49\x4c\x45\x5f\x49\x44"));$this->_join=$this->_join." \x4cEF\x54\x20\x4aO\x49\x4e\x20\x60"._DB_PREFIX_."p\x72o\x64\x75\x63\x74\x5fla\x6eg` b O\x4e (\x61\x2e`i\x64\x5fprod\x75\x63\x74` \x3d b.\x60\x69d\x5f\x70r\x6fd\x75\x63t` \x41\x4eD b.\x69d_\x6can\x67\x3d".$cookie->id_lang.")"."\tL\x45\x46\x54\x20\x4aOI\x4e `"._DB_PREFIX_."p\x72od\x75\x63t\x5f\x6fw\x6e\x65\x72\x60 \x70\x6f\x20O\x4e\x20(a\x2e\x60id\x5f\x70ro\x64\x75ct\x60\x3dpo\x2e`i\x64\x5f\x70ro\x64\x75\x63t`)"." L\x45\x46\x54\x20\x4a\x4fI\x4e\x20`"._DB_PREFIX_."\x73el\x6c\x65r\x69n\x66o` \x73\x20ON (p\x6f\x2e`id_ow\x6ee\x72`\x20=\x20\x73.\x60\x69\x64_se\x6c\x6c\x65\x72\x60)"."\x20\x4c\x45\x46\x54\x20\x4aO\x49\x4e\x20\x60"._DB_PREFIX_."se\x6cl\x65\x72i\x6e\x66o\x5f\x6c\x61\x6eg\x60\x20\x73l \x4f\x4e (\x73\x6c\x2e`\x69d\x5fs\x65ll\x65ri\x6efo\x60 = s\x2e\x60id_s\x65l\x6ce\x72i\x6ef\x6f\x60AND\x20\x73\x6c.\x69\x64\x5f\x6ca\x6eg=".$cookie->id_lang.")"." L\x45F\x54 \x4a\x4fI\x4e\x20`"._DB_PREFIX_."image` i ON (i\x2e\x60id_p\x72\x6f\x64uct`\x20= a.\x60\x69d\x5fpr\x6f\x64\x75c\x74\x60\x20A\x4e\x44 i.`c\x6fver`\x20\x3d 1) "."\x20\x4cEF\x54\x20JOIN `"._DB_PREFIX_."c\x61\x74eg\x6fry\x5fp\x72o\x64\x75\x63t` c\x70\x20\x4fN\x20(cp.\x60i\x64_\x70ro\x64u\x63t`\x20\x3d\x20\x61\x2e`id\x5f\x70ro\x64\x75\x63\x74\x60\x20\x41N\x44 c\x70\x2e\x69d_c\x61\x74e\x67\x6f\x72\x79\x3da.i\x64\x5fca\x74e\x67\x6f\x72y_\x64\x65f\x61u\x6ct)\x20"."\x20LE\x46T\x20\x4aOI\x4e\x20\x60"._DB_PREFIX_."t\x61x\x5fru\x6c\x65` \x74r\x20\x4fN (a.`\x69d_t\x61\x78\x5fru\x6ce\x73\x5f\x67rou\x70`\x20\x3d\x20t\x72.`id_t\x61\x78_r\x75\x6c\x65s_g\x72o\x75p` AN\x44 t\x72.\x60\x69d\x5fco\x75\x6e\x74r\x79`\x20= ".(_PS_VERSION_>="1.5"?Context::getContext()->country->id:(int)Country::getDefaultCountryId())." AND\x20tr\x2e`\x69\x64\x5f\x73t\x61t\x65\x60 = 0)"."\x20LE\x46\x54\x20J\x4f\x49N\x20`"._DB_PREFIX_."ta\x78`\x20\x74\x20O\x4e\x20(t\x2e\x60\x69d_ta\x78` \x3d\x20tr\x2e`\x69d\x5ft\x61x`)";${"\x47L\x4f\x42\x41\x4c\x53"}["\x76q\x6e\x75\x65\x71\x6bse\x64\x79"]="cu\x72\x72\x65\x6e\x63y";$this->_select=$this->_select."\x62\x2en\x61m\x65, \x63\x70\x2e\x60\x70os\x69\x74i\x6f\x6e`,sl\x2e\x63\x6f\x6d\x70\x61ny A\x53\x20\x6fw\x6ee\x72,\x20I\x46\x4eUL\x4c(p\x6f.a\x70\x70\x72o\x76e\x64,\x30) \x41S a\x70pr\x6f\x76\x65\x64, \x69\x2e\x60i\x64_i\x6d\x61ge\x60, (a.\x60\x70r\x69\x63e\x60 *\x20((\x31\x300\x20+ (I\x46NU\x4c\x4c(\x74\x2e\x72\x61\x74\x65,0)))/1\x30\x30))\x20AS\x20p\x72i\x63\x65_fina\x6c\n\t\t\t,".${${"\x47\x4cO\x42\x41L\x53"}["v\x71\x6e\x75e\x71\x6b\x73\x65\x64y"]}."\x20\x61\x73 i\x64\x5f\x63ur\x72e\x6ec\x79\n\t\t\t,CA\x53\x45 W\x48EN \x49\x46N\x55L\x4c(\x70\x6f.\x61p\x70rov\x65d,0)=1 T\x48\x45\x4e '".$this->_approved_statuses[1]."\x27 EL\x53E\x20\x27".$this->_approved_statuses[0]."' EN\x44\x20\x41\x53 \x61pp\x72\x6fved_text\n  \x20  \x20\x20\x20\x20\x20  ";$this->_where=$this->_where." \x41ND\x20I\x46\x4e\x55L\x4c(\x70\x6f\x2e\x61p\x70r\x6f\x76\x65d,0)\x3d0";$this->fields_list=array("i\x64\x5fpr\x6f\x64uc\x74"=>array("tit\x6c\x65"=>$this->l('ID'),"\x61\x6ci\x67\x6e"=>"\x63e\x6eter","w\x69\x64\x74\x68"=>20),"\x69m\x61ge"=>array("\x74\x69\x74\x6c\x65"=>$this->l('Photo'),"\x61lign"=>"c\x65nt\x65\x72","\x69\x6d\x61ge"=>"p","\x77id\x74\x68"=>45,"orde\x72b\x79"=>false,"\x66\x69lte\x72"=>false,"\x73\x65a\x72\x63\x68"=>false),"n\x61m\x65"=>array("tit\x6ce"=>$this->l('Name'),"\x77\x69dth"=>220,"\x66i\x6c\x74e\x72_\x6be\x79"=>"b\x21name"),"\x70r\x69ce"=>array("t\x69t\x6c\x65"=>$this->l('Base price'),"\x77id\x74\x68"=>70,"typ\x65"=>"\x70\x72\x69\x63\x65","\x63u\x72r\x65\x6ecy"=>true,"a\x6c\x69gn"=>"r\x69\x67ht","fil\x74\x65r\x5f\x6b\x65\x79"=>"a!pri\x63\x65"),"p\x72ice_f\x69n\x61\x6c"=>array("ti\x74\x6c\x65"=>$this->l('Final price'),"wid\x74\x68"=>70,"ty\x70\x65"=>"p\x72\x69\x63e","c\x75\x72r\x65\x6e\x63y"=>true,"\x61l\x69\x67n"=>"r\x69\x67ht","ha\x76\x69ng\x46\x69\x6c\x74\x65\x72"=>true,"\x6frd\x65\x72\x62\x79"=>false),"appr\x6fv\x65d\x5ftext"=>array("\x74\x69tle"=>$this->l('Approved'),"\x77id\x74\x68"=>60,"ty\x70\x65"=>"\x73\x65l\x65ct","\x6ci\x73\x74"=>$this->_approved_statuses,"\x66i\x6c\x74\x65r\x5f\x74y\x70\x65"=>"in\x74","f\x69l\x74e\x72_\x6b\x65y"=>"p\x6f!\x61p\x70r\x6f\x76\x65\x64"),"\x6fwn\x65\x72"=>array("\x74it\x6ce"=>$this->l('Owner'),"\x77id\x74\x68"=>90,"f\x69l\x74e\x72\x5f\x6bey"=>"ow\x6ee\x72"));}public function initToolbar(){parent::initToolbar();unset($this->toolbar_btn["\x6ee\x77"]);}public function init(){global$cookie;if(isset($_GET["\x75\x70\x64\x61\x74e".$this->table])AND isset($_GET[$this->identifier])AND(int)$_GET[$this->identifier]>0){${"\x47L\x4f\x42\x41L\x53"}["\x79\x6e\x70\x7a\x70oh\x68"]="\x69\x64";$ghjgzhqgct="new\x74\x6f\x65kn";$vxphfe="u\x72\x6c";${${"G\x4cO\x42\x41\x4c\x53"}["\x79\x6e\x70\x7ap\x6f\x68\x68"]}=Tools::getValue($this->identifier);${$ghjgzhqgct}=Tools::getAdminTokenLite("\x41dmi\x6ePr\x6f\x64\x75\x63ts");${${"\x47\x4c\x4f\x42\x41LS"}["ff\x73\x74\x63\x62\x64ajr"]}="./i\x6e\x64\x65\x78\x2e\x70\x68\x70?\x63\x6f\x6e\x74\x72\x6fll\x65r\x3d\x61d\x6di\x6e\x70\x72\x6fd\x75\x63ts\x26".$this->identifier."\x3d".${${"G\x4cO\x42\x41\x4cS"}["\x70g\x78x\x66x\x78\x69\x74"]}."\x26\x75pd\x61\x74e".$this->table."\x26to\x6be\x6e=".${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x72\x62\x64z\x79\x67gut\x74"]};Tools::redirectAdmin(${$vxphfe});}parent::init();}public function postProcess(){if(Tools::isSubmit("\x73ubmit\x42\x75\x6ck\x62u\x6c\x6b\x61\x70\x72o\x76al\x70\x72o\x64u\x63\x74")){if(isset($_POST[$this->table."\x42o\x78"])){${"\x47L\x4fB\x41LS"}["\x66\x61ymtpx\x75\x6b\x62"]="\x70rodu\x63\x74\x69\x64s";${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x76\x71u\x6e\x75\x62t\x62og\x65"]}=$_POST[$this->table."B\x6fx"];foreach(${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x66ay\x6d\x74\x70\x78\x75\x6b\x62"]} AS${${"\x47\x4cO\x42A\x4cS"}["p\x67\x78\x78\x66xxit"]}){$wthdnqkcmqh="\x72e\x63";$tuqjewsr="\x73\x71\x6c";$kluhxiiuc="\x69\x64";if(intval(${${"G\x4c\x4f\x42ALS"}["p\x67\x78xfx\x78\x69\x74"]})<=0)continue;${$tuqjewsr}="S\x45L\x45\x43T *\x20FROM "._DB_PREFIX_."\x70roduc\x74\x5f\x6f\x77\x6e\x65\x72 W\x48ERE i\x64_\x70ro\x64\x75\x63\x74 =".${$kluhxiiuc};${$wthdnqkcmqh}=Db::getInstance()->getRow(${${"GL\x4f\x42\x41\x4c\x53"}["\x78sy\x6brp\x6cy\x75l"]});if(!isset(${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x62nvyd\x63i"]}["i\x64_produc\x74"]))${${"\x47LO\x42\x41L\x53"}["\x78\x73yk\x72\x70\x6cy\x75\x6c"]}="IN\x53ER\x54\x20I\x4e\x54O\x20"._DB_PREFIX_."\x70rod\x75c\x74\x5f\x6f\x77\x6e\x65\x72\x20(\x69d\x5fpro\x64u\x63\x74,id_\x6fwner,ap\x70ro\x76\x65\x64,\x64\x61\x74e_a\x64\x64) \x56A\x4c\x55E\x53\x20(".${${"\x47LOB\x41\x4c\x53"}["pg\x78\x78\x66x\x78\x69t"]}.",0,1,\x27".date("Y-m-\x64 \x48:\x69:s")."\x27)";else${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x73\x79\x6b\x72\x70\x6c\x79\x75\x6c"]}="UPDA\x54\x45\x20"._DB_PREFIX_."\x70rod\x75ct\x5f\x6f\x77ne\x72 \x53E\x54 \x61\x70prove\x64\x3d1 \x57HERE \x69\x64_p\x72o\x64u\x63t\x3d".(int)${${"G\x4c\x4fBA\x4cS"}["pg\x78\x78\x66x\x78\x69\x74"]};Db::getInstance()->Execute(${${"GLOBA\x4c\x53"}["x\x73y\x6b\x72\x70\x6cy\x75l"]});}}else{$this->_errors[]="No\x20\x70r\x6fd\x75\x63t wa\x73 s\x65le\x63\x74e\x64\x20t\x6f\x20ap\x70r\x6f\x76\x65.";}return;}parent::postProcess();}}
?>